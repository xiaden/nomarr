import{c as e,i as t,l as n,u as r}from"./ui-0x0XinP6.js";import{Z as i,dt as a,n as o,pt as s}from"./index-ByHFyLQZ.js";var c=s(i(),1);function l({onRestart:r,actionLoading:i}){return(0,c.jsxs)(n,{children:[(0,c.jsx)(e,{title:`System Controls`}),(0,c.jsx)(t,{label:`Restart Server`,description:`Stops and restarts the API server. Config changes will take effect. Page will reload automatically after restart.`,onClick:r,disabled:i,variant:`contained`,color:`error`})]})}function u({onPause:i,onResume:a,actionLoading:o}){return(0,c.jsxs)(n,{children:[(0,c.jsx)(e,{title:`Worker Controls`}),(0,c.jsxs)(r,{spacing:1.25,children:[(0,c.jsx)(t,{label:`Pause Worker`,description:`Stops the worker from processing queue jobs. Jobs remain in the queue.`,onClick:i,disabled:o}),(0,c.jsx)(t,{label:`Resume Worker`,description:`Starts the worker to process queue jobs.`,onClick:a,disabled:o})]})]})}var d=s(a(),1);function f(){let[e,t]=(0,d.useState)(!1);return{actionLoading:e,handlePauseWorker:async()=>{if(confirm(`Pause the worker? Processing will stop.`))try{t(!0);let e=await o.admin.pauseWorker();alert(e.message)}catch(e){alert(e instanceof Error?e.message:`Failed to pause worker`)}finally{t(!1)}},handleResumeWorker:async()=>{if(confirm(`Resume the worker? Processing will start.`))try{t(!0);let e=await o.admin.resumeWorker();alert(e.message)}catch(e){alert(e instanceof Error?e.message:`Failed to resume worker`)}finally{t(!1)}},handleRestart:async()=>{if(confirm(`Restart the API server? The page will reload in a few seconds.`))try{t(!0);let e=await o.admin.restart();alert(e.message),setTimeout(()=>{window.location.reload()},3e3)}catch(e){alert(e instanceof Error?e.message:`Failed to restart server`),t(!1)}}}}function p(){let{actionLoading:e,handlePauseWorker:t,handleResumeWorker:n,handleRestart:r}=f();return(0,c.jsxs)(`div`,{style:{padding:`20px`},children:[(0,c.jsx)(`h1`,{style:{marginBottom:`20px`},children:`Admin`}),(0,c.jsxs)(`div`,{style:{display:`grid`,gap:`20px`},children:[(0,c.jsx)(u,{onPause:t,onResume:n,actionLoading:e}),(0,c.jsx)(l,{onRestart:r,actionLoading:e})]})]})}export{p as AdminPage};