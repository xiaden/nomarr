import{t as e}from"./Stack-Dim16oqk.js";import{It as t,Rt as n,St as r,c as i,f as a,n as o,p as s}from"./index-CuL7d4Y7.js";var c=n(r(),1);function l({onRestart:e,actionLoading:t}){return(0,c.jsxs)(s,{children:[(0,c.jsx)(a,{title:`System Controls`}),(0,c.jsx)(i,{label:`Restart Server`,description:`Stops and restarts the API server. Config changes will take effect. Page will reload automatically after restart.`,onClick:e,disabled:t,variant:`contained`,color:`error`})]})}function u({onPause:t,onResume:n,actionLoading:r}){return(0,c.jsxs)(s,{children:[(0,c.jsx)(a,{title:`Worker Controls`}),(0,c.jsxs)(e,{spacing:1.25,children:[(0,c.jsx)(i,{label:`Pause Worker`,description:`Stops the worker from processing queue jobs. Jobs remain in the queue.`,onClick:t,disabled:r}),(0,c.jsx)(i,{label:`Resume Worker`,description:`Starts the worker to process queue jobs.`,onClick:n,disabled:r})]})]})}var d=n(t(),1);function f(){let[e,t]=(0,d.useState)(!1);return{actionLoading:e,handlePauseWorker:async()=>{if(confirm(`Pause the worker? Processing will stop.`))try{t(!0);let e=await o.admin.pauseWorker();alert(e.message)}catch(e){alert(e instanceof Error?e.message:`Failed to pause worker`)}finally{t(!1)}},handleResumeWorker:async()=>{if(confirm(`Resume the worker? Processing will start.`))try{t(!0);let e=await o.admin.resumeWorker();alert(e.message)}catch(e){alert(e instanceof Error?e.message:`Failed to resume worker`)}finally{t(!1)}},handleRestart:async()=>{if(confirm(`Restart the API server? The page will reload in a few seconds.`))try{t(!0);let e=await o.admin.restart();alert(e.message),setTimeout(()=>{window.location.reload()},3e3)}catch(e){alert(e instanceof Error?e.message:`Failed to restart server`),t(!1)}}}}function p(){let{actionLoading:e,handlePauseWorker:t,handleResumeWorker:n,handleRestart:r}=f();return(0,c.jsxs)(`div`,{style:{padding:`20px`},children:[(0,c.jsx)(`h1`,{style:{marginBottom:`20px`},children:`Admin`}),(0,c.jsxs)(`div`,{style:{display:`grid`,gap:`20px`},children:[(0,c.jsx)(u,{onPause:t,onResume:n,actionLoading:e}),(0,c.jsx)(l,{onRestart:r,actionLoading:e})]})]})}export{p as AdminPage};