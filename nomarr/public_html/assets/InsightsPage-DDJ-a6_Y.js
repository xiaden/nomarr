import{t as e}from"./Stack-DPQtcQ1W.js";import{a as t,d as n,n as r,o as i,r as a,t as o}from"./TextField-BUVmGH25.js";import{a as s,t as c}from"./MenuItem-Dt_SIENV.js";import{n as l,t as u}from"./ListItemText-BsbEOf8m.js";import{a as d,i as f,n as p,r as m,t as h}from"./TableRow-D6mihSzh.js";import{$t as g,B as _,Ct as v,G as y,Gt as b,Ht as x,It as S,Mt as C,Nt as w,Pt as T,Qt as E,R as D,Rt as O,Tt as k,U as A,Ut as j,Vt as ee,W as M,X as N,Z as P,Zt as F,c as I,dt as L,ft as R,g as z,gt as B,hn as V,ht as te,i as ne,in as H,it as U,l as re,lt as ie,mn as ae,n as W,nn as oe,pt as se,r as ce,rn as G,rt as K,st as q,t as le,wt as ue,xt as de,z as fe}from"./index-BbkTMn2t.js";import{t as pe}from"./useNotification-B21x1So5.js";function me(e){return E(`MuiCollapse`,e)}F(`MuiCollapse`,[`root`,`horizontal`,`vertical`,`entered`,`hidden`,`wrapper`,`wrapperInner`]);var J=V(ae()),Y=V(oe()),he=e=>{let{orientation:t,classes:n}=e;return j({root:[`root`,`${t}`],entered:[`entered`],hidden:[`hidden`],wrapper:[`wrapper`,`${t}`],wrapperInner:[`wrapperInner`,`${t}`]},me,n)},ge=O(`div`,{name:`MuiCollapse`,slot:`Root`,overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,t[n.orientation],n.state===`entered`&&t.entered,n.state===`exited`&&!n.in&&n.collapsedSize===`0px`&&t.hidden]}})(w(({theme:e})=>({height:0,overflow:`hidden`,transition:e.transitions.create(`height`),variants:[{props:{orientation:`horizontal`},style:{height:`auto`,width:0,transition:e.transitions.create(`width`)}},{props:{state:`entered`},style:{height:`auto`,overflow:`visible`}},{props:{state:`entered`,orientation:`horizontal`},style:{width:`auto`}},{props:({ownerState:e})=>e.state===`exited`&&!e.in&&e.collapsedSize===`0px`,style:{visibility:`hidden`}}]}))),_e=O(`div`,{name:`MuiCollapse`,slot:`Wrapper`})({display:`flex`,width:`100%`,variants:[{props:{orientation:`horizontal`},style:{width:`auto`,height:`100%`}}]}),ve=O(`div`,{name:`MuiCollapse`,slot:`WrapperInner`})({width:`100%`,variants:[{props:{orientation:`horizontal`},style:{width:`auto`,height:`100%`}}]}),ye=J.forwardRef(function(e,t){let n=S({props:e,name:`MuiCollapse`}),{addEndListener:r,children:i,className:a,collapsedSize:o=`0px`,component:s,easing:c,in:l,onEnter:u,onEntered:d,onEntering:f,onExit:p,onExited:m,onExiting:h,orientation:_=`vertical`,slots:y={},slotProps:b={},style:C,timeout:w=x.standard,TransitionComponent:T=ue,...E}=n,D={...n,orientation:_,collapsedSize:o},O=he(D),A=ee(),j=v(),M=J.useRef(null),N=J.useRef(),P=typeof o==`number`?`${o}px`:o,F=_===`horizontal`,I=F?`width`:`height`,L=J.useRef(null),R=k(t,L),z=e=>t=>{if(e){let n=L.current;t===void 0?e(n):e(n,t)}},V=()=>M.current?M.current[F?`clientWidth`:`clientHeight`]:0,te=z((e,t)=>{M.current&&F&&(M.current.style.position=`absolute`),e.style[I]=P,u&&u(e,t)}),ne=z((e,t)=>{let n=V();M.current&&F&&(M.current.style.position=``);let{duration:r,easing:i}=de({style:C,timeout:w,easing:c},{mode:`enter`});if(w===`auto`){let t=A.transitions.getAutoHeightDuration(n);e.style.transitionDuration=`${t}ms`,N.current=t}else e.style.transitionDuration=typeof r==`string`?r:`${r}ms`;e.style[I]=`${n}px`,e.style.transitionTimingFunction=i,f&&f(e,t)}),H=z((e,t)=>{e.style[I]=`auto`,d&&d(e,t)}),U=z(e=>{e.style[I]=`${V()}px`,p&&p(e)}),re=z(m),ie=z(e=>{let t=V(),{duration:n,easing:r}=de({style:C,timeout:w,easing:c},{mode:`exit`});if(w===`auto`){let n=A.transitions.getAutoHeightDuration(t);e.style.transitionDuration=`${n}ms`,N.current=n}else e.style.transitionDuration=typeof n==`string`?n:`${n}ms`;e.style[I]=P,e.style.transitionTimingFunction=r,h&&h(e)}),ae=e=>{w===`auto`&&j.start(N.current||0,e),r&&r(L.current,e)},W={slots:y,slotProps:b,component:s},[oe,se]=B(`root`,{ref:R,className:g(O.root,a),elementType:ge,externalForwardedProps:W,ownerState:D,additionalProps:{style:{[F?`minWidth`:`minHeight`]:P,...C}}}),[ce,G]=B(`wrapper`,{ref:M,className:O.wrapper,elementType:_e,externalForwardedProps:W,ownerState:D}),[K,q]=B(`wrapperInner`,{className:O.wrapperInner,elementType:ve,externalForwardedProps:W,ownerState:D});return(0,Y.jsx)(T,{in:l,onEnter:te,onEntered:H,onEntering:ne,onExit:U,onExited:re,onExiting:ie,addEndListener:ae,nodeRef:L,timeout:w===`auto`?null:w,...E,children:(e,{ownerState:t,...n})=>{let r={...D,state:e};return(0,Y.jsx)(oe,{...se,className:g(se.className,{entered:O.entered,exited:!l&&P===`0px`&&O.hidden}[e]),ownerState:r,...n,children:(0,Y.jsx)(ce,{...G,ownerState:r,children:(0,Y.jsx)(K,{...q,ownerState:r,children:i})})})}})});ye&&(ye.muiSupportAuto=!0);var be=ye,xe=J.createContext({});function Se(e){return E(`MuiAccordion`,e)}var X=F(`MuiAccordion`,[`root`,`heading`,`rounded`,`expanded`,`disabled`,`gutters`,`region`]),Ce=e=>{let{classes:t,square:n,expanded:r,disabled:i,disableGutters:a}=e;return j({root:[`root`,!n&&`rounded`,r&&`expanded`,i&&`disabled`,!a&&`gutters`],heading:[`heading`],region:[`region`]},Se,t)},we=O(te,{name:`MuiAccordion`,slot:`Root`,overridesResolver:(e,t)=>{let{ownerState:n}=e;return[{[`& .${X.region}`]:t.region},t.root,!n.square&&t.rounded,!n.disableGutters&&t.gutters]}})(w(({theme:e})=>{let t={duration:e.transitions.duration.shortest};return{position:`relative`,transition:e.transitions.create([`margin`],t),overflowAnchor:`none`,"&::before":{position:`absolute`,left:0,top:-1,right:0,height:1,content:`""`,opacity:1,backgroundColor:(e.vars||e).palette.divider,transition:e.transitions.create([`opacity`,`background-color`],t)},"&:first-of-type":{"&::before":{display:`none`}},[`&.${X.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:`none`}}},[`&.${X.disabled}`]:{backgroundColor:(e.vars||e).palette.action.disabledBackground}}}),w(({theme:e})=>({variants:[{props:e=>!e.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(e.vars||e).shape.borderRadius,borderBottomRightRadius:(e.vars||e).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:e=>!e.disableGutters,style:{[`&.${X.expanded}`]:{margin:`16px 0`}}}]}))),Te=O(`h3`,{name:`MuiAccordion`,slot:`Heading`})({all:`unset`}),Ee=O(`div`,{name:`MuiAccordion`,slot:`Region`})({}),De=J.forwardRef(function(e,t){let r=S({props:e,name:`MuiAccordion`}),{children:i,className:a,defaultExpanded:o=!1,disabled:s=!1,disableGutters:c=!1,expanded:l,onChange:u,square:d=!1,slots:f={},slotProps:p={},TransitionComponent:m,TransitionProps:h,..._}=r,[v,y]=n({controlled:l,default:o,name:`Accordion`,state:`expanded`}),b=J.useCallback(e=>{y(!v),u&&u(e,!v)},[v,u,y]),[x,...C]=J.Children.toArray(i),w=J.useMemo(()=>({expanded:v,disabled:s,disableGutters:c,toggle:b}),[v,s,c,b]),T={...r,square:d,disabled:s,disableGutters:c,expanded:v},E=Ce(T),D={slots:{transition:m,...f},slotProps:{transition:h,...p}},[O,k]=B(`root`,{elementType:we,externalForwardedProps:{...D,..._},className:g(E.root,a),shouldForwardComponentProp:!0,ownerState:T,ref:t,additionalProps:{square:d}}),[A,j]=B(`heading`,{elementType:Te,externalForwardedProps:D,className:E.heading,ownerState:T}),[ee,M]=B(`transition`,{elementType:be,externalForwardedProps:D,ownerState:T}),[N,P]=B(`region`,{elementType:Ee,externalForwardedProps:D,ownerState:T,className:E.region,additionalProps:{"aria-labelledby":x.props.id,id:x.props[`aria-controls`],role:`region`}});return(0,Y.jsxs)(O,{...k,children:[(0,Y.jsx)(A,{...j,children:(0,Y.jsx)(xe.Provider,{value:w,children:x})}),(0,Y.jsx)(ee,{in:v,timeout:`auto`,...M,children:(0,Y.jsx)(N,{...P,children:C})})]})});function Oe(e){return E(`MuiAccordionDetails`,e)}F(`MuiAccordionDetails`,[`root`]);var ke=e=>{let{classes:t}=e;return j({root:[`root`]},Oe,t)},Ae=O(`div`,{name:`MuiAccordionDetails`,slot:`Root`})(w(({theme:e})=>({padding:e.spacing(1,2,2)}))),je=J.forwardRef(function(e,t){let n=S({props:e,name:`MuiAccordionDetails`}),{className:r,...i}=n,a=n;return(0,Y.jsx)(Ae,{className:g(ke(a).root,r),ref:t,ownerState:a,...i})});function Me(e){return E(`MuiAccordionSummary`,e)}var Z=F(`MuiAccordionSummary`,[`root`,`expanded`,`focusVisible`,`disabled`,`gutters`,`contentGutters`,`content`,`expandIconWrapper`]),Ne=e=>{let{classes:t,expanded:n,disabled:r,disableGutters:i}=e;return j({root:[`root`,n&&`expanded`,r&&`disabled`,!i&&`gutters`],focusVisible:[`focusVisible`],content:[`content`,n&&`expanded`,!i&&`contentGutters`],expandIconWrapper:[`expandIconWrapper`,n&&`expanded`]},Me,t)},Pe=O(se,{name:`MuiAccordionSummary`,slot:`Root`})(w(({theme:e})=>{let t={duration:e.transitions.duration.shortest};return{display:`flex`,width:`100%`,minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create([`min-height`,`background-color`],t),[`&.${Z.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Z.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`&:hover:not(.${Z.disabled})`]:{cursor:`pointer`},variants:[{props:e=>!e.disableGutters,style:{[`&.${Z.expanded}`]:{minHeight:64}}}]}})),Fe=O(`span`,{name:`MuiAccordionSummary`,slot:`Content`})(w(({theme:e})=>({display:`flex`,textAlign:`start`,flexGrow:1,margin:`12px 0`,variants:[{props:e=>!e.disableGutters,style:{transition:e.transitions.create([`margin`],{duration:e.transitions.duration.shortest}),[`&.${Z.expanded}`]:{margin:`20px 0`}}}]}))),Ie=O(`span`,{name:`MuiAccordionSummary`,slot:`ExpandIconWrapper`})(w(({theme:e})=>({display:`flex`,color:(e.vars||e).palette.action.active,transform:`rotate(0deg)`,transition:e.transitions.create(`transform`,{duration:e.transitions.duration.shortest}),[`&.${Z.expanded}`]:{transform:`rotate(180deg)`}}))),Le=J.forwardRef(function(e,t){let n=S({props:e,name:`MuiAccordionSummary`}),{children:r,className:i,expandIcon:a,focusVisibleClassName:o,onClick:s,slots:c,slotProps:l,...u}=n,{disabled:d=!1,disableGutters:f,expanded:p,toggle:m}=J.useContext(xe),h=e=>{m&&m(e),s&&s(e)},_={...n,expanded:p,disabled:d,disableGutters:f},v=Ne(_),y={slots:c,slotProps:l},[b,x]=B(`root`,{ref:t,shouldForwardComponentProp:!0,className:g(v.root,i),elementType:Pe,externalForwardedProps:{...y,...u},ownerState:_,additionalProps:{focusRipple:!1,disableRipple:!0,disabled:d,"aria-expanded":p,focusVisibleClassName:g(v.focusVisible,o)},getSlotProps:e=>({...e,onClick:t=>{e.onClick?.(t),h(t)}})}),[C,w]=B(`content`,{className:v.content,elementType:Fe,externalForwardedProps:y,ownerState:_}),[T,E]=B(`expandIconWrapper`,{className:v.expandIconWrapper,elementType:Ie,externalForwardedProps:y,ownerState:_});return(0,Y.jsxs)(b,{...x,children:[(0,Y.jsx)(C,{...w,children:r}),a&&(0,Y.jsx)(T,{...E,children:a})]})});function Re(e){return E(`MuiLinearProgress`,e)}F(`MuiLinearProgress`,[`root`,`colorPrimary`,`colorSecondary`,`determinate`,`indeterminate`,`buffer`,`query`,`dashed`,`dashedColorPrimary`,`dashedColorSecondary`,`bar`,`bar1`,`bar2`,`barColorPrimary`,`barColorSecondary`,`bar1Indeterminate`,`bar1Determinate`,`bar1Buffer`,`bar2Indeterminate`,`bar2Buffer`]);var ze=4,Be=H`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`,Ve=typeof Be==`string`?null:G`
        animation: ${Be} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
      `,He=H`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`,Ue=typeof He==`string`?null:G`
        animation: ${He} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
      `,We=H`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`,Ge=typeof We==`string`?null:G`
        animation: ${We} 3s infinite linear;
      `,Ke=e=>{let{classes:t,variant:n,color:r}=e;return j({root:[`root`,`color${T(r)}`,n],dashed:[`dashed`,`dashedColor${T(r)}`],bar1:[`bar`,`bar1`,`barColor${T(r)}`,(n===`indeterminate`||n===`query`)&&`bar1Indeterminate`,n===`determinate`&&`bar1Determinate`,n===`buffer`&&`bar1Buffer`],bar2:[`bar`,`bar2`,n!==`buffer`&&`barColor${T(r)}`,n===`buffer`&&`color${T(r)}`,(n===`indeterminate`||n===`query`)&&`bar2Indeterminate`,n===`buffer`&&`bar2Buffer`]},Re,t)},qe=(e,t)=>e.vars?e.vars.palette.LinearProgress[`${t}Bg`]:e.palette.mode===`light`?e.lighten(e.palette[t].main,.62):e.darken(e.palette[t].main,.5),Je=O(`span`,{name:`MuiLinearProgress`,slot:`Root`,overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,t[`color${T(n.color)}`],t[n.variant]]}})(w(({theme:e})=>({position:`relative`,overflow:`hidden`,display:`block`,height:4,zIndex:0,"@media print":{colorAdjust:`exact`},variants:[...Object.entries(e.palette).filter(R()).map(([t])=>({props:{color:t},style:{backgroundColor:qe(e,t)}})),{props:({ownerState:e})=>e.color===`inherit`&&e.variant!==`buffer`,style:{"&::before":{content:`""`,position:`absolute`,left:0,top:0,right:0,bottom:0,backgroundColor:`currentColor`,opacity:.3}}},{props:{variant:`buffer`},style:{backgroundColor:`transparent`}},{props:{variant:`query`},style:{transform:`rotate(180deg)`}}]}))),Ye=O(`span`,{name:`MuiLinearProgress`,slot:`Dashed`,overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.dashed,t[`dashedColor${T(n.color)}`]]}})(w(({theme:e})=>({position:`absolute`,marginTop:0,height:`100%`,width:`100%`,backgroundSize:`10px 10px`,backgroundPosition:`0 -23px`,variants:[{props:{color:`inherit`},style:{opacity:.3,backgroundImage:`radial-gradient(currentColor 0%, currentColor 16%, transparent 42%)`}},...Object.entries(e.palette).filter(R()).map(([t])=>{let n=qe(e,t);return{props:{color:t},style:{backgroundImage:`radial-gradient(${n} 0%, ${n} 16%, transparent 42%)`}}})]})),Ge||{animation:`${We} 3s infinite linear`}),Xe=O(`span`,{name:`MuiLinearProgress`,slot:`Bar1`,overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.bar,t.bar1,t[`barColor${T(n.color)}`],(n.variant===`indeterminate`||n.variant===`query`)&&t.bar1Indeterminate,n.variant===`determinate`&&t.bar1Determinate,n.variant===`buffer`&&t.bar1Buffer]}})(w(({theme:e})=>({width:`100%`,position:`absolute`,left:0,bottom:0,top:0,transition:`transform 0.2s linear`,transformOrigin:`left`,variants:[{props:{color:`inherit`},style:{backgroundColor:`currentColor`}},...Object.entries(e.palette).filter(R()).map(([t])=>({props:{color:t},style:{backgroundColor:(e.vars||e).palette[t].main}})),{props:{variant:`determinate`},style:{transition:`transform .${ze}s linear`}},{props:{variant:`buffer`},style:{zIndex:1,transition:`transform .${ze}s linear`}},{props:({ownerState:e})=>e.variant===`indeterminate`||e.variant===`query`,style:{width:`auto`}},{props:({ownerState:e})=>e.variant===`indeterminate`||e.variant===`query`,style:Ve||{animation:`${Be} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite`}}]}))),Ze=O(`span`,{name:`MuiLinearProgress`,slot:`Bar2`,overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.bar,t.bar2,t[`barColor${T(n.color)}`],(n.variant===`indeterminate`||n.variant===`query`)&&t.bar2Indeterminate,n.variant===`buffer`&&t.bar2Buffer]}})(w(({theme:e})=>({width:`100%`,position:`absolute`,left:0,bottom:0,top:0,transition:`transform 0.2s linear`,transformOrigin:`left`,variants:[...Object.entries(e.palette).filter(R()).map(([t])=>({props:{color:t},style:{"--LinearProgressBar2-barColor":(e.vars||e).palette[t].main}})),{props:({ownerState:e})=>e.variant!==`buffer`&&e.color!==`inherit`,style:{backgroundColor:`var(--LinearProgressBar2-barColor, currentColor)`}},{props:({ownerState:e})=>e.variant!==`buffer`&&e.color===`inherit`,style:{backgroundColor:`currentColor`}},{props:{color:`inherit`},style:{opacity:.3}},...Object.entries(e.palette).filter(R()).map(([t])=>({props:{color:t,variant:`buffer`},style:{backgroundColor:qe(e,t),transition:`transform .${ze}s linear`}})),{props:({ownerState:e})=>e.variant===`indeterminate`||e.variant===`query`,style:{width:`auto`}},{props:({ownerState:e})=>e.variant===`indeterminate`||e.variant===`query`,style:Ue||{animation:`${He} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite`}}]}))),Qe=J.forwardRef(function(e,t){let n=S({props:e,name:`MuiLinearProgress`}),{className:r,color:i=`primary`,value:a,valueBuffer:o,variant:s=`indeterminate`,...c}=n,l={...n,color:i,variant:s},u=Ke(l),d=b(),f={},p={bar1:{},bar2:{}};if((s===`determinate`||s===`buffer`)&&a!==void 0){f[`aria-valuenow`]=Math.round(a),f[`aria-valuemin`]=0,f[`aria-valuemax`]=100;let e=a-100;d&&(e=-e),p.bar1.transform=`translateX(${e}%)`}if(s===`buffer`&&o!==void 0){let e=(o||0)-100;d&&(e=-e),p.bar2.transform=`translateX(${e}%)`}return(0,Y.jsxs)(Je,{className:g(u.root,r),ownerState:l,role:`progressbar`,...f,ref:t,...c,children:[s===`buffer`?(0,Y.jsx)(Ye,{className:u.dashed,ownerState:l}):null,(0,Y.jsx)(Xe,{className:u.bar1,ownerState:l,style:p.bar1}),s===`determinate`?null:(0,Y.jsx)(Ze,{className:u.bar2,ownerState:l,style:p.bar2})]})}),$e=C((0,Y.jsx)(`path`,{d:`M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z`}),`Close`),et=C((0,Y.jsx)(`path`,{d:`M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z`}),`ExpandMore`);function tt({value:e,onChange:t,options:n,placeholder:r=`Type or select...`,disabled:i=!1,...a}){let[s,c]=(0,J.useState)(!1),[l,u]=(0,J.useState)(n),d=(0,J.useRef)(null);(0,J.useEffect)(()=>{u(e?n.filter(t=>t.toLowerCase().includes(e.toLowerCase())):n)},[e,n]),(0,J.useEffect)(()=>{let e=e=>{d.current&&!d.current.contains(e.target)&&c(!1)};return document.addEventListener(`mousedown`,e),()=>document.removeEventListener(`mousedown`,e)},[]);let f=e=>{t(e.target.value),c(!0)},p=e=>{t(e),c(!1)};return(0,Y.jsxs)(U,{...a,ref:d,sx:{position:`relative`,...a.sx},children:[(0,Y.jsx)(o,{type:`text`,value:e,onChange:f,onFocus:()=>c(!0),placeholder:r,disabled:i,fullWidth:!0,size:`small`,sx:{"& .MuiOutlinedInput-root":{bgcolor:i?`background.paper`:`background.default`}}}),s&&!i&&l.length>0&&(0,Y.jsx)(U,{sx:{position:`absolute`,top:`100%`,left:0,right:0,maxHeight:`200px`,overflowY:`auto`,bgcolor:`background.default`,border:1,borderColor:`divider`,borderTop:`none`,borderRadius:`0 0 4px 4px`,boxShadow:2,zIndex:1e3},children:l.map((e,t)=>(0,Y.jsx)(U,{onClick:()=>p(e),sx:{p:1.5,cursor:`pointer`,fontSize:`0.875rem`,borderBottom:t<l.length-1?1:`none`,borderColor:`divider`,"&:hover":{bgcolor:`action.hover`}},children:e},t))})]})}function nt({libraryId:t}){let[n,r]=(0,J.useState)([]),[i,a]=(0,J.useState)([]),[o,c]=(0,J.useState)(``),[l,u]=(0,J.useState)(``),[g,v]=(0,J.useState)([]),[y,b]=(0,J.useState)([]),[x,S]=(0,J.useState)(null),[C,w]=(0,J.useState)(!1),[T,E]=(0,J.useState)(null);(0,J.useEffect)(()=>{D()},[]),(0,J.useEffect)(()=>{o?O(o):(a([]),u(``))},[o]);let D=async()=>{try{r((await I(!0)).tag_keys)}catch(e){console.error(`[TagCoOccurrence] Failed to load tag keys:`,e)}},O=async e=>{try{let t=await re(e,!0),n=new Set;for(let e of t.tag_keys)if(e.startsWith(`[`)&&e.endsWith(`]`))try{let t=JSON.parse(e);Array.isArray(t)?t.forEach(e=>n.add(String(e))):n.add(e)}catch{n.add(e)}else n.add(e);a(Array.from(n).sort())}catch(e){console.error(`[TagCoOccurrence] Failed to load tag values:`,e),a([])}},k=(e,t)=>g.some(n=>n.key===e&&n.value===t)||y.some(n=>n.key===e&&n.value===t),A=()=>{o&&l&&!g.some(e=>e.key===o&&e.value===l)&&g.length<16&&v([...g,{key:o,value:l}])},j=()=>{o&&l&&!y.some(e=>e.key===o&&e.value===l)&&y.length<16&&b([...y,{key:o,value:l}])},ee=e=>{v(g.filter((t,n)=>n!==e))},M=e=>{b(y.filter((t,n)=>n!==e))},F=async()=>{if(g.length===0||y.length===0){E(`Both X and Y axes must have at least one tag`);return}try{w(!0),E(null),S(await _({x:g,y},t))}catch(e){E(e instanceof Error?e.message:`Failed to build matrix`),console.error(`[TagCoOccurrence] Matrix build error:`,e)}finally{w(!1)}},L=(e,t)=>{if(e===0)return`#1a1a1a`;let n=Math.min(e/t,1);return`rgb(${Math.floor(30+n*44)}, ${Math.floor(30+n*128)}, ${Math.floor(30+n*225)})`},R=x?.matrix?Math.max(...x.matrix.flat(),1):1;return(0,Y.jsxs)(P,{children:[(0,Y.jsx)(N,{title:`Tag Co-Occurrence Matrix`}),(0,Y.jsxs)(e,{spacing:2,sx:{mb:2.5},children:[(0,Y.jsxs)(U,{sx:{display:`flex`,gap:1.5,alignItems:`flex-end`},children:[(0,Y.jsxs)(U,{sx:{flex:1},children:[(0,Y.jsx)(q,{variant:`body2`,sx:{mb:.5,fontWeight:500},children:`Tag Key`}),(0,Y.jsx)(tt,{value:o,onChange:c,options:n,placeholder:`Select tag key...`})]}),(0,Y.jsxs)(U,{sx:{flex:1},children:[(0,Y.jsx)(q,{variant:`body2`,sx:{mb:.5,fontWeight:500},children:`Tag Value`}),(0,Y.jsx)(tt,{value:l,onChange:u,options:i,placeholder:`Select tag value...`,disabled:!o})]}),(0,Y.jsx)(K,{onClick:A,disabled:!o||!l||g.length>=16||k(o,l),variant:`contained`,size:`small`,children:`Add to X`}),(0,Y.jsx)(K,{onClick:j,disabled:!o||!l||y.length>=16||k(o,l),variant:`contained`,color:`secondary`,size:`small`,children:`Add to Y`})]}),(0,Y.jsxs)(U,{children:[(0,Y.jsxs)(q,{variant:`body2`,sx:{mb:.5,fontWeight:500},children:[`X Axis (`,g.length,`/16)`]}),(0,Y.jsxs)(U,{sx:{display:`flex`,flexWrap:`wrap`,gap:1,p:1.5,bgcolor:`background.default`,border:1,borderColor:`divider`,borderRadius:1,minHeight:80},children:[g.length===0&&(0,Y.jsx)(q,{variant:`body2`,color:`text.secondary`,children:`No tags added to X axis yet`}),g.map((e,t)=>(0,Y.jsx)(s,{label:`${e.key}: ${e.value}`,onDelete:()=>ee(t),deleteIcon:(0,Y.jsx)($e,{}),size:`small`},t))]})]}),(0,Y.jsxs)(U,{children:[(0,Y.jsxs)(q,{variant:`body2`,sx:{mb:.5,fontWeight:500},children:[`Y Axis (`,y.length,`/16)`]}),(0,Y.jsxs)(U,{sx:{display:`flex`,flexWrap:`wrap`,gap:1,p:1.5,bgcolor:`background.default`,border:1,borderColor:`divider`,borderRadius:1,minHeight:80},children:[y.length===0&&(0,Y.jsx)(q,{variant:`body2`,color:`text.secondary`,children:`No tags added to Y axis yet`}),y.map((e,t)=>(0,Y.jsx)(s,{label:`${e.key}: ${e.value}`,onDelete:()=>M(t),deleteIcon:(0,Y.jsx)($e,{}),size:`small`},t))]})]}),(0,Y.jsx)(K,{onClick:F,disabled:C||g.length===0||y.length===0,variant:`contained`,fullWidth:!0,children:C?`Building Matrix...`:`Build Matrix`})]}),T&&(0,Y.jsx)(q,{color:`error`,sx:{mb:2},children:T}),x&&(0,Y.jsx)(U,{sx:{overflowX:`auto`,mt:2.5},children:(0,Y.jsxs)(d,{size:`small`,sx:{minWidth:300},children:[(0,Y.jsx)(p,{children:(0,Y.jsxs)(h,{children:[(0,Y.jsx)(m,{sx:{bgcolor:`background.default`,borderBottom:2,borderColor:`divider`,fontWeight:600},children:`Y \\ X`}),x.x.map((e,t)=>(0,Y.jsxs)(m,{sx:{bgcolor:`background.default`,borderBottom:2,borderColor:`divider`,fontWeight:600},children:[e.key,`:`,(0,Y.jsx)(`br`,{}),e.value]},t))]})}),(0,Y.jsx)(f,{children:x.y.map((e,t)=>(0,Y.jsxs)(h,{children:[(0,Y.jsxs)(m,{sx:{borderColor:`divider`,fontWeight:600},children:[e.key,`: `,e.value]}),x.x.map((e,n)=>(0,Y.jsx)(m,{align:`center`,sx:{borderColor:`divider`,bgcolor:L(x.matrix[t][n],R),fontWeight:x.matrix[t][n]>0?600:`normal`},children:x.matrix[t][n]},n))]},t))})]})})]})}var rt=`nomarr:insights:accordion:`;function it({storageKey:e,title:t,defaultExpanded:n=!0,children:r,secondary:i}){let a=`${rt}${e}`,[o,s]=(0,J.useState)(()=>{try{let e=localStorage.getItem(a);if(e!==null)return e===`true`}catch{}return n}),c=(0,J.useCallback)((e,t)=>{s(t);try{localStorage.setItem(a,String(t))}catch{}},[a]);return(0,J.useEffect)(()=>{let e=e=>{e.key===a&&e.newValue!==null&&s(e.newValue===`true`)};return window.addEventListener(`storage`,e),()=>window.removeEventListener(`storage`,e)},[a]),(0,Y.jsxs)(De,{expanded:o,onChange:c,children:[(0,Y.jsxs)(Le,{expandIcon:(0,Y.jsx)(et,{}),children:[(0,Y.jsx)(q,{variant:`h6`,sx:{flexGrow:1},children:t}),i]}),(0,Y.jsx)(je,{children:r})]})}function Q({sectionId:e,title:t,defaultExpanded:n=!0,children:r,secondary:i}){return(0,Y.jsx)(te,{elevation:1,sx:{mb:2},children:(0,Y.jsx)(it,{storageKey:e,title:t,defaultExpanded:n,secondary:i,children:(0,Y.jsx)(U,{sx:{px:1},children:r})})})}function at({libraryId:e}){return(0,Y.jsx)(Q,{sectionId:`advanced`,title:`Advanced Analytics`,defaultExpanded:!1,children:(0,Y.jsx)(nt,{libraryId:e})})}function $({subsectionId:e,parentId:t,title:n,defaultExpanded:r=!0,children:i,secondary:a}){return(0,Y.jsx)(U,{sx:{mb:1},children:(0,Y.jsx)(it,{storageKey:`${t}:${e}`,title:n,defaultExpanded:r,secondary:a,children:i})})}function ot({distribution:e,parentId:t}){let{top_artists:n,others_count:r,total_artists:i}=e;return n.length===0?(0,Y.jsx)($,{subsectionId:`artists`,parentId:t,title:`Artists`,children:(0,Y.jsx)(q,{color:`text.secondary`,children:`No artist data available`})}):(0,Y.jsx)($,{subsectionId:`artists`,parentId:t,title:`Artists`,secondary:(0,Y.jsxs)(q,{variant:`body2`,color:`text.secondary`,children:[i,` artists`]}),children:(0,Y.jsxs)(a,{dense:!0,disablePadding:!0,children:[n.map((e,t)=>(0,Y.jsx)(l,{disableGutters:!0,sx:{py:.25},children:(0,Y.jsx)(u,{primary:(0,Y.jsxs)(U,{sx:{display:`flex`,alignItems:`center`},children:[(0,Y.jsxs)(q,{variant:`body2`,color:`text.secondary`,sx:{width:24,textAlign:`right`,mr:1},children:[t+1,`.`]}),(0,Y.jsx)(q,{variant:`body2`,children:e.artist}),(0,Y.jsxs)(q,{variant:`body2`,color:`text.secondary`,sx:{ml:`auto`},children:[e.count,` tracks`]})]})})},e.artist)),r>0&&(0,Y.jsx)(l,{disableGutters:!0,sx:{py:.25},children:(0,Y.jsx)(u,{primary:(0,Y.jsxs)(q,{variant:`body2`,color:`text.secondary`,sx:{fontStyle:`italic`},children:[`+ `,r,` tracks from`,` `,i-n.length,` other artists`]})})})]})})}function st({distribution:e,parentId:t}){return e.length===0?(0,Y.jsx)($,{subsectionId:`genres`,parentId:t,title:`Genres`,children:(0,Y.jsx)(q,{color:`text.secondary`,children:`No genre data available`})}):(0,Y.jsx)($,{subsectionId:`genres`,parentId:t,title:`Genres`,secondary:(0,Y.jsxs)(q,{variant:`body2`,color:`text.secondary`,children:[e.length,` genres`]}),children:(0,Y.jsx)(U,{sx:{display:`flex`,flexWrap:`wrap`,gap:1},children:e.map(e=>(0,Y.jsx)(s,{label:`${e.genre} (${e.count})`,size:`small`,variant:`outlined`},e.genre))})})}function ct(e){let t=Math.floor(e/36e5),n=Math.floor(e%36e5/6e4);return t>0?`${t}h ${n}m`:`${n}m`}function lt(e){return e>=0xe8d4a51000?`${(e/0xe8d4a51000).toFixed(1)} TB`:e>=1e9?`${(e/1e9).toFixed(1)} GB`:e>=1e6?`${(e/1e6).toFixed(1)} MB`:`${(e/1e3).toFixed(1)} KB`}function ut({label:e,value:t}){return(0,Y.jsxs)(U,{sx:{textAlign:`center`,py:1,flex:`1 1 25%`,minWidth:100},children:[(0,Y.jsx)(q,{variant:`h5`,color:`primary`,children:t}),(0,Y.jsx)(q,{variant:`body2`,color:`text.secondary`,children:e})]})}function dt({stats:e,parentId:t}){return(0,Y.jsx)($,{subsectionId:`stats`,parentId:t,title:`Library Statistics`,children:(0,Y.jsxs)(U,{sx:{display:`flex`,flexWrap:`wrap`,gap:2},children:[(0,Y.jsx)(ut,{label:`Tracks`,value:e.file_count.toLocaleString()}),(0,Y.jsx)(ut,{label:`Total Duration`,value:ct(e.total_duration_ms)}),(0,Y.jsx)(ut,{label:`Total Size`,value:lt(e.total_file_size_bytes)}),(0,Y.jsx)(ut,{label:`Avg Track`,value:ct(e.avg_track_length_ms)})]})})}function ft({distribution:e,parentId:t}){if(e.length===0)return(0,Y.jsx)($,{subsectionId:`years`,parentId:t,title:`Years`,children:(0,Y.jsx)(q,{color:`text.secondary`,children:`No year data available`})});let n=Math.max(...e.map(e=>e.count));return(0,Y.jsx)($,{subsectionId:`years`,parentId:t,title:`Years`,secondary:(0,Y.jsxs)(q,{variant:`body2`,color:`text.secondary`,children:[e.length,` years`]}),children:(0,Y.jsx)(U,{sx:{maxHeight:200,overflow:`auto`},children:e.map(e=>(0,Y.jsxs)(U,{sx:{display:`flex`,alignItems:`center`,mb:.5},children:[(0,Y.jsx)(q,{variant:`body2`,sx:{width:60,flexShrink:0,textAlign:`right`,mr:1},children:e.year}),(0,Y.jsx)(U,{sx:{height:16,width:`${e.count/n*100}%`,minWidth:2,bgcolor:`primary.main`,borderRadius:.5}}),(0,Y.jsx)(q,{variant:`body2`,color:`text.secondary`,sx:{ml:1,flexShrink:0},children:e.count})]},e.year))})})}function pt({libraryId:e}){let[t,n]=(0,J.useState)(null),[r,i]=(0,J.useState)(!0),[a,o]=(0,J.useState)(null);return(0,J.useEffect)(()=>{(async()=>{try{i(!0),o(null),n(await D(e))}catch(e){o(e instanceof Error?e.message:`Failed to load collection overview`),console.error(`[CollectionOverview] Load error:`,e)}finally{i(!1)}})()},[e]),r?(0,Y.jsx)(Q,{sectionId:`collection-overview`,title:`Collection Overview`,children:(0,Y.jsx)(L,{size:24})}):a||!t?(0,Y.jsx)(Q,{sectionId:`collection-overview`,title:`Collection Overview`,children:(0,Y.jsx)(ie,{severity:`error`,children:a||`Failed to load collection overview`})}):(0,Y.jsxs)(Q,{sectionId:`collection-overview`,title:`Collection Overview`,secondary:(0,Y.jsxs)(q,{variant:`body2`,color:`text.secondary`,children:[t.stats.file_count.toLocaleString(),` tracks`]}),children:[(0,Y.jsx)(dt,{stats:t.stats,parentId:`collection-overview`}),(0,Y.jsx)(ft,{distribution:t.year_distribution,parentId:`collection-overview`}),(0,Y.jsx)(st,{distribution:t.genre_distribution,parentId:`collection-overview`}),(0,Y.jsx)(ot,{distribution:t.artist_distribution,parentId:`collection-overview`})]})}function mt({value:e,onChange:n}){let[a,o]=(0,J.useState)([]),[s,l]=(0,J.useState)(!0);return(0,J.useEffect)(()=>{(async()=>{try{o(await z(!0))}catch(e){console.error(`[LibraryFilter] Failed to load libraries:`,e)}finally{l(!1)}})()},[]),(0,Y.jsxs)(i,{size:`small`,sx:{minWidth:200},children:[(0,Y.jsx)(t,{id:`library-filter-label`,children:`Library`}),(0,Y.jsxs)(r,{labelId:`library-filter-label`,id:`library-filter`,value:e??``,label:`Library`,onChange:e=>{let t=e.target.value;n(t===``?void 0:t)},disabled:s,children:[(0,Y.jsx)(c,{value:``,children:`All Libraries`}),a.map(e=>(0,Y.jsx)(c,{value:e.library_id,children:e.name},e.library_id))]})]})}function ht({vibes:e,parentId:t}){return e.length===0?(0,Y.jsx)($,{subsectionId:`vibes`,parentId:t,title:`Dominant Vibes`,children:(0,Y.jsx)(q,{color:`text.secondary`,children:`No mood data available`})}):(0,Y.jsx)($,{subsectionId:`vibes`,parentId:t,title:`Dominant Vibes`,children:(0,Y.jsx)(U,{sx:{display:`flex`,flexWrap:`wrap`,gap:2},children:e.map((e,t)=>(0,Y.jsxs)(U,{sx:{textAlign:`center`,flex:`1 1 100px`,p:1,borderRadius:1,bgcolor:t===0?`primary.main`:`action.hover`,color:t===0?`primary.contrastText`:`text.primary`},children:[(0,Y.jsxs)(q,{variant:`h6`,children:[e.percentage.toFixed(0),`%`]}),(0,Y.jsx)(q,{variant:`body2`,sx:{textTransform:`capitalize`},children:e.mood})]},e.mood))})})}var gt={strict:`Strict`,relaxed:`Relaxed`,genre:`Genre`};function _t({balance:e,parentId:t}){let n=Object.entries(e);return n.length===0?(0,Y.jsx)($,{subsectionId:`balance`,parentId:t,title:`Mood Balance`,children:(0,Y.jsx)(q,{color:`text.secondary`,children:`No mood data available`})}):(0,Y.jsx)($,{subsectionId:`balance`,parentId:t,title:`Mood Balance`,defaultExpanded:!1,children:(0,Y.jsx)(U,{sx:{display:`flex`,flexDirection:`column`,gap:2},children:n.map(([e,t])=>{let n=Math.max(...t.map(e=>e.count),1);return(0,Y.jsxs)(U,{children:[(0,Y.jsxs)(q,{variant:`subtitle2`,sx:{mb:1},children:[gt[e]||e,` Tier`]}),(0,Y.jsx)(U,{sx:{maxHeight:150,overflow:`auto`},children:t.map(t=>(0,Y.jsxs)(U,{sx:{display:`flex`,alignItems:`center`,mb:.5},children:[(0,Y.jsx)(q,{variant:`body2`,sx:{width:80,flexShrink:0,textTransform:`capitalize`},children:t.mood}),(0,Y.jsx)(U,{sx:{height:12,width:`${t.count/n*100}%`,minWidth:2,bgcolor:`secondary.main`,borderRadius:.5}}),(0,Y.jsx)(q,{variant:`body2`,color:`text.secondary`,sx:{ml:1,flexShrink:0},children:t.count})]},`${e}-${t.mood}`))})]},e)})})})}function vt({pairs:e,parentId:t}){return e.length===0?(0,Y.jsx)($,{subsectionId:`combos`,parentId:t,title:`Mood Combos`,children:(0,Y.jsx)(q,{color:`text.secondary`,children:`No mood combinations found`})}):(0,Y.jsx)($,{subsectionId:`combos`,parentId:t,title:`Mood Combos`,defaultExpanded:!1,secondary:(0,Y.jsx)(q,{variant:`body2`,color:`text.secondary`,children:`Top pairs`}),children:(0,Y.jsx)(U,{sx:{display:`flex`,flexWrap:`wrap`,gap:1},children:e.map((e,t)=>(0,Y.jsx)(s,{label:(0,Y.jsxs)(U,{sx:{display:`flex`,alignItems:`center`,gap:.5},children:[(0,Y.jsx)(q,{variant:`body2`,component:`span`,sx:{textTransform:`capitalize`},children:e.mood1}),(0,Y.jsx)(q,{variant:`body2`,component:`span`,color:`text.secondary`,children:`+`}),(0,Y.jsx)(q,{variant:`body2`,component:`span`,sx:{textTransform:`capitalize`},children:e.mood2}),(0,Y.jsxs)(q,{variant:`body2`,component:`span`,color:`text.secondary`,sx:{ml:.5},children:[`(`,e.count,`)`]})]}),variant:t<3?`filled`:`outlined`,color:t<3?`primary`:`default`,size:`small`},`${e.mood1}-${e.mood2}`))})})}var yt={strict:`Strict (Primary)`,relaxed:`Relaxed (Secondary)`,genre:`Genre-Implied`};function bt({coverage:e,parentId:t}){let n=Object.entries(e.tiers);return(0,Y.jsx)($,{subsectionId:`coverage`,parentId:t,title:`Mood Coverage`,secondary:(0,Y.jsxs)(q,{variant:`body2`,color:`text.secondary`,children:[e.total_files.toLocaleString(),` tracks`]}),children:(0,Y.jsx)(U,{sx:{display:`flex`,flexDirection:`column`,gap:2},children:n.map(([e,t])=>(0,Y.jsxs)(U,{children:[(0,Y.jsxs)(U,{sx:{display:`flex`,justifyContent:`space-between`,mb:.5},children:[(0,Y.jsx)(q,{variant:`body2`,children:yt[e]||e}),(0,Y.jsxs)(q,{variant:`body2`,color:`text.secondary`,children:[t.tagged.toLocaleString(),` (`,t.percentage.toFixed(1),`%)`]})]}),(0,Y.jsx)(Qe,{variant:`determinate`,value:t.percentage,sx:{height:8,borderRadius:1}})]},e))})})}function xt({libraryId:e}){let[t,n]=(0,J.useState)(null),[r,i]=(0,J.useState)(!0),[a,o]=(0,J.useState)(null);return(0,J.useEffect)(()=>{(async()=>{try{i(!0),o(null),n(await fe(e))}catch(e){o(e instanceof Error?e.message:`Failed to load mood analysis`),console.error(`[MoodAnalysis] Load error:`,e)}finally{i(!1)}})()},[e]),r?(0,Y.jsx)(Q,{sectionId:`mood-analysis`,title:`Mood Analysis`,children:(0,Y.jsx)(L,{size:24})}):a||!t?(0,Y.jsx)(Q,{sectionId:`mood-analysis`,title:`Mood Analysis`,children:(0,Y.jsx)(ie,{severity:`error`,children:a||`Failed to load mood analysis`})}):(0,Y.jsxs)(Q,{sectionId:`mood-analysis`,title:`Mood Analysis`,secondary:(0,Y.jsxs)(q,{variant:`body2`,color:`text.secondary`,children:[(t.coverage.tiers.strict?.percentage??0).toFixed(0),`% strict coverage`]}),children:[(0,Y.jsx)(bt,{coverage:t.coverage,parentId:`mood-analysis`}),(0,Y.jsx)(ht,{vibes:t.dominant_vibes,parentId:`mood-analysis`}),(0,Y.jsx)(_t,{balance:t.balance,parentId:`mood-analysis`}),(0,Y.jsx)(vt,{pairs:t.top_pairs,parentId:`mood-analysis`})]})}function St(){let[t,n]=(0,J.useState)(void 0);return(0,Y.jsxs)(e,{spacing:0,sx:{mt:2},children:[(0,Y.jsx)(U,{sx:{mb:2},children:(0,Y.jsx)(mt,{value:t,onChange:n})}),(0,Y.jsx)(pt,{libraryId:t}),(0,Y.jsx)(xt,{libraryId:t}),(0,Y.jsx)(at,{libraryId:t})]})}function Ct({preview:t,configText:n,loading:r,error:i,onLoadPreview:a,onGenerateConfig:s}){let{showSuccess:c}=pe();return(0,Y.jsxs)(e,{spacing:2.5,children:[(0,Y.jsxs)(P,{children:[(0,Y.jsx)(N,{title:`Navidrome TOML Configuration`}),(0,Y.jsxs)(e,{spacing:1.25,children:[(0,Y.jsx)(K,{onClick:a,disabled:r,variant:`contained`,fullWidth:!0,children:r?`Loading...`:`Load Tag Preview`}),(0,Y.jsx)(K,{onClick:s,disabled:r,variant:`contained`,fullWidth:!0,children:r?`Generating...`:`Generate Config`})]}),i&&(0,Y.jsxs)(A,{children:[`Error: `,i]})]}),t&&(0,Y.jsxs)(P,{children:[(0,Y.jsx)(N,{title:`Tag Preview`}),(0,Y.jsx)(U,{sx:{overflowX:`auto`},children:(0,Y.jsxs)(d,{children:[(0,Y.jsx)(p,{children:(0,Y.jsxs)(h,{children:[(0,Y.jsx)(m,{sx:{bgcolor:`background.default`,borderBottom:2},children:`Tag`}),(0,Y.jsx)(m,{sx:{bgcolor:`background.default`,borderBottom:2},children:`Type`}),(0,Y.jsx)(m,{sx:{bgcolor:`background.default`,borderBottom:2},children:`Multivalue`}),(0,Y.jsx)(m,{sx:{bgcolor:`background.default`,borderBottom:2},children:`Count`}),(0,Y.jsx)(m,{sx:{bgcolor:`background.default`,borderBottom:2},children:`Summary`})]})}),(0,Y.jsx)(f,{children:t.map(e=>(0,Y.jsxs)(h,{children:[(0,Y.jsx)(m,{sx:{borderColor:`divider`},children:e.tag_key}),(0,Y.jsx)(m,{sx:{borderColor:`divider`},children:e.type}),(0,Y.jsx)(m,{sx:{borderColor:`divider`},children:e.is_multivalue?`Yes`:`No`}),(0,Y.jsx)(m,{sx:{borderColor:`divider`},children:e.total_count}),(0,Y.jsx)(m,{sx:{borderColor:`divider`},children:e.summary})]},e.tag_key))})]})})]}),n&&(0,Y.jsxs)(P,{children:[(0,Y.jsx)(N,{title:`Generated Config`}),(0,Y.jsx)(o,{multiline:!0,rows:20,value:n,fullWidth:!0,InputProps:{readOnly:!0,sx:{fontFamily:`monospace`,fontSize:`0.875rem`}}}),(0,Y.jsx)(K,{onClick:()=>{n&&(navigator.clipboard.writeText(n),c(`Copied to clipboard!`))},variant:`contained`,sx:{mt:1.25},children:`Copy to Clipboard`})]})]})}function wt({query:t,name:n,comment:r,limit:i,sort:a,preview:s,content:c,loading:l,error:u,onQueryChange:d,onNameChange:f,onCommentChange:p,onLimitChange:m,onSortChange:h,onPreview:g,onGenerate:_}){return(0,Y.jsxs)(e,{spacing:2.5,children:[(0,Y.jsxs)(P,{children:[(0,Y.jsx)(N,{title:`Smart Playlist Generator`}),(0,Y.jsx)(U,{component:`form`,onSubmit:g,children:(0,Y.jsxs)(e,{spacing:2,children:[(0,Y.jsxs)(U,{children:[(0,Y.jsx)(q,{variant:`body2`,color:`text.secondary`,sx:{mb:.5,fontWeight:600},children:`Query *`}),(0,Y.jsx)(o,{value:t,onChange:e=>d(e.target.value),placeholder:`e.g., tag:nom_happy > 0.8`,multiline:!0,rows:3,disabled:l,required:!0,fullWidth:!0,InputProps:{sx:{fontFamily:`monospace`,fontSize:`0.875rem`}}})]}),(0,Y.jsxs)(U,{children:[(0,Y.jsx)(q,{variant:`body2`,color:`text.secondary`,sx:{mb:.5,fontWeight:600},children:`Playlist Name *`}),(0,Y.jsx)(o,{value:n,onChange:e=>f(e.target.value),disabled:l,required:!0,fullWidth:!0})]}),(0,Y.jsxs)(U,{children:[(0,Y.jsx)(q,{variant:`body2`,color:`text.secondary`,sx:{mb:.5,fontWeight:600},children:`Comment`}),(0,Y.jsx)(o,{value:r,onChange:e=>p(e.target.value),disabled:l,fullWidth:!0})]}),(0,Y.jsxs)(U,{sx:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:1.25},children:[(0,Y.jsxs)(U,{children:[(0,Y.jsx)(q,{variant:`body2`,color:`text.secondary`,sx:{mb:.5,fontWeight:600},children:`Limit`}),(0,Y.jsx)(o,{type:`number`,value:i??``,onChange:e=>m(e.target.value?parseInt(e.target.value):void 0),disabled:l,placeholder:`Optional`,fullWidth:!0})]}),(0,Y.jsxs)(U,{children:[(0,Y.jsx)(q,{variant:`body2`,color:`text.secondary`,sx:{mb:.5,fontWeight:600},children:`Sort`}),(0,Y.jsx)(o,{value:a,onChange:e=>h(e.target.value),disabled:l,placeholder:`Optional`,fullWidth:!0})]})]}),(0,Y.jsxs)(e,{direction:`row`,spacing:1.25,children:[(0,Y.jsx)(K,{type:`submit`,variant:`contained`,disabled:l,fullWidth:!0,children:l?`Loading...`:`Preview Query`}),(0,Y.jsx)(K,{type:`button`,onClick:_,variant:`contained`,disabled:l,fullWidth:!0,children:l?`Generating...`:`Generate .nsp`})]})]})}),u&&(0,Y.jsxs)(A,{children:[`Error: `,u]})]}),s&&(0,Y.jsxs)(P,{children:[(0,Y.jsx)(N,{title:`Query Preview`}),(0,Y.jsx)(U,{component:`pre`,sx:{p:2,bgcolor:`background.default`,border:1,borderColor:`divider`,borderRadius:1,overflow:`auto`,fontSize:`0.875rem`,fontFamily:`monospace`},children:JSON.stringify(s,null,2)})]}),c&&(0,Y.jsxs)(P,{children:[(0,Y.jsx)(N,{title:`Generated Playlist (.nsp)`}),(0,Y.jsx)(o,{multiline:!0,rows:15,value:c,fullWidth:!0,InputProps:{readOnly:!0,sx:{fontFamily:`monospace`,fontSize:`0.875rem`}}}),(0,Y.jsx)(K,{onClick:()=>{if(c){let e=new Blob([c],{type:`text/plain`}),t=URL.createObjectURL(e),r=document.createElement(`a`);r.href=t,r.download=`${n}.nsp`,r.click(),URL.revokeObjectURL(t)}},variant:`contained`,sx:{mt:1.25},children:`Download .nsp File`})]})]})}function Tt(){let{showError:e}=pe(),[t,n]=(0,J.useState)(null),[r,i]=(0,J.useState)(null),[a,o]=(0,J.useState)(!1),[s,c]=(0,J.useState)(null),[l,u]=(0,J.useState)(``),[d,f]=(0,J.useState)(`My Playlist`),[p,m]=(0,J.useState)(``),[h,g]=(0,J.useState)(void 0),[_,v]=(0,J.useState)(``),[y,b]=(0,J.useState)(null),[x,S]=(0,J.useState)(null),[C,w]=(0,J.useState)(!1),[T,E]=(0,J.useState)(null);return{configPreview:t,configText:r,configLoading:a,configError:s,playlistQuery:l,playlistName:d,playlistComment:p,playlistLimit:h,playlistSort:_,playlistPreview:y,playlistContent:x,playlistLoading:C,playlistError:T,loadConfigPreview:async()=>{try{o(!0),c(null),n((await ce()).tags)}catch(e){c(e instanceof Error?e.message:`Failed to load preview`)}finally{o(!1)}},generateConfig:async()=>{try{o(!0),c(null),i((await W()).config)}catch(e){c(e instanceof Error?e.message:`Failed to generate config`)}finally{o(!1)}},previewPlaylist:async e=>{if(e.preventDefault(),l.trim())try{w(!0),E(null),b(await ne(l,10))}catch(e){E(e instanceof Error?e.message:`Failed to preview playlist`)}finally{w(!1)}},generatePlaylist:async()=>{if(!l.trim()){e(`Query is required`);return}if(!d.trim()){e(`Playlist name is required`);return}try{w(!0),E(null),S((await le({query:l,playlist_name:d,comment:p,limit:h,sort:_||void 0})).content)}catch(e){E(e instanceof Error?e.message:`Failed to generate playlist`)}finally{w(!1)}},setPlaylistQuery:u,setPlaylistName:f,setPlaylistComment:m,setPlaylistLimit:g,setPlaylistSort:v}}function Et(){let[e,t]=(0,J.useState)(`config`),{configPreview:n,configText:r,configLoading:i,configError:a,playlistQuery:o,playlistName:s,playlistComment:c,playlistLimit:l,playlistSort:u,playlistPreview:d,playlistContent:f,playlistLoading:p,playlistError:m,loadConfigPreview:h,generateConfig:g,previewPlaylist:_,generatePlaylist:v,setPlaylistQuery:b,setPlaylistName:x,setPlaylistComment:S,setPlaylistLimit:C,setPlaylistSort:w}=Tt();return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(y,{tabs:[{id:`config`,label:`Config Generator`},{id:`playlist`,label:`Playlist Generator`}],activeTab:e,onTabChange:e=>t(e)}),e===`config`&&(0,Y.jsx)(Ct,{preview:n,configText:r,loading:i,error:a,onLoadPreview:h,onGenerateConfig:g}),e===`playlist`&&(0,Y.jsx)(wt,{query:o,name:s,comment:c,limit:l,sort:u,preview:d,content:f,loading:p,error:m,onQueryChange:b,onNameChange:x,onCommentChange:S,onLimitChange:C,onSortChange:w,onPreview:_,onGenerate:v})]})}function Dt(){let[e,t]=(0,J.useState)(`analytics`);return(0,Y.jsxs)(M,{title:`Insights`,children:[(0,Y.jsx)(y,{tabs:[{id:`analytics`,label:`Analytics`},{id:`navidrome`,label:`Navidrome Integration`}],activeTab:e,onTabChange:e=>t(e)}),e===`analytics`&&(0,Y.jsx)(St,{}),e===`navidrome`&&(0,Y.jsx)(Et,{})]})}export{Dt as InsightsPage};