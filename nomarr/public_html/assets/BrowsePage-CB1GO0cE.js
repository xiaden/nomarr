import{t as e}from"./Stack-BSrqgpTo.js";import{f as t,g as n,i as r,l as i,m as a,n as o,p as s,r as c,t as l}from"./TextField-5fBEsa_E.js";import{a as u,i as d,t as f}from"./MenuItem-CAufOGHV.js";import{i as p,n as m,r as h,t as g}from"./ListItemText-C-mgKwr4.js";import{$t as _,D as v,Dt as y,Gt as b,It as x,Kt as S,Mt as C,Nt as w,O as T,Pt as E,Qt as D,Rt as O,Tt as ee,U as k,Ut as A,Vt as j,W as te,Z as M,Zt as N,cn as P,d as F,ft as I,gt as L,hn as R,ht as ne,it as z,k as re,mn as B,mt as V,nn as H,pt as U,qt as ie,rt as W,s as ae,st as G,tt as oe,u as se,ut as ce,zt as le}from"./index-BFv-SGNw.js";var K=R(H()),ue=C((0,K.jsx)(`path`,{d:`M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z`}),`MoreHoriz`),de=O(U,{name:`MuiBreadcrumbCollapsed`})(w(({theme:e})=>({display:`flex`,marginLeft:`calc(${e.spacing(1)} * 0.5)`,marginRight:`calc(${e.spacing(1)} * 0.5)`,...e.palette.mode===`light`?{backgroundColor:e.palette.grey[100],color:e.palette.grey[700]}:{backgroundColor:e.palette.grey[700],color:e.palette.grey[100]},borderRadius:2,"&:hover, &:focus":{...e.palette.mode===`light`?{backgroundColor:e.palette.grey[200]}:{backgroundColor:e.palette.grey[600]}},"&:active":{boxShadow:e.shadows[0],...e.palette.mode===`light`?{backgroundColor:ie(e.palette.grey[200],.12)}:{backgroundColor:ie(e.palette.grey[600],.12)}}}))),fe=O(ue)({width:24,height:16});function pe(e){let{slots:t={},slotProps:n={},...r}=e,i=e;return(0,K.jsx)(`li`,{children:(0,K.jsx)(de,{focusRipple:!0,...r,ownerState:i,children:(0,K.jsx)(fe,{as:t.CollapsedIcon,ownerState:i,...n.collapsedIcon})})})}var me=pe;function he(e){return D(`MuiBreadcrumbs`,e)}var ge=N(`MuiBreadcrumbs`,[`root`,`ol`,`li`,`separator`]),q=R(B()),J=e=>{let{classes:t}=e;return A({root:[`root`],li:[`li`],ol:[`ol`],separator:[`separator`]},he,t)},Y=O(G,{name:`MuiBreadcrumbs`,slot:`Root`,overridesResolver:(e,t)=>[{[`& .${ge.li}`]:t.li},t.root]})({}),X=O(`ol`,{name:`MuiBreadcrumbs`,slot:`Ol`})({display:`flex`,flexWrap:`wrap`,alignItems:`center`,padding:0,margin:0,listStyle:`none`}),_e=O(`li`,{name:`MuiBreadcrumbs`,slot:`Separator`})({display:`flex`,userSelect:`none`,marginLeft:8,marginRight:8});function Z(e,t,n,r){return e.reduce((i,a,o)=>(o<e.length-1?i=i.concat(a,(0,K.jsx)(_e,{"aria-hidden":!0,className:t,ownerState:r,children:n},`separator-${o}`)):i.push(a),i),[])}var ve=q.forwardRef(function(e,t){let n=x({props:e,name:`MuiBreadcrumbs`}),{children:r,className:a,component:o=`nav`,slots:s={},slotProps:c={},expandText:l=`Show path`,itemsAfterCollapse:u=1,itemsBeforeCollapse:d=1,maxItems:f=8,separator:p=`/`,...m}=n,[h,g]=q.useState(!1),v={...n,component:o,expanded:h,expandText:l,itemsAfterCollapse:u,itemsBeforeCollapse:d,maxItems:f,separator:p},y=J(v),b=i({elementType:s.CollapsedIcon,externalSlotProps:c.collapsedIcon,ownerState:v}),S=q.useRef(null),C=e=>{let t=()=>{g(!0);let e=S.current.querySelector(`a[href],button,[tabindex]`);e&&e.focus()};return d+u>=e.length?e:[...e.slice(0,d),(0,K.jsx)(me,{"aria-label":l,slots:{CollapsedIcon:s.CollapsedIcon},slotProps:{collapsedIcon:b},onClick:t},`ellipsis`),...e.slice(e.length-u,e.length)]},w=q.Children.toArray(r).filter(e=>q.isValidElement(e)).map((e,t)=>(0,K.jsx)(`li`,{className:y.li,children:e},`child-${t}`));return(0,K.jsx)(Y,{ref:t,component:o,color:`textSecondary`,className:_(y.root,a),ownerState:v,...m,children:(0,K.jsx)(X,{className:y.ol,ref:S,ownerState:v,children:Z(h||f&&w.length<=f?w:C(w),y.separator,p,v)})})});function ye(e){return D(`MuiLink`,e)}var be=N(`MuiLink`,[`root`,`underlineNone`,`underlineHover`,`underlineAlways`,`button`,`focusVisible`]),xe=({theme:e,ownerState:t})=>{let n=t.color;if(`colorSpace`in e&&e.colorSpace){let r=P(e,`palette.${n}.main`)||P(e,`palette.${n}`)||t.color;return e.alpha(r,.4)}let r=P(e,`palette.${n}.main`,!1)||P(e,`palette.${n}`,!1)||t.color,i=P(e,`palette.${n}.mainChannel`)||P(e,`palette.${n}Channel`);return`vars`in e&&i?`rgba(${i} / 0.4)`:S(r,.4)},Se={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},Ce=e=>{let{classes:t,component:n,focusVisible:r,underline:i}=e;return A({root:[`root`,`underline${E(i)}`,n===`button`&&`button`,r&&`focusVisible`]},ye,t)},we=O(G,{name:`MuiLink`,slot:`Root`,overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,t[`underline${E(n.underline)}`],n.component===`button`&&t.button]}})(w(({theme:e})=>({variants:[{props:{underline:`none`},style:{textDecoration:`none`}},{props:{underline:`hover`},style:{textDecoration:`none`,"&:hover":{textDecoration:`underline`}}},{props:{underline:`always`},style:{textDecoration:`underline`,"&:hover":{textDecorationColor:`inherit`}}},{props:({underline:e,ownerState:t})=>e===`always`&&t.color!==`inherit`,style:{textDecorationColor:`var(--Link-underlineColor)`}},{props:({underline:e,ownerState:t})=>e===`always`&&t.color===`inherit`,style:e.colorSpace?{textDecorationColor:e.alpha(`currentColor`,.4)}:null},...Object.entries(e.palette).filter(I()).map(([t])=>({props:{underline:`always`,color:t},style:{"--Link-underlineColor":e.alpha((e.vars||e).palette[t].main,.4)}})),{props:{underline:`always`,color:`textPrimary`},style:{"--Link-underlineColor":e.alpha((e.vars||e).palette.text.primary,.4)}},{props:{underline:`always`,color:`textSecondary`},style:{"--Link-underlineColor":e.alpha((e.vars||e).palette.text.secondary,.4)}},{props:{underline:`always`,color:`textDisabled`},style:{"--Link-underlineColor":(e.vars||e).palette.text.disabled}},{props:{component:`button`},style:{position:`relative`,WebkitTapHighlightColor:`transparent`,backgroundColor:`transparent`,outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:`pointer`,userSelect:`none`,verticalAlign:`middle`,MozAppearance:`none`,WebkitAppearance:`none`,"&::-moz-focus-inner":{borderStyle:`none`},[`&.${be.focusVisible}`]:{outline:`auto`}}}]}))),Te=q.forwardRef(function(e,t){let n=x({props:e,name:`MuiLink`}),r=j(),{className:i,color:a=`primary`,component:o=`a`,onBlur:s,onFocus:c,TypographyClasses:l,underline:u=`always`,variant:d=`inherit`,sx:f,...p}=n,[m,h]=q.useState(!1),g=e=>{V(e.target)||h(!1),s&&s(e)},v=e=>{V(e.target)&&h(!0),c&&c(e)},y={...n,color:a,component:o,focusVisible:m,underline:u,variant:d};return(0,K.jsx)(we,{color:a,className:_(Ce(y).root,i),classes:l,component:o,onBlur:g,onFocus:v,ref:t,ownerState:y,variant:d,...p,sx:[...Se[a]===void 0?[{color:a}]:[],...Array.isArray(f)?f:[f]],style:{...p.style,...u===`always`&&a!==`inherit`&&!Se[a]&&{"--Link-underlineColor":xe({theme:r,ownerState:y})}}})});const Ee=(e,t)=>{let{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.alignItems===`flex-start`&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters]};var De=e=>{let{alignItems:t,classes:n,dense:r,disabled:i,disableGutters:a,divider:o,selected:s}=e,c=A({root:[`root`,r&&`dense`,!a&&`gutters`,o&&`divider`,i&&`disabled`,t===`flex-start`&&`alignItemsFlexStart`,s&&`selected`]},h,n);return{...n,...c}},Oe=O(U,{shouldForwardProp:e=>le(e)||e===`classes`,name:`MuiListItemButton`,slot:`Root`,overridesResolver:Ee})(w(({theme:e})=>({display:`flex`,flexGrow:1,justifyContent:`flex-start`,alignItems:`center`,position:`relative`,textDecoration:`none`,minWidth:0,boxSizing:`border-box`,textAlign:`left`,paddingTop:8,paddingBottom:8,transition:e.transitions.create(`background-color`,{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:`none`,backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:`transparent`}},[`&.${p.selected}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity),[`&.${p.focusVisible}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.focusOpacity}`)}},[`&.${p.selected}:hover`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity)}},[`&.${p.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${p.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},variants:[{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:`padding-box`}},{props:{alignItems:`flex-start`},style:{alignItems:`flex-start`}},{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.dense,style:{paddingTop:4,paddingBottom:4}}]}))),ke=q.forwardRef(function(e,n){let i=x({props:e,name:`MuiListItemButton`}),{alignItems:a=`center`,autoFocus:o=!1,component:s=`div`,children:c,dense:l=!1,disableGutters:u=!1,divider:d=!1,focusVisibleClassName:f,selected:p=!1,className:m,...h}=i,g=q.useContext(r),v=q.useMemo(()=>({dense:l||g.dense||!1,alignItems:a,disableGutters:u}),[a,g.dense,l,u]),y=q.useRef(null);t(()=>{o&&y.current&&y.current.focus()},[o]);let b={...i,alignItems:a,dense:v.dense,disableGutters:u,divider:d,selected:p},S=De(b),C=ee(y,n);return(0,K.jsx)(r.Provider,{value:v,children:(0,K.jsx)(Oe,{ref:C,href:h.href||h.to,component:(h.href||h.to)&&s===`div`?`button`:s,focusVisibleClassName:_(S.focusVisible,f),ownerState:b,className:_(S.root,m),...h,classes:S,children:c})})}),Ae=e=>{let{alignItems:t,classes:n}=e;return A({root:[`root`,t===`flex-start`&&`alignItemsFlexStart`]},d,n)},je=O(`div`,{name:`MuiListItemIcon`,slot:`Root`,overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,n.alignItems===`flex-start`&&t.alignItemsFlexStart]}})(w(({theme:e})=>({minWidth:56,color:(e.vars||e).palette.action.active,flexShrink:0,display:`inline-flex`,variants:[{props:{alignItems:`flex-start`},style:{marginTop:8}}]}))),Me=q.forwardRef(function(e,t){let n=x({props:e,name:`MuiListItemIcon`}),{className:i,...a}=n,o=q.useContext(r),s={...n,alignItems:o.alignItems};return(0,K.jsx)(je,{className:_(Ae(s).root,i),ownerState:s,ref:t,...a})});function Ne(e){return D(`MuiTab`,e)}var Q=N(`MuiTab`,[`root`,`labelIcon`,`textColorInherit`,`textColorPrimary`,`textColorSecondary`,`selected`,`disabled`,`fullWidth`,`wrapped`,`iconWrapper`,`icon`]),Pe=e=>{let{classes:t,textColor:n,fullWidth:r,wrapped:i,icon:a,label:o,selected:s,disabled:c}=e;return A({root:[`root`,a&&o&&`labelIcon`,`textColor${E(n)}`,r&&`fullWidth`,i&&`wrapped`,s&&`selected`,c&&`disabled`],icon:[`iconWrapper`,`icon`]},Ne,t)},Fe=O(U,{name:`MuiTab`,slot:`Root`,overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,n.label&&n.icon&&t.labelIcon,t[`textColor${E(n.textColor)}`],n.fullWidth&&t.fullWidth,n.wrapped&&t.wrapped,{[`& .${Q.iconWrapper}`]:t.iconWrapper},{[`& .${Q.icon}`]:t.icon}]}})(w(({theme:e})=>({...e.typography.button,maxWidth:360,minWidth:90,position:`relative`,minHeight:48,flexShrink:0,padding:`12px 16px`,overflow:`hidden`,whiteSpace:`normal`,textAlign:`center`,lineHeight:1.25,variants:[{props:({ownerState:e})=>e.label&&(e.iconPosition===`top`||e.iconPosition===`bottom`),style:{flexDirection:`column`}},{props:({ownerState:e})=>e.label&&e.iconPosition!==`top`&&e.iconPosition!==`bottom`,style:{flexDirection:`row`}},{props:({ownerState:e})=>e.icon&&e.label,style:{minHeight:72,paddingTop:9,paddingBottom:9}},{props:({ownerState:e,iconPosition:t})=>e.icon&&e.label&&t===`top`,style:{[`& > .${Q.icon}`]:{marginBottom:6}}},{props:({ownerState:e,iconPosition:t})=>e.icon&&e.label&&t===`bottom`,style:{[`& > .${Q.icon}`]:{marginTop:6}}},{props:({ownerState:e,iconPosition:t})=>e.icon&&e.label&&t===`start`,style:{[`& > .${Q.icon}`]:{marginRight:e.spacing(1)}}},{props:({ownerState:e,iconPosition:t})=>e.icon&&e.label&&t===`end`,style:{[`& > .${Q.icon}`]:{marginLeft:e.spacing(1)}}},{props:{textColor:`inherit`},style:{color:`inherit`,opacity:.6,[`&.${Q.selected}`]:{opacity:1},[`&.${Q.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}}},{props:{textColor:`primary`},style:{color:(e.vars||e).palette.text.secondary,[`&.${Q.selected}`]:{color:(e.vars||e).palette.primary.main},[`&.${Q.disabled}`]:{color:(e.vars||e).palette.text.disabled}}},{props:{textColor:`secondary`},style:{color:(e.vars||e).palette.text.secondary,[`&.${Q.selected}`]:{color:(e.vars||e).palette.secondary.main},[`&.${Q.disabled}`]:{color:(e.vars||e).palette.text.disabled}}},{props:({ownerState:e})=>e.fullWidth,style:{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:`none`}},{props:({ownerState:e})=>e.wrapped,style:{fontSize:e.typography.pxToRem(12)}}]}))),$=q.forwardRef(function(e,t){let n=x({props:e,name:`MuiTab`}),{className:r,disabled:i=!1,disableFocusRipple:a=!1,fullWidth:o,icon:s,iconPosition:c=`top`,indicator:l,label:u,onChange:d,onClick:f,onFocus:p,selected:m,selectionFollowsFocus:h,textColor:g=`inherit`,value:v,wrapped:y=!1,...b}=n,S={...n,disabled:i,disableFocusRipple:a,selected:m,icon:!!s,iconPosition:c,label:!!u,fullWidth:o,textColor:g,wrapped:y},C=Pe(S),w=s&&u&&q.isValidElement(s)?q.cloneElement(s,{className:_(C.icon,s.props.className)}):s,T=e=>{!m&&d&&d(e,v),f&&f(e)},E=e=>{h&&!m&&d&&d(e,v),p&&p(e)};return(0,K.jsxs)(Fe,{focusRipple:!a,className:_(C.root,r),ref:t,role:`tab`,"aria-selected":m,disabled:i,onClick:T,onFocus:E,ownerState:S,tabIndex:m?0:-1,...b,children:[c===`top`||c===`start`?(0,K.jsxs)(q.Fragment,{children:[w,u]}):(0,K.jsxs)(q.Fragment,{children:[u,w]}),l]})}),Ie=C((0,K.jsx)(`path`,{d:`M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z`}),`KeyboardArrowLeft`),Le=C((0,K.jsx)(`path`,{d:`M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z`}),`KeyboardArrowRight`);function Re(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}function ze(e,t,n,r={},i=()=>{}){let{ease:a=Re,duration:o=300}=r,s=null,c=t[e],l=!1,u=()=>{l=!0},d=r=>{if(l){i(Error(`Animation cancelled`));return}s===null&&(s=r);let u=Math.min(1,(r-s)/o);if(t[e]=a(u)*(n-c)+c,u>=1){requestAnimationFrame(()=>{i(null)});return}requestAnimationFrame(d)};return c===n?(i(Error(`Element already at target position`)),u):(requestAnimationFrame(d),u)}var Be={width:99,height:99,position:`absolute`,top:-9999,overflow:`scroll`};function Ve(e){let{onChange:r,...i}=e,a=q.useRef(),o=q.useRef(null),c=()=>{a.current=o.current.offsetHeight-o.current.clientHeight};return t(()=>{let e=n(()=>{let e=a.current;c(),e!==a.current&&r(a.current)}),t=s(o.current);return t.addEventListener(`resize`,e),()=>{e.clear(),t.removeEventListener(`resize`,e)}},[r]),q.useEffect(()=>{c(),r(a.current)},[r]),(0,K.jsx)(`div`,{style:Be,...i,ref:o})}function He(e){return D(`MuiTabScrollButton`,e)}var Ue=N(`MuiTabScrollButton`,[`root`,`vertical`,`horizontal`,`disabled`]),We=e=>{let{classes:t,orientation:n,disabled:r}=e;return A({root:[`root`,n,r&&`disabled`]},He,t)},Ge=O(U,{name:`MuiTabScrollButton`,slot:`Root`,overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,n.orientation&&t[n.orientation]]}})({width:40,flexShrink:0,opacity:.8,[`&.${Ue.disabled}`]:{opacity:0},variants:[{props:{orientation:`vertical`},style:{width:`100%`,height:40,"& svg":{transform:`var(--TabScrollButton-svgRotate)`}}}]}),Ke=q.forwardRef(function(e,t){let n=x({props:e,name:`MuiTabScrollButton`}),{className:r,slots:a={},slotProps:o={},direction:s,orientation:c,disabled:l,...u}=n,d=b(),f={isRtl:d,...n},p=We(f),m=a.StartScrollButtonIcon??Ie,h=a.EndScrollButtonIcon??Le,g=i({elementType:m,externalSlotProps:o.startScrollButtonIcon,additionalProps:{fontSize:`small`},ownerState:f}),v=i({elementType:h,externalSlotProps:o.endScrollButtonIcon,additionalProps:{fontSize:`small`},ownerState:f});return(0,K.jsx)(Ge,{component:`div`,className:_(p.root,r),ref:t,role:null,ownerState:f,tabIndex:null,...u,style:{...u.style,...c===`vertical`&&{"--TabScrollButton-svgRotate":`rotate(${d?-90:90}deg)`}},children:s===`left`?(0,K.jsx)(m,{...g}):(0,K.jsx)(h,{...v})})});function qe(e){return D(`MuiTabs`,e)}var Je=N(`MuiTabs`,[`root`,`vertical`,`list`,`flexContainer`,`flexContainerVertical`,`centered`,`scroller`,`fixed`,`scrollableX`,`scrollableY`,`hideScrollbar`,`scrollButtons`,`scrollButtonsHideMobile`,`indicator`]),Ye=(e,t)=>e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild,Xe=(e,t)=>e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild,Ze=(e,t,n)=>{let r=!1,i=n(e,t);for(;i;){if(i===e.firstChild){if(r)return;r=!0}let t=i.disabled||i.getAttribute(`aria-disabled`)===`true`;if(!i.hasAttribute(`tabindex`)||t)i=n(e,i);else{i.focus();return}}},Qe=e=>{let{vertical:t,fixed:n,hideScrollbar:r,scrollableX:i,scrollableY:a,centered:o,scrollButtonsHideMobile:s,classes:c}=e;return A({root:[`root`,t&&`vertical`],scroller:[`scroller`,n&&`fixed`,r&&`hideScrollbar`,i&&`scrollableX`,a&&`scrollableY`],list:[`list`,`flexContainer`,t&&`flexContainerVertical`,t&&`vertical`,o&&`centered`],indicator:[`indicator`],scrollButtons:[`scrollButtons`,s&&`scrollButtonsHideMobile`],scrollableX:[i&&`scrollableX`],hideScrollbar:[r&&`hideScrollbar`]},qe,c)},$e=O(`div`,{name:`MuiTabs`,slot:`Root`,overridesResolver:(e,t)=>{let{ownerState:n}=e;return[{[`& .${Je.scrollButtons}`]:t.scrollButtons},{[`& .${Je.scrollButtons}`]:n.scrollButtonsHideMobile&&t.scrollButtonsHideMobile},t.root,n.vertical&&t.vertical]}})(w(({theme:e})=>({overflow:`hidden`,minHeight:48,WebkitOverflowScrolling:`touch`,display:`flex`,variants:[{props:({ownerState:e})=>e.vertical,style:{flexDirection:`column`}},{props:({ownerState:e})=>e.scrollButtonsHideMobile,style:{[`& .${Je.scrollButtons}`]:{[e.breakpoints.down(`sm`)]:{display:`none`}}}}]}))),et=O(`div`,{name:`MuiTabs`,slot:`Scroller`,overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.scroller,n.fixed&&t.fixed,n.hideScrollbar&&t.hideScrollbar,n.scrollableX&&t.scrollableX,n.scrollableY&&t.scrollableY]}})({position:`relative`,display:`inline-block`,flex:`1 1 auto`,whiteSpace:`nowrap`,variants:[{props:({ownerState:e})=>e.fixed,style:{overflowX:`hidden`,width:`100%`}},{props:({ownerState:e})=>e.hideScrollbar,style:{scrollbarWidth:`none`,"&::-webkit-scrollbar":{display:`none`}}},{props:({ownerState:e})=>e.scrollableX,style:{overflowX:`auto`,overflowY:`hidden`}},{props:({ownerState:e})=>e.scrollableY,style:{overflowY:`auto`,overflowX:`hidden`}}]}),tt=O(`div`,{name:`MuiTabs`,slot:`List`,overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.list,t.flexContainer,n.vertical&&t.flexContainerVertical,n.centered&&t.centered]}})({display:`flex`,variants:[{props:({ownerState:e})=>e.vertical,style:{flexDirection:`column`}},{props:({ownerState:e})=>e.centered,style:{justifyContent:`center`}}]}),nt=O(`span`,{name:`MuiTabs`,slot:`Indicator`})(w(({theme:e})=>({position:`absolute`,height:2,bottom:0,width:`100%`,transition:e.transitions.create(),variants:[{props:{indicatorColor:`primary`},style:{backgroundColor:(e.vars||e).palette.primary.main}},{props:{indicatorColor:`secondary`},style:{backgroundColor:(e.vars||e).palette.secondary.main}},{props:({ownerState:e})=>e.vertical,style:{height:`100%`,width:2,right:0}}]}))),rt=O(Ve)({overflowX:`auto`,overflowY:`hidden`,scrollbarWidth:`none`,"&::-webkit-scrollbar":{display:`none`}}),it={},at=q.forwardRef(function(e,t){let r=x({props:e,name:`MuiTabs`}),o=j(),c=b(),{"aria-label":l,"aria-labelledby":u,action:d,centered:f=!1,children:p,className:m,component:h=`div`,allowScrollButtonsMobile:g=!1,indicatorColor:v=`primary`,onChange:S,orientation:C=`horizontal`,ScrollButtonComponent:w,scrollButtons:T=`auto`,selectionFollowsFocus:E,slots:D={},slotProps:O={},TabIndicatorProps:ee={},TabScrollButtonProps:k={},textColor:A=`primary`,value:te,variant:M=`standard`,visibleScrollbar:N=!1,...P}=r,F=M===`scrollable`,I=C===`vertical`,R=I?`scrollTop`:`scrollLeft`,ne=I?`top`:`left`,z=I?`bottom`:`right`,re=I?`clientHeight`:`clientWidth`,B=I?`height`:`width`,V={...r,component:h,allowScrollButtonsMobile:g,indicatorColor:v,orientation:C,vertical:I,scrollButtons:T,textColor:A,variant:M,visibleScrollbar:N,fixed:!F,hideScrollbar:F&&!N,scrollableX:F&&!I,scrollableY:F&&I,centered:f&&!F,scrollButtonsHideMobile:!g},H=Qe(V),U=i({elementType:D.StartScrollButtonIcon,externalSlotProps:O.startScrollButtonIcon,ownerState:V}),ie=i({elementType:D.EndScrollButtonIcon,externalSlotProps:O.endScrollButtonIcon,ownerState:V}),[W,ae]=q.useState(!1),[G,se]=q.useState(it),[ce,le]=q.useState(!1),[ue,de]=q.useState(!1),[fe,pe]=q.useState(!1),[me,he]=q.useState({overflow:`hidden`,scrollbarWidth:0}),ge=new Map,J=q.useRef(null),Y=q.useRef(null),X={slots:D,slotProps:{indicator:ee,scrollButton:k,...O}},_e=()=>{let e=J.current,t;if(e){let n=e.getBoundingClientRect();t={clientWidth:e.clientWidth,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop,scrollWidth:e.scrollWidth,top:n.top,bottom:n.bottom,left:n.left,right:n.right}}let n;if(e&&te!==!1){let e=Y.current.children;if(e.length>0){let t=e[ge.get(te)];n=t?t.getBoundingClientRect():null}}return{tabsMeta:t,tabMeta:n}},Z=y(()=>{let{tabsMeta:e,tabMeta:t}=_e(),n=0,r;I?(r=`top`,t&&e&&(n=t.top-e.top+e.scrollTop)):(r=c?`right`:`left`,t&&e&&(n=(c?-1:1)*(t[r]-e[r]+e.scrollLeft)));let i={[r]:n,[B]:t?t[B]:0};if(typeof G[r]!=`number`||typeof G[B]!=`number`)se(i);else{let e=Math.abs(G[r]-i[r]),t=Math.abs(G[B]-i[B]);(e>=1||t>=1)&&se(i)}}),ve=(e,{animation:t=!0}={})=>{t?ze(R,J.current,e,{duration:o.transitions.duration.standard}):J.current[R]=e},ye=e=>{let t=J.current[R];I?t+=e:t+=e*(c?-1:1),ve(t)},be=()=>{let e=J.current[re],t=0,n=Array.from(Y.current.children);for(let r=0;r<n.length;r+=1){let i=n[r];if(t+i[re]>e){r===0&&(t=e);break}t+=i[re]}return t},xe=()=>{ye(-1*be())},Se=()=>{ye(be())},[Ce,{onChange:we,...Te}]=L(`scrollbar`,{className:_(H.scrollableX,H.hideScrollbar),elementType:rt,shouldForwardComponentProp:!0,externalForwardedProps:X,ownerState:V}),Ee=q.useCallback(e=>{we?.(e),he({overflow:null,scrollbarWidth:e})},[we]),[De,Oe]=L(`scrollButtons`,{className:_(H.scrollButtons,k.className),elementType:Ke,externalForwardedProps:X,ownerState:V,additionalProps:{orientation:C,slots:{StartScrollButtonIcon:D.startScrollButtonIcon||D.StartScrollButtonIcon,EndScrollButtonIcon:D.endScrollButtonIcon||D.EndScrollButtonIcon},slotProps:{startScrollButtonIcon:U,endScrollButtonIcon:ie}}}),ke=()=>{let e={};e.scrollbarSizeListener=F?(0,K.jsx)(Ce,{...Te,onChange:Ee}):null;let t=F&&(T===`auto`&&(ce||ue)||T===!0);return e.scrollButtonStart=t?(0,K.jsx)(De,{direction:c?`right`:`left`,onClick:xe,disabled:!ce,...Oe}):null,e.scrollButtonEnd=t?(0,K.jsx)(De,{direction:c?`left`:`right`,onClick:Se,disabled:!ue,...Oe}):null,e},Ae=y(e=>{let{tabsMeta:t,tabMeta:n}=_e();!n||!t||(n[ne]<t[ne]?ve(t[R]+(n[ne]-t[ne]),{animation:e}):n[z]>t[z]&&ve(t[R]+(n[z]-t[z]),{animation:e}))}),je=y(()=>{F&&T!==!1&&pe(!fe)});q.useEffect(()=>{let e=n(()=>{J.current&&Z()}),t,r=n=>{n.forEach(e=>{e.removedNodes.forEach(e=>{t?.unobserve(e)}),e.addedNodes.forEach(e=>{t?.observe(e)})}),e(),je()},i=s(J.current);i.addEventListener(`resize`,e);let a;return typeof ResizeObserver<`u`&&(t=new ResizeObserver(e),Array.from(Y.current.children).forEach(e=>{t.observe(e)})),typeof MutationObserver<`u`&&(a=new MutationObserver(r),a.observe(Y.current,{childList:!0})),()=>{e.clear(),i.removeEventListener(`resize`,e),a?.disconnect(),t?.disconnect()}},[Z,je]),q.useEffect(()=>{let e=Array.from(Y.current.children),t=e.length;if(typeof IntersectionObserver<`u`&&t>0&&F&&T!==!1){let n=e[0],r=e[t-1],i={root:J.current,threshold:.99},a=new IntersectionObserver(e=>{le(!e[0].isIntersecting)},i);a.observe(n);let o=new IntersectionObserver(e=>{de(!e[0].isIntersecting)},i);return o.observe(r),()=>{a.disconnect(),o.disconnect()}}},[F,T,fe,p?.length]),q.useEffect(()=>{ae(!0)},[]),q.useEffect(()=>{Z()}),q.useEffect(()=>{Ae(it!==G)},[Ae,G]),q.useImperativeHandle(d,()=>({updateIndicator:Z,updateScrollButtons:je}),[Z,je]);let[Me,Ne]=L(`indicator`,{className:_(H.indicator,ee.className),elementType:nt,externalForwardedProps:X,ownerState:V,additionalProps:{style:G}}),Q=(0,K.jsx)(Me,{...Ne}),Pe=0,Fe=q.Children.map(p,e=>{if(!q.isValidElement(e))return null;let t=e.props.value===void 0?Pe:e.props.value;ge.set(t,Pe);let n=t===te;return Pe+=1,q.cloneElement(e,{fullWidth:M===`fullWidth`,indicator:n&&!W&&Q,selected:n,selectionFollowsFocus:E,onChange:S,textColor:A,value:t,...Pe===1&&te===!1&&!e.props.tabIndex?{tabIndex:0}:{}})}),$=e=>{if(e.altKey||e.shiftKey||e.ctrlKey||e.metaKey)return;let t=Y.current,n=oe(a(t));if(n?.getAttribute(`role`)!==`tab`)return;let r=C===`horizontal`?`ArrowLeft`:`ArrowUp`,i=C===`horizontal`?`ArrowRight`:`ArrowDown`;switch(C===`horizontal`&&c&&(r=`ArrowRight`,i=`ArrowLeft`),e.key){case r:e.preventDefault(),Ze(t,n,Xe);break;case i:e.preventDefault(),Ze(t,n,Ye);break;case`Home`:e.preventDefault(),Ze(t,null,Ye);break;case`End`:e.preventDefault(),Ze(t,null,Xe);break;default:break}},Ie=ke(),[Le,Re]=L(`root`,{ref:t,className:_(H.root,m),elementType:$e,externalForwardedProps:{...X,...P,component:h},ownerState:V}),[Be,Ve]=L(`scroller`,{ref:J,className:H.scroller,elementType:et,externalForwardedProps:X,ownerState:V,additionalProps:{style:{overflow:me.overflow,[I?`margin${c?`Left`:`Right`}`:`marginBottom`]:N?void 0:-me.scrollbarWidth}}}),[He,Ue]=L(`list`,{ref:Y,className:_(H.list,H.flexContainer),elementType:tt,externalForwardedProps:X,ownerState:V,getSlotProps:e=>({...e,onKeyDown:t=>{$(t),e.onKeyDown?.(t)}})});return(0,K.jsxs)(Le,{...Re,children:[Ie.scrollButtonStart,Ie.scrollbarSizeListener,(0,K.jsxs)(Be,{...Ve,children:[(0,K.jsx)(He,{"aria-label":l,"aria-labelledby":u,"aria-orientation":C===`vertical`?`vertical`:null,role:`tablist`,...Ue,children:Fe}),W&&Q]}),Ie.scrollButtonEnd]})}),ot=C((0,K.jsx)(`path`,{d:`m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z`}),`ArrowForward`),st=C((0,K.jsx)(`path`,{d:`M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm2 11h-3v3.75c0 1.24-1.01 2.25-2.25 2.25S8.5 17.99 8.5 16.75s1.01-2.25 2.25-2.25c.46 0 .89.14 1.25.38V11h4zm-3-4V3.5L18.5 9z`}),`AudioFile`),ct=C((0,K.jsx)(`path`,{d:`M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z`}),`ChevronRight`),lt=C((0,K.jsx)(`path`,{d:`M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12z`}),`Label`),ut=C((0,K.jsx)(`path`,{d:`M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3z`}),`MusicNote`),dt=C((0,K.jsx)(`path`,{d:`M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4`}),`Person`),ft=C((0,K.jsx)(`path`,{d:`M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14`}),`Search`);function pt({tag:t,currentTrackId:n,isNumeric:r}){let[i,a]=(0,q.useState)([]),[s,c]=(0,q.useState)(!1),[d,p]=(0,q.useState)(null),[m,h]=(0,q.useState)(``),[g,_]=(0,q.useState)(`title`),[v,y]=(0,q.useState)(0),b=(0,q.useCallback)(async()=>{try{if(c(!0),p(null),y(0),r){let e=await se({tagKey:t.key,limit:500}),r=parseFloat(t.value);a(e.files.filter(e=>e.file_id!==n).map(e=>{let n=e.tags?.find(e=>e.key===t.key),i=n?parseFloat(n.value):null;return{track:e,value:i,diff:i===null?1/0:Math.abs(i-r)}}).filter(e=>e.value!==null).sort((e,t)=>{if(e.diff!==t.diff)return e.diff-t.diff;let n=(e.track.title||``).localeCompare(t.track.title||``);if(n!==0)return n;let r=(e.track.artist||``).localeCompare(t.track.artist||``);return r===0?e.track.file_id.localeCompare(t.track.file_id):r}))}else a((await se({tagKey:t.key,tagValue:t.value,limit:500})).files.filter(e=>e.file_id!==n).map(e=>({track:e,diff:0})))}catch(e){p(e instanceof Error?e.message:`Failed to load similar tracks`),console.error(`[SimilarTracks] Load error:`,e)}finally{c(!1)}},[t.key,t.value,n,r]);(0,q.useEffect)(()=>{b()},[b]);let x=e=>!e||e<=0?`-`:`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,`0`)}`,S=e=>e.tags?.find(e=>e.key===t.key)?.value||null,{paginatedTracks:C,totalFiltered:w,totalPages:T}=(0,q.useMemo)(()=>{let e=i;if(m.trim()){let t=m.toLowerCase();e=e.filter(({track:e})=>e.title?.toLowerCase().includes(t)||e.artist?.toLowerCase().includes(t)||e.album?.toLowerCase().includes(t))}r||(e=[...e].sort((e,t)=>{switch(g){case`title`:return(e.track.title||``).localeCompare(t.track.title||``);case`artist`:return(e.track.artist||``).localeCompare(t.track.artist||``);case`album`:return(e.track.album||``).localeCompare(t.track.album||``);default:return 0}}));let t=e.length,n=Math.ceil(t/25),a=v*25;return{paginatedTracks:e.slice(a,a+25).map(e=>e.track),totalFiltered:t,totalPages:n}},[i,m,r,g,v]);return(0,q.useEffect)(()=>{y(0)},[m]),(0,K.jsxs)(z,{children:[(0,K.jsxs)(G,{variant:`subtitle2`,gutterBottom:!0,children:[`Similar tracks with `,t.key,r?` (by distance to ${t.value})`:` = "${t.value}"`]}),i.length>0&&(0,K.jsxs)(z,{sx:{mb:2},children:[(0,K.jsxs)(e,{direction:`row`,spacing:1,children:[(0,K.jsx)(l,{placeholder:`Filter similar tracks...`,value:m,onChange:e=>h(e.target.value),size:`small`,fullWidth:!0,InputProps:{endAdornment:(0,K.jsx)(ce,{size:`small`,edge:`end`,children:(0,K.jsx)(ft,{fontSize:`small`})})}}),!r&&(0,K.jsxs)(o,{value:g,onChange:e=>_(e.target.value),size:`small`,sx:{minWidth:130},children:[(0,K.jsx)(f,{value:`title`,children:`Sort by Title`}),(0,K.jsx)(f,{value:`artist`,children:`Sort by Artist`}),(0,K.jsx)(f,{value:`album`,children:`Sort by Album`})]})]}),(0,K.jsxs)(G,{variant:`caption`,color:`text.secondary`,sx:{mt:.5,display:`block`},children:[`Showing `,C.length,` of `,w,` matches`,w!==i.length&&` (${i.length} total)`]})]}),s&&(0,K.jsx)(G,{variant:`body2`,color:`text.secondary`,children:`Loading...`}),d&&(0,K.jsx)(k,{children:d}),!s&&i.length===0&&(0,K.jsx)(G,{variant:`body2`,color:`text.secondary`,children:`No similar tracks found.`}),!s&&i.length>0&&C.length===0&&(0,K.jsxs)(G,{variant:`body2`,color:`text.secondary`,children:[`No tracks matching "`,m,`".`]}),!s&&i.length>0&&C.length>0&&(0,K.jsx)(e,{spacing:1,sx:{mt:2},children:C.map(t=>{let n=S(t);return(0,K.jsx)(z,{sx:{p:1.5,bgcolor:`background.default`,border:1,borderColor:`divider`,borderRadius:1},children:(0,K.jsxs)(e,{direction:`row`,justifyContent:`space-between`,alignItems:`center`,spacing:2,children:[(0,K.jsxs)(z,{sx:{flex:1,minWidth:0},children:[(0,K.jsx)(G,{variant:`body2`,sx:{fontWeight:500},noWrap:!0,children:t.title||`Unknown Title`}),(0,K.jsxs)(G,{variant:`caption`,color:`text.secondary`,noWrap:!0,children:[t.artist&&(0,K.jsx)(`span`,{children:t.artist}),t.album&&(0,K.jsxs)(`span`,{children:[` • `,t.album]}),t.tags?.find(e=>e.key===`genre`)&&(0,K.jsxs)(`span`,{children:[` `,`•`,` `,t.tags.find(e=>e.key===`genre`)?.value]})]})]}),(0,K.jsxs)(e,{direction:`row`,spacing:1,alignItems:`center`,children:[r&&n&&(0,K.jsx)(u,{label:n,size:`small`,sx:{fontSize:`0.7rem`}}),(0,K.jsx)(G,{variant:`caption`,color:`text.disabled`,sx:{minWidth:40,textAlign:`right`},children:x(t.duration_seconds)})]})]})},t.file_id)})}),T>1&&(0,K.jsxs)(e,{direction:`row`,justifyContent:`center`,alignItems:`center`,spacing:2,sx:{mt:2},children:[(0,K.jsx)(W,{size:`small`,variant:`outlined`,onClick:()=>y(Math.max(0,v-1)),disabled:v===0,children:`Previous`}),(0,K.jsxs)(G,{variant:`body2`,color:`text.secondary`,children:[`Page `,v+1,` of `,T]}),(0,K.jsx)(W,{size:`small`,variant:`outlined`,onClick:()=>y(Math.min(T-1,v+1)),disabled:v>=T-1,children:`Next`})]})]})}function mt({track:t}){let[n,r]=(0,q.useState)(null),[i,a]=(0,q.useState)(``),[s,d]=(0,q.useState)(`key`),p=t.tags||[],h=p.filter(e=>e.is_nomarr),_=p.filter(e=>!e.is_nomarr),v=(0,q.useMemo)(()=>{let e=h;if(i.trim()){let t=i.toLowerCase();e=e.filter(e=>e.key.toLowerCase().includes(t)||e.value.toLowerCase().includes(t))}return[...e].sort((e,t)=>s===`key`?e.key.localeCompare(t.key):e.value.localeCompare(t.value))},[h,i,s]),y=(0,q.useMemo)(()=>{let e=_;if(i.trim()){let t=i.toLowerCase();e=e.filter(e=>e.key.toLowerCase().includes(t)||e.value.toLowerCase().includes(t))}return[...e].sort((e,t)=>s===`key`?e.key.localeCompare(t.key):e.value.localeCompare(t.value))},[_,i,s]),b=e=>{r(n?.key===e.key?null:e)},x=e=>e.type===`float`||!isNaN(parseFloat(e.value));return(0,K.jsxs)(z,{children:[(0,K.jsxs)(z,{sx:{mb:2},children:[(0,K.jsx)(G,{variant:`body2`,fontWeight:`bold`,component:`span`,children:`Path:`}),(0,K.jsx)(G,{variant:`body2`,color:`text.secondary`,sx:{mt:.5,fontFamily:`monospace`,wordBreak:`break-all`},children:t.path})]}),p.length>0&&(0,K.jsxs)(e,{direction:`row`,spacing:1,sx:{mb:2},children:[(0,K.jsx)(l,{placeholder:`Filter tags...`,value:i,onChange:e=>a(e.target.value),size:`small`,fullWidth:!0}),(0,K.jsxs)(o,{value:s,onChange:e=>d(e.target.value),size:`small`,sx:{minWidth:130},children:[(0,K.jsx)(f,{value:`key`,children:`Sort by Key`}),(0,K.jsx)(f,{value:`value`,children:`Sort by Value`})]})]}),p.length>0&&(0,K.jsxs)(e,{direction:`row`,spacing:1,sx:{mb:2},children:[(0,K.jsx)(l,{placeholder:`Filter tags...`,value:i,onChange:e=>a(e.target.value),size:`small`,fullWidth:!0}),(0,K.jsxs)(o,{value:s,onChange:e=>d(e.target.value),size:`small`,sx:{minWidth:130},children:[(0,K.jsx)(f,{value:`key`,children:`Sort by Key`}),(0,K.jsx)(f,{value:`value`,children:`Sort by Value`})]})]}),p.length===0&&(0,K.jsx)(G,{variant:`body2`,color:`text.secondary`,children:`No tags available for this track.`}),v.length>0&&(0,K.jsxs)(z,{sx:{mb:2},children:[(0,K.jsx)(G,{variant:`subtitle2`,gutterBottom:!0,children:`Nomarr Tags (Click to explore similar)`}),(0,K.jsx)(c,{dense:!0,children:v.map(t=>(0,K.jsx)(m,{onClick:()=>b(t),sx:{cursor:`pointer`,borderRadius:1,"&:hover":{bgcolor:`action.hover`},bgcolor:n?.key===t.key?`action.selected`:`transparent`},children:(0,K.jsx)(g,{primary:(0,K.jsxs)(e,{direction:`row`,spacing:1,alignItems:`center`,children:[(0,K.jsxs)(G,{variant:`body2`,component:`span`,sx:{fontWeight:500},children:[t.key,`:`]}),(0,K.jsx)(G,{variant:`body2`,component:`span`,children:t.value}),x(t)&&(0,K.jsx)(u,{label:`numeric`,size:`small`,sx:{height:18,fontSize:`0.65rem`}})]})})},t.key))})]}),y.length>0&&(0,K.jsxs)(z,{sx:{mb:2},children:[(0,K.jsx)(G,{variant:`subtitle2`,gutterBottom:!0,children:`Other Tags`}),(0,K.jsx)(c,{dense:!0,children:y.map(e=>(0,K.jsx)(m,{sx:{pl:0},children:(0,K.jsx)(g,{primary:(0,K.jsxs)(G,{variant:`body2`,children:[(0,K.jsxs)(G,{component:`span`,sx:{fontWeight:500,color:`text.secondary`},children:[e.key,`:`]}),` `,e.value]})})},e.key))})]}),n&&(0,K.jsx)(M,{sx:{mt:2},children:(0,K.jsx)(pt,{tag:n,currentTrackId:t.file_id,isNumeric:x(n)})})]})}function ht({entityId:t,entityName:n,collection:r,relationType:i}){let[a,s]=(0,q.useState)([]),[c,d]=(0,q.useState)(!1),[p,m]=(0,q.useState)(null),[h,g]=(0,q.useState)(null),[_,v]=(0,q.useState)(``),[y,b]=(0,q.useState)(`title`),x=(0,q.useCallback)(async()=>{try{d(!0),m(null);let e=await re(r,t,i,{limit:500});if(e.song_ids.length===0){s([]);return}let n=await ae(e.song_ids),a=new Map(n.files.map(e=>[e.file_id,e]));s(e.song_ids.map(e=>a.get(e)).filter(e=>e!==void 0))}catch(e){m(e instanceof Error?e.message:`Failed to load tracks`),console.error(`[TrackList] Load error:`,e)}finally{d(!1)}},[t,r,i]);(0,q.useEffect)(()=>{x()},[x]);let S=(0,q.useMemo)(()=>{let e=a;if(_.trim()){let t=_.toLowerCase();e=e.filter(e=>e.title?.toLowerCase().includes(t)||e.artist?.toLowerCase().includes(t)||e.album?.toLowerCase().includes(t))}return[...e].sort((e,t)=>{switch(y){case`title`:return(e.title||``).localeCompare(t.title||``);case`artist`:return(e.artist||``).localeCompare(t.artist||``);case`album`:return(e.album||``).localeCompare(t.album||``);case`duration`:return(e.duration_seconds||0)-(t.duration_seconds||0);default:return 0}})},[a,_,y]),C=e=>{g(h===e?null:e)},w=e=>!e||e<=0?`-`:`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,`0`)}`;return(0,K.jsxs)(z,{children:[(0,K.jsxs)(M,{sx:{mb:2},children:[(0,K.jsx)(G,{variant:`h6`,gutterBottom:!0,children:n}),(0,K.jsxs)(G,{variant:`body2`,color:`text.secondary`,sx:{mb:1.5},children:[c?`Loading tracks...`:`${a.length} track${a.length===1?``:`s`}`,_&&` (${S.length} matching)`]}),(0,K.jsxs)(e,{direction:`row`,spacing:1,children:[(0,K.jsx)(l,{placeholder:`Filter tracks by title, artist, or album...`,value:_,onChange:e=>v(e.target.value),size:`small`,fullWidth:!0,InputProps:{endAdornment:(0,K.jsx)(ce,{size:`small`,edge:`end`,children:(0,K.jsx)(ft,{fontSize:`small`})})}}),(0,K.jsxs)(o,{value:y,onChange:e=>b(e.target.value),size:`small`,sx:{minWidth:150},children:[(0,K.jsx)(f,{value:`title`,children:`Sort by Title`}),(0,K.jsx)(f,{value:`artist`,children:`Sort by Artist`}),(0,K.jsx)(f,{value:`album`,children:`Sort by Album`}),(0,K.jsx)(f,{value:`duration`,children:`Sort by Duration`})]})]})]}),p&&(0,K.jsx)(k,{children:p}),!c&&S.length===0&&(0,K.jsx)(M,{children:(0,K.jsx)(G,{color:`text.secondary`,textAlign:`center`,children:_?`No tracks matching "${_}".`:`No tracks found for this ${r.slice(0,-1)}.`})}),(0,K.jsx)(e,{spacing:1,children:S.map((e,t)=>(0,K.jsxs)(z,{sx:{bgcolor:`background.paper`,border:1,borderColor:`divider`,borderRadius:1,overflow:`hidden`},children:[(0,K.jsxs)(z,{onClick:()=>C(e.file_id),sx:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,p:1.5,cursor:`pointer`,"&:hover":{bgcolor:`action.hover`}},children:[(0,K.jsxs)(z,{sx:{flex:1,display:`flex`,alignItems:`center`,gap:2},children:[(0,K.jsx)(G,{variant:`body2`,color:`text.disabled`,sx:{minWidth:30,textAlign:`right`},children:t+1}),(0,K.jsxs)(z,{sx:{flex:1},children:[(0,K.jsx)(G,{variant:`body1`,sx:{fontWeight:500},children:e.title||`Unknown Title`}),(0,K.jsxs)(G,{variant:`body2`,color:`text.secondary`,children:[e.artist&&(0,K.jsx)(`span`,{children:e.artist}),e.album&&(0,K.jsxs)(`span`,{children:[` • `,e.album]})]})]}),(0,K.jsx)(G,{variant:`body2`,color:`text.disabled`,children:w(e.duration_seconds)}),e.tagged&&(0,K.jsx)(u,{label:`${e.tags?.length||0} tags`,size:`small`,color:`primary`})]}),(0,K.jsx)(G,{color:`text.disabled`,sx:{ml:1},children:h===e.file_id?`▼`:`▶`})]}),h===e.file_id&&(0,K.jsx)(z,{sx:{p:2,borderTop:1,borderColor:`divider`,bgcolor:`background.default`},children:(0,K.jsx)(mt,{track:e})})]},e.file_id))})]})}function gt({collection:t}){let[n,r]=(0,q.useState)([]),[i,a]=(0,q.useState)(0),[s,u]=(0,q.useState)(!1),[d,p]=(0,q.useState)(null),[m,h]=(0,q.useState)(``),[_,v]=(0,q.useState)(null),[y,b]=(0,q.useState)(0),[x,S]=(0,q.useState)(`name`),C=(0,q.useCallback)(async()=>{try{u(!0),p(null);let e=await T(t,{limit:100,offset:y,search:m||void 0});r([...e.entities].sort((e,t)=>x===`name`?e.display_name.localeCompare(t.display_name):(t.song_count||0)-(e.song_count||0))),a(e.total)}catch(e){p(e instanceof Error?e.message:`Failed to load entities`),console.error(`[EntityBrowser] Load error:`,e)}finally{u(!1)}},[t,y,m,x]);(0,q.useEffect)(()=>{b(0),v(null),h(``)},[t]),(0,q.useEffect)(()=>{C()},[C]);let w=()=>{b(0),v(null),C()},E=e=>{v(e)},D=()=>{b(Math.max(0,y-100))},O=()=>{y+100<i&&b(y+100)},ee=Math.floor(y/100)+1,A=Math.ceil(i/100);return(0,K.jsxs)(z,{sx:{display:`flex`,gap:2,height:`calc(100vh - 250px)`},children:[(0,K.jsxs)(z,{sx:{width:350,display:`flex`,flexDirection:`column`},children:[(0,K.jsxs)(M,{sx:{mb:2},children:[(0,K.jsxs)(e,{direction:`row`,spacing:1,sx:{mb:1},children:[(0,K.jsx)(l,{placeholder:`Search ${t}...`,value:m,onChange:e=>h(e.target.value),onKeyDown:e=>e.key===`Enter`&&w(),size:`small`,fullWidth:!0}),(0,K.jsx)(W,{variant:`contained`,onClick:w,sx:{minWidth:`auto`},children:(0,K.jsx)(ft,{})})]}),(0,K.jsxs)(o,{value:x,onChange:e=>S(e.target.value),size:`small`,fullWidth:!0,children:[(0,K.jsx)(f,{value:`name`,children:`Sort by Name`}),(0,K.jsx)(f,{value:`count`,children:`Sort by Song Count`})]}),(0,K.jsxs)(G,{variant:`body2`,color:`text.secondary`,sx:{mt:1},children:[s?`Loading...`:`${i.toLocaleString()} total`,i>100&&` (Page ${ee} of ${A})`]})]}),d&&(0,K.jsx)(k,{children:d}),(0,K.jsxs)(M,{sx:{flex:1,overflow:`auto`,p:0},children:[n.length===0&&!s&&(0,K.jsx)(z,{sx:{p:2,textAlign:`center`},children:(0,K.jsxs)(G,{color:`text.secondary`,children:[`No `,t,` found.`]})}),(0,K.jsx)(c,{dense:!0,children:n.map(e=>(0,K.jsx)(ke,{selected:_?.entity_id===e.entity_id,onClick:()=>E(e),children:(0,K.jsx)(g,{primary:e.display_name,secondary:e.song_count===void 0?void 0:`${e.song_count} songs`})},e.entity_id))})]}),i>100&&(0,K.jsxs)(z,{sx:{mt:1,display:`flex`,justifyContent:`center`,gap:1},children:[(0,K.jsx)(W,{size:`small`,onClick:D,disabled:y===0,children:`Previous`}),(0,K.jsx)(W,{size:`small`,onClick:O,disabled:y+100>=i,children:`Next`})]})]}),(0,K.jsx)(z,{sx:{flex:1},children:_?(0,K.jsx)(ht,{entityId:_.entity_id,entityName:_.display_name,collection:t,relationType:(()=>{switch(t){case`artists`:return`artist`;case`albums`:return`album`;case`genres`:return`genres`;case`years`:return`year`;default:return t}})()}):(0,K.jsx)(M,{children:(0,K.jsxs)(G,{color:`text.secondary`,textAlign:`center`,children:[`Select `,t===`artists`?`an`:`a`,` `,t.slice(0,-1),` to view tracks`]})})})]})}function _t({items:e}){return e.length===0?null:(0,K.jsx)(z,{sx:{py:1},children:(0,K.jsx)(ve,{separator:(0,K.jsx)(ct,{fontSize:`small`}),maxItems:7,"aria-label":`library navigation`,children:e.map((t,n)=>n===e.length-1?(0,K.jsx)(G,{color:`text.primary`,variant:`body2`,children:t.label},n):(0,K.jsx)(Te,{component:`button`,variant:`body2`,onClick:t.onClick,underline:`hover`,color:`inherit`,sx:{cursor:`pointer`},children:t.label},n))})})}function vt({initialStep:t}){let[n,r]=(0,q.useState)(t??{type:`artists`}),[i,a]=(0,q.useState)([]),[o,s]=(0,q.useState)([]),[l,d]=(0,q.useState)([]),[f,p]=(0,q.useState)([]),[m,h]=(0,q.useState)(!1),[_,y]=(0,q.useState)(null),[b,x]=(0,q.useState)(0),[S,C]=(0,q.useState)(0),w=(0,q.useCallback)(async(e=0)=>{try{h(!0),y(null);let t=await T(`artists`,{limit:50,offset:e});s(t.entities.sort((e,t)=>e.display_name.localeCompare(t.display_name))),x(t.total),C(e)}catch(e){y(e instanceof Error?e.message:`Failed to load artists`)}finally{h(!1)}},[]),E=(0,q.useCallback)(async e=>{try{h(!0),y(null),d((await v(e)).sort((e,t)=>e.display_name.localeCompare(t.display_name)))}catch(e){y(e instanceof Error?e.message:`Failed to load albums`)}finally{h(!1)}},[]),D=(0,q.useCallback)(async e=>{try{h(!0),y(null);let t=await re(`albums`,e,`album`,{limit:500});t.song_ids.length>0?p((await ae(t.song_ids)).files):p([])}catch(e){y(e instanceof Error?e.message:`Failed to load tracks`)}finally{h(!1)}},[]),O=(0,q.useCallback)(async(e,t)=>{try{h(!0),y(null),p((await F({tag_key:e,target_value:t,limit:100})).files)}catch(e){y(e instanceof Error?e.message:`Failed to search by tag`)}finally{h(!1)}},[]);(0,q.useEffect)(()=>{switch(n.type){case`artists`:w(0),a([]);break;case`albums`:E(n.artist.entity_id),a([]);break;case`tracks`:D(n.album.entity_id),a([]);break;case`tags`:break;case`tag-search`:O(n.tagKey,n.targetValue);break}},[n,w,E,D,O]);let ee=e=>{r({type:`albums`,artist:e})},k=e=>{n.type===`albums`&&r({type:`tracks`,artist:n.artist,album:e})},A=e=>{if(n.type===`tracks`)r({type:`tags`,artist:n.artist,album:n.album,track:e});else if(n.type===`tag-search`){let t=e.artist??`Unknown Artist`,n=e.album??`Unknown Album`;r({type:`tags`,artist:{entity_id:``,key:``,display_name:t},album:{entity_id:``,display_name:n},track:e})}},j=e=>{let t=e.value;try{let n=JSON.parse(e.value);Array.isArray(n)&&n.length===1?t=n[0]:(typeof n==`number`||typeof n==`string`)&&(t=n)}catch{}let n={label:`${e.key}: ${typeof t==`number`?t.toFixed(2):t}`,onClick:()=>j(e)},o=[...i,n].slice(-3);a(o),r({type:`tag-search`,tagKey:e.key,targetValue:t,breadcrumb:o})};return(0,K.jsxs)(z,{sx:{height:`100%`,display:`flex`,flexDirection:`column`},children:[(0,K.jsx)(_t,{items:(()=>{let e=[];return e.push({label:`Artists`,onClick:()=>r({type:`artists`})}),(n.type===`albums`||n.type===`tracks`||n.type===`tags`)&&e.push({label:n.artist.display_name,onClick:()=>r({type:`albums`,artist:n.artist})}),(n.type===`tracks`||n.type===`tags`)&&e.push({label:n.album.display_name,onClick:()=>r({type:`tracks`,artist:n.artist,album:n.album})}),n.type===`tags`&&e.push({label:n.track.title??n.track.path.split(`/`).pop()??`Track`,onClick:()=>{}}),n.type===`tag-search`&&e.push(...i),e})()}),(0,K.jsx)(ne,{sx:{flex:1,overflow:`auto`,mt:1},children:(()=>{if(m)return(0,K.jsx)(z,{sx:{p:3,textAlign:`center`},children:(0,K.jsx)(G,{color:`text.secondary`,children:`Loading...`})});if(_)return(0,K.jsx)(z,{sx:{p:3,textAlign:`center`},children:(0,K.jsx)(G,{color:`error`,children:_})});switch(n.type){case`artists`:{let t=Math.floor(S/50)+1,n=Math.ceil(b/50),r=S>0,i=S+50<b;return(0,K.jsxs)(z,{sx:{display:`flex`,flexDirection:`column`,height:`100%`},children:[(0,K.jsxs)(c,{dense:!0,sx:{flex:1,overflow:`auto`},children:[o.map(e=>(0,K.jsxs)(ke,{onClick:()=>ee(e),children:[(0,K.jsx)(Me,{children:(0,K.jsx)(dt,{})}),(0,K.jsx)(g,{primary:e.display_name,secondary:e.song_count?`${e.song_count} songs`:void 0}),(0,K.jsx)(ot,{color:`action`})]},e.entity_id)),o.length===0&&(0,K.jsx)(z,{sx:{p:2,textAlign:`center`},children:(0,K.jsx)(G,{color:`text.secondary`,children:`No artists found`})})]}),b>50&&(0,K.jsxs)(e,{direction:`row`,spacing:2,alignItems:`center`,justifyContent:`center`,sx:{p:1.5,borderTop:1,borderColor:`divider`},children:[(0,K.jsx)(W,{size:`small`,variant:`outlined`,onClick:()=>w(Math.max(0,S-50)),disabled:!r||m,children:`Previous`}),(0,K.jsxs)(G,{variant:`body2`,color:`text.secondary`,children:[`Page `,t,` of `,n]}),(0,K.jsx)(W,{size:`small`,variant:`outlined`,onClick:()=>w(S+50),disabled:!i||m,children:`Next`})]})]})}case`albums`:return(0,K.jsxs)(c,{dense:!0,children:[l.map(e=>(0,K.jsxs)(ke,{onClick:()=>k(e),children:[(0,K.jsx)(Me,{children:(0,K.jsx)(st,{})}),(0,K.jsx)(g,{primary:e.display_name,secondary:e.song_count?`${e.song_count} songs`:void 0}),(0,K.jsx)(ot,{color:`action`})]},e.entity_id)),l.length===0&&(0,K.jsx)(z,{sx:{p:2,textAlign:`center`},children:(0,K.jsx)(G,{color:`text.secondary`,children:`No albums found`})})]});case`tracks`:case`tag-search`:return(0,K.jsxs)(c,{dense:!0,children:[f.map(e=>(0,K.jsxs)(ke,{onClick:()=>A(e),children:[(0,K.jsx)(Me,{children:(0,K.jsx)(ut,{})}),(0,K.jsx)(g,{primary:e.title??e.path.split(`/`).pop(),secondary:n.type===`tag-search`?`${e.artist} - ${e.album}`:e.artist}),(0,K.jsx)(ot,{color:`action`})]},e.file_id)),f.length===0&&(0,K.jsx)(z,{sx:{p:2,textAlign:`center`},children:(0,K.jsx)(G,{color:`text.secondary`,children:`No tracks found`})})]});case`tags`:{let t=n.track.tags.filter(e=>e.is_nomarr),r=n.track.tags.filter(e=>!e.is_nomarr);return(0,K.jsxs)(z,{sx:{p:2},children:[(0,K.jsx)(G,{variant:`h6`,gutterBottom:!0,children:n.track.title??n.track.path.split(`/`).pop()}),(0,K.jsxs)(G,{variant:`body2`,color:`text.secondary`,gutterBottom:!0,children:[n.track.artist,` - `,n.track.album]}),t.length>0&&(0,K.jsxs)(z,{sx:{mt:2},children:[(0,K.jsx)(G,{variant:`subtitle2`,gutterBottom:!0,children:`Nomarr Tags (click to find similar)`}),(0,K.jsx)(e,{direction:`row`,flexWrap:`wrap`,gap:1,children:t.map((e,t)=>{let n=e.value;try{let t=JSON.parse(e.value);n=Array.isArray(t)&&t.length===1?typeof t[0]==`number`?t[0].toFixed(2):String(t[0]):typeof t==`number`?t.toFixed(2):String(t)}catch{}return(0,K.jsx)(u,{icon:(0,K.jsx)(lt,{}),label:`${e.key}: ${n}`,onClick:()=>j(e),variant:`outlined`,color:`primary`,size:`small`,sx:{cursor:`pointer`}},t)})})]}),r.length>0&&(0,K.jsxs)(z,{sx:{mt:2},children:[(0,K.jsx)(G,{variant:`subtitle2`,gutterBottom:!0,children:`Metadata Tags`}),(0,K.jsx)(e,{direction:`row`,flexWrap:`wrap`,gap:1,children:r.slice(0,20).map((e,t)=>{let n=e.value;try{let t=JSON.parse(e.value);Array.isArray(t)&&t.length===1&&(n=String(t[0]))}catch{}return(0,K.jsx)(u,{label:`${e.key}: ${n}`,onClick:()=>j(e),variant:`outlined`,size:`small`,sx:{cursor:`pointer`}},t)})})]})]})}}})()})]})}function yt(){let[e,t]=(0,q.useState)(`library`);return(0,K.jsxs)(te,{title:`Browse Music`,children:[(0,K.jsx)(z,{sx:{borderBottom:1,borderColor:`divider`,mb:2},children:(0,K.jsxs)(at,{value:e,onChange:(e,n)=>t(n),children:[(0,K.jsx)($,{label:`Library`,value:`library`}),(0,K.jsx)($,{label:`Artists`,value:`artists`}),(0,K.jsx)($,{label:`Albums`,value:`albums`}),(0,K.jsx)($,{label:`Genres`,value:`genres`}),(0,K.jsx)($,{label:`Years`,value:`years`})]})}),e===`library`?(0,K.jsx)(z,{sx:{height:`calc(100vh - 200px)`},children:(0,K.jsx)(vt,{})}):(0,K.jsx)(gt,{collection:e})]})}export{yt as BrowsePage};