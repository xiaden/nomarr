import{t as e}from"./Stack-D0tMQXNI.js";import{a as t,c as n,d as r,l as i,n as a,o,s,t as c,u as l}from"./TextField-tWX6VjLG.js";import{t as u}from"./Chip-dVBpIJTy.js";import{t as d}from"./MenuItem-DEUBZNo3.js";import{B as f,Dt as p,E as m,Et as h,Gt as g,Ht as _,It as v,J as y,Kt as b,Lt as x,Nt as S,Ot as C,Pt as w,R as T,St as E,V as D,X as O,Xt as k,_ as A,a as j,b as M,bt as ee,ct as N,dt as P,et as F,f as te,g as I,it as L,jt as R,kt as z,lt as B,m as ne,nt as re,o as ie,on as ae,ot as oe,p as se,pt as V,q as ce,qt as le,rt as ue,sn as de,tt as H,ut as fe,v as pe,vt as U,wt as me,xt as he,y as ge,yt as _e,zt as ve}from"./index-C2lDNvnU.js";import{t as ye}from"./useConfirmDialog-DuvazXlc.js";import{t as be}from"./ServerFilePicker-OfWPC4pZ.js";import{t as xe}from"./useNotification-CqF3XQJI.js";var W=`bottom`,G=`right`,K=`left`,Se=`auto`,Ce=[`top`,W,G,K],we=`start`,Te=`clippingParents`,Ee=`viewport`,De=`popper`,Oe=`reference`,ke=Ce.reduce(function(e,t){return e.concat([t+`-`+we,t+`-end`])},[]),Ae=[].concat(Ce,[Se]).reduce(function(e,t){return e.concat([t,t+`-`+we,t+`-end`])},[]),je=[`beforeRead`,`read`,`afterRead`,`beforeMain`,`main`,`afterMain`,`beforeWrite`,`write`,`afterWrite`];function q(e){return e?(e.nodeName||``).toLowerCase():null}function J(e){if(e==null)return window;if(e.toString()!==`[object Window]`){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Y(e){return e instanceof J(e).Element||e instanceof Element}function X(e){return e instanceof J(e).HTMLElement||e instanceof HTMLElement}function Me(e){return typeof ShadowRoot>`u`?!1:e instanceof J(e).ShadowRoot||e instanceof ShadowRoot}function Ne(e){var t=e.state;Object.keys(t.elements).forEach(function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];!X(i)||!q(i)||(Object.assign(i.style,n),Object.keys(r).forEach(function(e){var t=r[e];t===!1?i.removeAttribute(e):i.setAttribute(e,t===!0?``:t)}))})}function Pe(e){var t=e.state,n={popper:{position:t.options.strategy,left:`0`,top:`0`,margin:`0`},arrow:{position:`absolute`},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(e){var r=t.elements[e],i=t.attributes[e]||{},a=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce(function(e,t){return e[t]=``,e},{});!X(r)||!q(r)||(Object.assign(r.style,a),Object.keys(i).forEach(function(e){r.removeAttribute(e)}))})}}var Fe={name:`applyStyles`,enabled:!0,phase:`write`,fn:Ne,effect:Pe,requires:[`computeStyles`]};function Ie(e){return e.split(`-`)[0]}var Le=Math.max,Re=Math.min,ze=Math.round;function Be(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(e){return e.brand+`/`+e.version}).join(` `):navigator.userAgent}function Ve(){return!/^((?!chrome|android).)*safari/i.test(Be())}function He(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var r=e.getBoundingClientRect(),i=1,a=1;t&&X(e)&&(i=e.offsetWidth>0&&ze(r.width)/e.offsetWidth||1,a=e.offsetHeight>0&&ze(r.height)/e.offsetHeight||1);var o=(Y(e)?J(e):window).visualViewport,s=!Ve()&&n,c=(r.left+(s&&o?o.offsetLeft:0))/i,l=(r.top+(s&&o?o.offsetTop:0))/a,u=r.width/i,d=r.height/a;return{width:u,height:d,top:l,right:c+u,bottom:l+d,left:c,x:c,y:l}}function Ue(e){var t=He(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function We(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Me(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Ge(e){return J(e).getComputedStyle(e)}function Ke(e){return[`table`,`td`,`th`].indexOf(q(e))>=0}function qe(e){return((Y(e)?e.ownerDocument:e.document)||window.document).documentElement}function Je(e){return q(e)===`html`?e:e.assignedSlot||e.parentNode||(Me(e)?e.host:null)||qe(e)}function Ye(e){return!X(e)||Ge(e).position===`fixed`?null:e.offsetParent}function Xe(e){var t=/firefox/i.test(Be());if(/Trident/i.test(Be())&&X(e)&&Ge(e).position===`fixed`)return null;var n=Je(e);for(Me(n)&&(n=n.host);X(n)&&[`html`,`body`].indexOf(q(n))<0;){var r=Ge(n);if(r.transform!==`none`||r.perspective!==`none`||r.contain===`paint`||[`transform`,`perspective`].indexOf(r.willChange)!==-1||t&&r.willChange===`filter`||t&&r.filter&&r.filter!==`none`)return n;n=n.parentNode}return null}function Ze(e){for(var t=J(e),n=Ye(e);n&&Ke(n)&&Ge(n).position===`static`;)n=Ye(n);return n&&(q(n)===`html`||q(n)===`body`&&Ge(n).position===`static`)?t:n||Xe(e)||t}function Qe(e){return[`top`,`bottom`].indexOf(e)>=0?`x`:`y`}function $e(e,t,n){return Le(e,Re(t,n))}function et(e,t,n){var r=$e(e,t,n);return r>n?n:r}function tt(){return{top:0,right:0,bottom:0,left:0}}function nt(e){return Object.assign({},tt(),e)}function rt(e,t){return t.reduce(function(t,n){return t[n]=e,t},{})}var it=function(e,t){return e=typeof e==`function`?e(Object.assign({},t.rects,{placement:t.placement})):e,nt(typeof e==`number`?rt(e,Ce):e)};function at(e){var t,n=e.state,r=e.name,i=e.options,a=n.elements.arrow,o=n.modifiersData.popperOffsets,s=Ie(n.placement),c=Qe(s),l=[`left`,`right`].indexOf(s)>=0?`height`:`width`;if(!(!a||!o)){var u=it(i.padding,n),d=Ue(a),f=c===`y`?`top`:K,p=c===`y`?W:G,m=n.rects.reference[l]+n.rects.reference[c]-o[c]-n.rects.popper[l],h=o[c]-n.rects.reference[c],g=Ze(a),_=g?c===`y`?g.clientHeight||0:g.clientWidth||0:0,v=m/2-h/2,y=u[f],b=_-d[l]-u[p],x=_/2-d[l]/2+v,S=$e(y,x,b),C=c;n.modifiersData[r]=(t={},t[C]=S,t.centerOffset=S-x,t)}}function ot(e){var t=e.state,n=e.options.element,r=n===void 0?`[data-popper-arrow]`:n;r!=null&&(typeof r==`string`&&(r=t.elements.popper.querySelector(r),!r)||We(t.elements.popper,r)&&(t.elements.arrow=r))}var st={name:`arrow`,enabled:!0,phase:`main`,fn:at,effect:ot,requires:[`popperOffsets`],requiresIfExists:[`preventOverflow`]};function ct(e){return e.split(`-`)[1]}var lt={top:`auto`,right:`auto`,bottom:`auto`,left:`auto`};function ut(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:ze(n*i)/i||0,y:ze(r*i)/i||0}}function dt(e){var t,n=e.popper,r=e.popperRect,i=e.placement,a=e.variation,o=e.offsets,s=e.position,c=e.gpuAcceleration,l=e.adaptive,u=e.roundOffsets,d=e.isFixed,f=o.x,p=f===void 0?0:f,m=o.y,h=m===void 0?0:m,g=typeof u==`function`?u({x:p,y:h}):{x:p,y:h};p=g.x,h=g.y;var _=o.hasOwnProperty(`x`),v=o.hasOwnProperty(`y`),y=K,b=`top`,x=window;if(l){var S=Ze(n),C=`clientHeight`,w=`clientWidth`;if(S===J(n)&&(S=qe(n),Ge(S).position!==`static`&&s===`absolute`&&(C=`scrollHeight`,w=`scrollWidth`)),S=S,i===`top`||(i===`left`||i===`right`)&&a===`end`){b=W;var T=d&&S===x&&x.visualViewport?x.visualViewport.height:S[C];h-=T-r.height,h*=c?1:-1}if(i===`left`||(i===`top`||i===`bottom`)&&a===`end`){y=G;var E=d&&S===x&&x.visualViewport?x.visualViewport.width:S[w];p-=E-r.width,p*=c?1:-1}}var D=Object.assign({position:s},l&&lt),O=u===!0?ut({x:p,y:h},J(n)):{x:p,y:h};if(p=O.x,h=O.y,c){var k;return Object.assign({},D,(k={},k[b]=v?`0`:``,k[y]=_?`0`:``,k.transform=(x.devicePixelRatio||1)<=1?`translate(`+p+`px, `+h+`px)`:`translate3d(`+p+`px, `+h+`px, 0)`,k))}return Object.assign({},D,(t={},t[b]=v?h+`px`:``,t[y]=_?p+`px`:``,t.transform=``,t))}function ft(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=r===void 0?!0:r,a=n.adaptive,o=a===void 0?!0:a,s=n.roundOffsets,c=s===void 0?!0:s,l={placement:Ie(t.placement),variation:ct(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy===`fixed`};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,dt(Object.assign({},l,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,dt(Object.assign({},l,{offsets:t.modifiersData.arrow,position:`absolute`,adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var pt={name:`computeStyles`,enabled:!0,phase:`beforeWrite`,fn:ft,data:{}},mt={passive:!0};function ht(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,a=i===void 0?!0:i,o=r.resize,s=o===void 0?!0:o,c=J(t.elements.popper),l=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&l.forEach(function(e){e.addEventListener(`scroll`,n.update,mt)}),s&&c.addEventListener(`resize`,n.update,mt),function(){a&&l.forEach(function(e){e.removeEventListener(`scroll`,n.update,mt)}),s&&c.removeEventListener(`resize`,n.update,mt)}}var gt={name:`eventListeners`,enabled:!0,phase:`write`,fn:function(){},effect:ht,data:{}},_t={left:`right`,right:`left`,bottom:`top`,top:`bottom`};function vt(e){return e.replace(/left|right|bottom|top/g,function(e){return _t[e]})}var yt={start:`end`,end:`start`};function bt(e){return e.replace(/start|end/g,function(e){return yt[e]})}function xt(e){var t=J(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function St(e){return He(qe(e)).left+xt(e).scrollLeft}function Ct(e,t){var n=J(e),r=qe(e),i=n.visualViewport,a=r.clientWidth,o=r.clientHeight,s=0,c=0;if(i){a=i.width,o=i.height;var l=Ve();(l||!l&&t===`fixed`)&&(s=i.offsetLeft,c=i.offsetTop)}return{width:a,height:o,x:s+St(e),y:c}}function wt(e){var t=qe(e),n=xt(e),r=e.ownerDocument?.body,i=Le(t.scrollWidth,t.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),a=Le(t.scrollHeight,t.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),o=-n.scrollLeft+St(e),s=-n.scrollTop;return Ge(r||t).direction===`rtl`&&(o+=Le(t.clientWidth,r?r.clientWidth:0)-i),{width:i,height:a,x:o,y:s}}function Tt(e){var t=Ge(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function Et(e){return[`html`,`body`,`#document`].indexOf(q(e))>=0?e.ownerDocument.body:X(e)&&Tt(e)?e:Et(Je(e))}function Dt(e,t){t===void 0&&(t=[]);var n=Et(e),r=n===e.ownerDocument?.body,i=J(n),a=r?[i].concat(i.visualViewport||[],Tt(n)?n:[]):n,o=t.concat(a);return r?o:o.concat(Dt(Je(a)))}function Ot(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function kt(e,t){var n=He(e,!1,t===`fixed`);return n.top+=e.clientTop,n.left+=e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function At(e,t,n){return t===`viewport`?Ot(Ct(e,n)):Y(t)?kt(t,n):Ot(wt(qe(e)))}function jt(e){var t=Dt(Je(e)),n=[`absolute`,`fixed`].indexOf(Ge(e).position)>=0&&X(e)?Ze(e):e;return Y(n)?t.filter(function(e){return Y(e)&&We(e,n)&&q(e)!==`body`}):[]}function Mt(e,t,n,r){var i=t===`clippingParents`?jt(e):[].concat(t),a=[].concat(i,[n]),o=a[0],s=a.reduce(function(t,n){var i=At(e,n,r);return t.top=Le(i.top,t.top),t.right=Re(i.right,t.right),t.bottom=Re(i.bottom,t.bottom),t.left=Le(i.left,t.left),t},At(e,o,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function Nt(e){var t=e.reference,n=e.element,r=e.placement,i=r?Ie(r):null,a=r?ct(r):null,o=t.x+t.width/2-n.width/2,s=t.y+t.height/2-n.height/2,c;switch(i){case`top`:c={x:o,y:t.y-n.height};break;case W:c={x:o,y:t.y+t.height};break;case G:c={x:t.x+t.width,y:s};break;case K:c={x:t.x-n.width,y:s};break;default:c={x:t.x,y:t.y}}var l=i?Qe(i):null;if(l!=null){var u=l===`y`?`height`:`width`;switch(a){case we:c[l]=c[l]-(t[u]/2-n[u]/2);break;case`end`:c[l]=c[l]+(t[u]/2-n[u]/2);break;default:}}return c}function Pt(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=r===void 0?e.placement:r,a=n.strategy,o=a===void 0?e.strategy:a,s=n.boundary,c=s===void 0?Te:s,l=n.rootBoundary,u=l===void 0?Ee:l,d=n.elementContext,f=d===void 0?De:d,p=n.altBoundary,m=p===void 0?!1:p,h=n.padding,g=h===void 0?0:h,_=nt(typeof g==`number`?rt(g,Ce):g),v=f===`popper`?Oe:De,y=e.rects.popper,b=e.elements[m?v:f],x=Mt(Y(b)?b:b.contextElement||qe(e.elements.popper),c,u,o),S=He(e.elements.reference),C=Nt({reference:S,element:y,strategy:`absolute`,placement:i}),w=Ot(Object.assign({},y,C)),T=f===`popper`?w:S,E={top:x.top-T.top+_.top,bottom:T.bottom-x.bottom+_.bottom,left:x.left-T.left+_.left,right:T.right-x.right+_.right},D=e.modifiersData.offset;if(f===`popper`&&D){var O=D[i];Object.keys(E).forEach(function(e){var t=[`right`,`bottom`].indexOf(e)>=0?1:-1,n=[`top`,`bottom`].indexOf(e)>=0?`y`:`x`;E[e]+=O[n]*t})}return E}function Ft(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=n.boundary,a=n.rootBoundary,o=n.padding,s=n.flipVariations,c=n.allowedAutoPlacements,l=c===void 0?Ae:c,u=ct(r),d=u?s?ke:ke.filter(function(e){return ct(e)===u}):Ce,f=d.filter(function(e){return l.indexOf(e)>=0});f.length===0&&(f=d);var p=f.reduce(function(t,n){return t[n]=Pt(e,{placement:n,boundary:i,rootBoundary:a,padding:o})[Ie(n)],t},{});return Object.keys(p).sort(function(e,t){return p[e]-p[t]})}function It(e){if(Ie(e)===`auto`)return[];var t=vt(e);return[bt(e),t,bt(t)]}function Lt(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,a=i===void 0?!0:i,o=n.altAxis,s=o===void 0?!0:o,c=n.fallbackPlacements,l=n.padding,u=n.boundary,d=n.rootBoundary,f=n.altBoundary,p=n.flipVariations,m=p===void 0?!0:p,h=n.allowedAutoPlacements,g=t.options.placement,_=Ie(g)===g,v=c||(_||!m?[vt(g)]:It(g)),y=[g].concat(v).reduce(function(e,n){return e.concat(Ie(n)===`auto`?Ft(t,{placement:n,boundary:u,rootBoundary:d,padding:l,flipVariations:m,allowedAutoPlacements:h}):n)},[]),b=t.rects.reference,x=t.rects.popper,S=new Map,C=!0,w=y[0],T=0;T<y.length;T++){var E=y[T],D=Ie(E),O=ct(E)===we,k=[`top`,W].indexOf(D)>=0,A=k?`width`:`height`,j=Pt(t,{placement:E,boundary:u,rootBoundary:d,altBoundary:f,padding:l}),M=k?O?G:K:O?W:`top`;b[A]>x[A]&&(M=vt(M));var ee=vt(M),N=[];if(a&&N.push(j[D]<=0),s&&N.push(j[M]<=0,j[ee]<=0),N.every(function(e){return e})){w=E,C=!1;break}S.set(E,N)}if(C)for(var P=m?3:1,F=function(e){var t=y.find(function(t){var n=S.get(t);if(n)return n.slice(0,e).every(function(e){return e})});if(t)return w=t,`break`},te=P;te>0&&F(te)!==`break`;te--);t.placement!==w&&(t.modifiersData[r]._skip=!0,t.placement=w,t.reset=!0)}}var Rt={name:`flip`,enabled:!0,phase:`main`,fn:Lt,requiresIfExists:[`offset`],data:{_skip:!1}};function zt(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Bt(e){return[`top`,G,W,K].some(function(t){return e[t]>=0})}function Vt(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,a=t.modifiersData.preventOverflow,o=Pt(t,{elementContext:`reference`}),s=Pt(t,{altBoundary:!0}),c=zt(o,r),l=zt(s,i,a),u=Bt(c),d=Bt(l);t.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:l,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}var Ht={name:`hide`,enabled:!0,phase:`main`,requiresIfExists:[`preventOverflow`],fn:Vt};function Ut(e,t,n){var r=Ie(e),i=[`left`,`top`].indexOf(r)>=0?-1:1,a=typeof n==`function`?n(Object.assign({},t,{placement:e})):n,o=a[0],s=a[1];return o||=0,s=(s||0)*i,[`left`,`right`].indexOf(r)>=0?{x:s,y:o}:{x:o,y:s}}function Wt(e){var t=e.state,n=e.options,r=e.name,i=n.offset,a=i===void 0?[0,0]:i,o=Ae.reduce(function(e,n){return e[n]=Ut(n,t.rects,a),e},{}),s=o[t.placement],c=s.x,l=s.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=l),t.modifiersData[r]=o}var Gt={name:`offset`,enabled:!0,phase:`main`,requires:[`popperOffsets`],fn:Wt};function Kt(e){var t=e.state,n=e.name;t.modifiersData[n]=Nt({reference:t.rects.reference,element:t.rects.popper,strategy:`absolute`,placement:t.placement})}var qt={name:`popperOffsets`,enabled:!0,phase:`read`,fn:Kt,data:{}};function Jt(e){return e===`x`?`y`:`x`}function Yt(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,a=i===void 0?!0:i,o=n.altAxis,s=o===void 0?!1:o,c=n.boundary,l=n.rootBoundary,u=n.altBoundary,d=n.padding,f=n.tether,p=f===void 0?!0:f,m=n.tetherOffset,h=m===void 0?0:m,g=Pt(t,{boundary:c,rootBoundary:l,padding:d,altBoundary:u}),_=Ie(t.placement),v=ct(t.placement),y=!v,b=Qe(_),x=Jt(b),S=t.modifiersData.popperOffsets,C=t.rects.reference,w=t.rects.popper,T=typeof h==`function`?h(Object.assign({},t.rects,{placement:t.placement})):h,E=typeof T==`number`?{mainAxis:T,altAxis:T}:Object.assign({mainAxis:0,altAxis:0},T),D=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,O={x:0,y:0};if(S){if(a){var k=b===`y`?`top`:K,A=b===`y`?W:G,j=b===`y`?`height`:`width`,M=S[b],ee=M+g[k],N=M-g[A],P=p?-w[j]/2:0,F=v===`start`?C[j]:w[j],te=v===`start`?-w[j]:-C[j],I=t.elements.arrow,L=p&&I?Ue(I):{width:0,height:0},R=t.modifiersData[`arrow#persistent`]?t.modifiersData[`arrow#persistent`].padding:tt(),z=R[k],B=R[A],ne=$e(0,C[j],L[j]),re=y?C[j]/2-P-ne-z-E.mainAxis:F-ne-z-E.mainAxis,ie=y?-C[j]/2+P+ne+B+E.mainAxis:te+ne+B+E.mainAxis,ae=t.elements.arrow&&Ze(t.elements.arrow),oe=ae?b===`y`?ae.clientTop||0:ae.clientLeft||0:0,se=D?.[b]??0,V=M+re-se-oe,ce=M+ie-se,le=$e(p?Re(ee,V):ee,M,p?Le(N,ce):N);S[b]=le,O[b]=le-M}if(s){var ue=b===`x`?`top`:K,de=b===`x`?W:G,H=S[x],fe=x===`y`?`height`:`width`,pe=H+g[ue],U=H-g[de],me=[`top`,K].indexOf(_)!==-1,he=D?.[x]??0,ge=me?pe:H-C[fe]-w[fe]-he+E.altAxis,_e=me?H+C[fe]+w[fe]-he-E.altAxis:U,ve=p&&me?et(ge,H,_e):$e(p?ge:pe,H,p?_e:U);S[x]=ve,O[x]=ve-H}t.modifiersData[r]=O}}var Xt={name:`preventOverflow`,enabled:!0,phase:`main`,fn:Yt,requiresIfExists:[`offset`]};function Zt(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Qt(e){return e===J(e)||!X(e)?xt(e):Zt(e)}function $t(e){var t=e.getBoundingClientRect(),n=ze(t.width)/e.offsetWidth||1,r=ze(t.height)/e.offsetHeight||1;return n!==1||r!==1}function en(e,t,n){n===void 0&&(n=!1);var r=X(t),i=X(t)&&$t(t),a=qe(t),o=He(e,i,n),s={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(r||!r&&!n)&&((q(t)!==`body`||Tt(a))&&(s=Qt(t)),X(t)?(c=He(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):a&&(c.x=St(a))),{x:o.left+s.scrollLeft-c.x,y:o.top+s.scrollTop-c.y,width:o.width,height:o.height}}function tn(e){var t=new Map,n=new Set,r=[];e.forEach(function(e){t.set(e.name,e)});function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach(function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}}),r.push(e)}return e.forEach(function(e){n.has(e.name)||i(e)}),r}function nn(e){var t=tn(e);return je.reduce(function(e,n){return e.concat(t.filter(function(e){return e.phase===n}))},[])}function rn(e){var t;return function(){return t||=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})}),t}}function an(e){var t=e.reduce(function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e},{});return Object.keys(t).map(function(e){return t[e]})}var on={placement:`bottom`,modifiers:[],strategy:`absolute`};function sn(){return![...arguments].some(function(e){return!(e&&typeof e.getBoundingClientRect==`function`)})}function cn(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,i=t.defaultOptions,a=i===void 0?on:i;return function(e,t,n){n===void 0&&(n=a);var i={placement:`bottom`,orderedModifiers:[],options:Object.assign({},on,a),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},o=[],s=!1,c={state:i,setOptions:function(n){var o=typeof n==`function`?n(i.options):n;return u(),i.options=Object.assign({},a,i.options,o),i.scrollParents={reference:Y(e)?Dt(e):e.contextElement?Dt(e.contextElement):[],popper:Dt(t)},i.orderedModifiers=nn(an([].concat(r,i.options.modifiers))).filter(function(e){return e.enabled}),l(),c.update()},forceUpdate:function(){if(!s){var e=i.elements,t=e.reference,n=e.popper;if(sn(t,n)){i.rects={reference:en(t,Ze(n),i.options.strategy===`fixed`),popper:Ue(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach(function(e){return i.modifiersData[e.name]=Object.assign({},e.data)});for(var r=0;r<i.orderedModifiers.length;r++){if(i.reset===!0){i.reset=!1,r=-1;continue}var a=i.orderedModifiers[r],o=a.fn,l=a.options,u=l===void 0?{}:l,d=a.name;typeof o==`function`&&(i=o({state:i,options:u,name:d,instance:c})||i)}}}},update:rn(function(){return new Promise(function(e){c.forceUpdate(),e(i)})}),destroy:function(){u(),s=!0}};if(!sn(e,t))return c;c.setOptions(n).then(function(e){!s&&n.onFirstUpdate&&n.onFirstUpdate(e)});function l(){i.orderedModifiers.forEach(function(e){var t=e.name,n=e.options,r=n===void 0?{}:n,a=e.effect;if(typeof a==`function`){var s=a({state:i,name:t,instance:c,options:r});o.push(s||function(){})}})}function u(){o.forEach(function(e){return e()}),o=[]}return c}}var ln=cn({defaultModifiers:[gt,qt,pt,Fe,Gt,Rt,Xt,st,Ht]});function un(e){return b(`MuiPopper`,e)}g(`MuiPopper`,[`root`]);var Z=de(ae()),Q=de(k());function dn(e,t){if(t===`ltr`)return e;switch(e){case`bottom-end`:return`bottom-start`;case`bottom-start`:return`bottom-end`;case`top-end`:return`top-start`;case`top-start`:return`top-end`;default:return e}}function fn(e){return typeof e==`function`?e():e}function pn(e){return e.nodeType!==void 0}var mn=e=>{let{classes:t}=e;return x({root:[`root`]},un,t)},hn={},gn=Z.forwardRef(function(e,t){let{anchorEl:n,children:r,direction:a,disablePortal:o,modifiers:s,open:c,placement:l,popperOptions:u,popperRef:d,slotProps:f={},slots:p={},TransitionProps:m,ownerState:h,...g}=e,v=Z.useRef(null),y=he(v,t),b=Z.useRef(null),x=he(b,d),S=Z.useRef(x);_(()=>{S.current=x},[x]),Z.useImperativeHandle(d,()=>b.current,[]);let C=dn(l,a),[w,T]=Z.useState(C),[E,D]=Z.useState(fn(n));Z.useEffect(()=>{b.current&&b.current.forceUpdate()}),Z.useEffect(()=>{n&&D(fn(n))},[n]),_(()=>{if(!E||!c)return;let e=e=>{T(e.placement)},t=[{name:`preventOverflow`,options:{altBoundary:o}},{name:`flip`,options:{altBoundary:o}},{name:`onUpdate`,enabled:!0,phase:`afterWrite`,fn:({state:t})=>{e(t)}}];s!=null&&(t=t.concat(s)),u&&u.modifiers!=null&&(t=t.concat(u.modifiers));let n=ln(E,v.current,{placement:C,...u,modifiers:t});return S.current(n),()=>{n.destroy(),S.current(null)}},[E,o,s,c,u,C]);let O={placement:w};m!==null&&(O.TransitionProps=m);let k=mn(e),A=p.root??`div`;return(0,Q.jsx)(A,{...i({elementType:A,externalSlotProps:f.root,externalForwardedProps:g,additionalProps:{role:`tooltip`,ref:y},ownerState:e,className:k.root}),children:typeof r==`function`?r(O):r})}),_n=S(Z.forwardRef(function(e,t){let{anchorEl:n,children:r,container:i,direction:a=`ltr`,disablePortal:o=!1,keepMounted:s=!1,modifiers:c,open:l,placement:u=`bottom`,popperOptions:d=hn,popperRef:f,style:p,transition:m=!1,slotProps:g={},slots:_={},...v}=e,[y,b]=Z.useState(!0),x=()=>{b(!1)},S=()=>{b(!0)};if(!s&&!l&&(!m||y))return null;let C;if(i)C=i;else if(n){let e=fn(n);C=e&&pn(e)?h(e).body:h(null).body}let w=!l&&s&&(!m||y)?`none`:void 0,T=m?{in:l,onEnter:x,onExited:S}:void 0;return(0,Q.jsx)(re,{disablePortal:o,container:C,children:(0,Q.jsx)(gn,{anchorEl:n,direction:a,disablePortal:o,modifiers:c,ref:t,open:m?!y:l,placement:u,popperOptions:d,popperRef:f,slotProps:g,slots:_,...v,style:{position:`fixed`,top:0,left:0,display:w,...p},TransitionProps:T,children:r})})}),{name:`MuiPopper`,slot:`Root`})({}),vn=Z.forwardRef(function(e,t){let n=ve(),{anchorEl:r,component:i,components:a,componentsProps:o,container:s,disablePortal:c,keepMounted:l,modifiers:u,open:d,placement:f,popperOptions:p,popperRef:m,transition:h,slots:g,slotProps:_,...v}=R({props:e,name:`MuiPopper`}),y=g?.root??a?.Root,b={anchorEl:r,container:s,disablePortal:c,keepMounted:l,modifiers:u,open:d,placement:f,popperOptions:p,popperRef:m,transition:h,...v};return(0,Q.jsx)(_n,{as:i,direction:n?`rtl`:`ltr`,slots:{root:y},slotProps:_??o,...b,ref:t})});function yn(e){return b(`PrivateSwitchBase`,e)}g(`PrivateSwitchBase`,[`root`,`checked`,`disabled`,`input`,`edgeStart`,`edgeEnd`]);var bn=e=>{let{classes:t,checked:n,disabled:r,edge:i}=e;return x({root:[`root`,n&&`checked`,r&&`disabled`,i&&`edge${z(i)}`],input:[`input`]},yn,t)},xn=S(fe,{name:`MuiSwitchBase`})({padding:9,borderRadius:`50%`,variants:[{props:{edge:`start`,size:`small`},style:{marginLeft:-3}},{props:({edge:e,ownerState:t})=>e===`start`&&t.size!==`small`,style:{marginLeft:-12}},{props:{edge:`end`,size:`small`},style:{marginRight:-3}},{props:({edge:e,ownerState:t})=>e===`end`&&t.size!==`small`,style:{marginRight:-12}}]}),Sn=S(`input`,{name:`MuiSwitchBase`,shouldForwardProp:w})({cursor:`inherit`,position:`absolute`,opacity:0,width:`100%`,height:`100%`,top:0,left:0,margin:0,padding:0,zIndex:1}),Cn=Z.forwardRef(function(e,t){let{autoFocus:n,checked:i,checkedIcon:a,defaultChecked:o,disabled:c,disableFocusRipple:l=!1,edge:u=!1,icon:d,id:f,inputProps:p,inputRef:m,name:h,onBlur:g,onChange:_,onFocus:v,readOnly:y,required:b=!1,tabIndex:x,type:S,value:C,slots:w={},slotProps:T={},...E}=e,[D,O]=r({controlled:i,default:!!o,name:`SwitchBase`,state:`checked`}),k=s(),A=e=>{v&&v(e),k&&k.onFocus&&k.onFocus(e)},j=e=>{g&&g(e),k&&k.onBlur&&k.onBlur(e)},M=e=>{if(e.nativeEvent.defaultPrevented)return;let t=e.target.checked;O(t),_&&_(e,t)},ee=c;k&&ee===void 0&&(ee=k.disabled);let N=S===`checkbox`||S===`radio`,P={...e,checked:D,disabled:ee,disableFocusRipple:l,edge:u},F=bn(P),te={slots:w,slotProps:{input:p,...T}},[I,L]=V(`root`,{ref:t,elementType:xn,className:F.root,shouldForwardComponentProp:!0,externalForwardedProps:{...te,component:`span`,...E},getSlotProps:e=>({...e,onFocus:t=>{e.onFocus?.(t),A(t)},onBlur:t=>{e.onBlur?.(t),j(t)}}),ownerState:P,additionalProps:{centerRipple:!0,focusRipple:!l,disabled:ee,role:void 0,tabIndex:null}}),[R,z]=V(`input`,{ref:m,elementType:Sn,className:F.input,externalForwardedProps:te,getSlotProps:e=>({...e,onChange:t=>{e.onChange?.(t),M(t)}}),ownerState:P,additionalProps:{autoFocus:n,checked:i,defaultChecked:o,disabled:ee,id:N?f:void 0,name:h,readOnly:y,required:b,tabIndex:x,type:S,...S===`checkbox`&&C===void 0?{}:{value:C}}});return(0,Q.jsxs)(I,{...L,children:[(0,Q.jsx)(R,{...z}),D?a:d]})}),wn=p((0,Q.jsx)(`path`,{d:`M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z`}),`CheckBoxOutlineBlank`),Tn=p((0,Q.jsx)(`path`,{d:`M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z`}),`CheckBox`),En=p((0,Q.jsx)(`path`,{d:`M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z`}),`IndeterminateCheckBox`);function Dn(e){return b(`MuiCheckbox`,e)}var On=g(`MuiCheckbox`,[`root`,`checked`,`disabled`,`indeterminate`,`colorPrimary`,`colorSecondary`,`sizeSmall`,`sizeMedium`]),kn=e=>{let{classes:t,indeterminate:n,color:r,size:i}=e,a=x({root:[`root`,n&&`indeterminate`,`color${z(r)}`,`size${z(i)}`]},Dn,t);return{...t,...a}},An=S(Cn,{shouldForwardProp:e=>w(e)||e===`classes`,name:`MuiCheckbox`,slot:`Root`,overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,n.indeterminate&&t.indeterminate,t[`size${z(n.size)}`],n.color!==`default`&&t[`color${z(n.color)}`]]}})(C(({theme:e})=>({color:(e.vars||e).palette.text.secondary,variants:[{props:{color:`default`,disableRipple:!1},style:{"&:hover":{backgroundColor:e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity)}}},...Object.entries(e.palette).filter(B()).map(([t])=>({props:{color:t,disableRipple:!1},style:{"&:hover":{backgroundColor:e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}}})),...Object.entries(e.palette).filter(B()).map(([t])=>({props:{color:t},style:{[`&.${On.checked}, &.${On.indeterminate}`]:{color:(e.vars||e).palette[t].main},[`&.${On.disabled}`]:{color:(e.vars||e).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:`transparent`}}}}]}))),jn=(0,Q.jsx)(Tn,{}),Mn=(0,Q.jsx)(wn,{}),Nn=(0,Q.jsx)(En,{}),Pn=Z.forwardRef(function(e,t){let n=R({props:e,name:`MuiCheckbox`}),{checkedIcon:r=jn,color:i=`primary`,icon:a=Mn,indeterminate:o=!1,indeterminateIcon:s=Nn,inputProps:c,size:u=`medium`,disableRipple:d=!1,className:f,slots:p={},slotProps:m={},...h}=n,g=o?s:a,_=o?s:r,v={...n,disableRipple:d,color:i,indeterminate:o,size:u},y=kn(v),b=m.input??c,[x,S]=V(`root`,{ref:t,elementType:An,className:le(y.root,f),shouldForwardComponentProp:!0,externalForwardedProps:{slots:p,slotProps:m,...h},ownerState:v,additionalProps:{type:`checkbox`,icon:Z.cloneElement(g,{fontSize:g.props.fontSize??u}),checkedIcon:Z.cloneElement(_,{fontSize:_.props.fontSize??u}),disableRipple:d,slots:p,slotProps:{input:l(typeof b==`function`?b(v):b,{"data-indeterminate":o})}}});return(0,Q.jsx)(x,{...S,classes:y})});function Fn(e){return b(`MuiFormControlLabel`,e)}var In=g(`MuiFormControlLabel`,[`root`,`labelPlacementStart`,`labelPlacementTop`,`labelPlacementBottom`,`disabled`,`label`,`error`,`required`,`asterisk`]),Ln=e=>{let{classes:t,disabled:n,labelPlacement:r,error:i,required:a}=e;return x({root:[`root`,n&&`disabled`,`labelPlacement${z(r)}`,i&&`error`,a&&`required`],label:[`label`,n&&`disabled`],asterisk:[`asterisk`,i&&`error`]},Fn,t)};const Rn=S(`label`,{name:`MuiFormControlLabel`,slot:`Root`,overridesResolver:(e,t)=>{let{ownerState:n}=e;return[{[`& .${In.label}`]:t.label},t.root,t[`labelPlacement${z(n.labelPlacement)}`]]}})(C(({theme:e})=>({display:`inline-flex`,alignItems:`center`,cursor:`pointer`,verticalAlign:`middle`,WebkitTapHighlightColor:`transparent`,marginLeft:-11,marginRight:16,[`&.${In.disabled}`]:{cursor:`default`},[`& .${In.label}`]:{[`&.${In.disabled}`]:{color:(e.vars||e).palette.text.disabled}},variants:[{props:{labelPlacement:`start`},style:{flexDirection:`row-reverse`,marginRight:-11}},{props:{labelPlacement:`top`},style:{flexDirection:`column-reverse`}},{props:{labelPlacement:`bottom`},style:{flexDirection:`column`}},{props:({labelPlacement:e})=>e===`start`||e===`top`||e===`bottom`,style:{marginLeft:16}}]})));var zn=S(`span`,{name:`MuiFormControlLabel`,slot:`Asterisk`})(C(({theme:e})=>({[`&.${In.error}`]:{color:(e.vars||e).palette.error.main}}))),Bn=Z.forwardRef(function(e,t){let r=R({props:e,name:`MuiFormControlLabel`}),{checked:i,className:a,componentsProps:o={},control:c,disabled:l,disableTypography:u,inputRef:d,label:f,labelPlacement:p=`end`,name:m,onChange:h,required:g,slots:_={},slotProps:v={},value:y,...b}=r,x=s(),S=l??c.props.disabled??x?.disabled,C=g??c.props.required,w={disabled:S,required:C};[`checked`,`name`,`onChange`,`value`,`inputRef`].forEach(e=>{c.props[e]===void 0&&r[e]!==void 0&&(w[e]=r[e])});let T=n({props:r,muiFormControl:x,states:[`error`]}),E={...r,disabled:S,labelPlacement:p,required:C,error:T.error},D=Ln(E),[O,k]=V(`typography`,{elementType:L,externalForwardedProps:{slots:_,slotProps:{...o,...v}},ownerState:E}),A=f;return A!=null&&A.type!==L&&!u&&(A=(0,Q.jsx)(O,{component:`span`,...k,className:le(D.label,k?.className),children:A})),(0,Q.jsxs)(Rn,{className:le(D.root,a),ownerState:E,ref:t,...b,children:[Z.cloneElement(c,w),C?(0,Q.jsxs)(`div`,{children:[A,(0,Q.jsxs)(zn,{ownerState:E,"aria-hidden":!0,className:D.asterisk,children:[` `,`*`]})]}):A]})});function Vn(e){return b(`MuiTooltip`,e)}var $=g(`MuiTooltip`,[`popper`,`popperInteractive`,`popperArrow`,`popperClose`,`tooltip`,`tooltipArrow`,`touch`,`tooltipPlacementLeft`,`tooltipPlacementRight`,`tooltipPlacementTop`,`tooltipPlacementBottom`,`arrow`]);function Hn(e){return Math.round(e*1e5)/1e5}var Un=e=>{let{classes:t,disableInteractive:n,arrow:r,touch:i,placement:a}=e;return x({popper:[`popper`,!n&&`popperInteractive`,r&&`popperArrow`],tooltip:[`tooltip`,r&&`tooltipArrow`,i&&`touch`,`tooltipPlacement${z(a.split(`-`)[0])}`],arrow:[`arrow`]},Vn,t)},Wn=S(vn,{name:`MuiTooltip`,slot:`Popper`,overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.popper,!n.disableInteractive&&t.popperInteractive,n.arrow&&t.popperArrow,!n.open&&t.popperClose]}})(C(({theme:e})=>({zIndex:(e.vars||e).zIndex.tooltip,pointerEvents:`none`,variants:[{props:({ownerState:e})=>!e.disableInteractive,style:{pointerEvents:`auto`}},{props:({open:e})=>!e,style:{pointerEvents:`none`}},{props:({ownerState:e})=>e.arrow,style:{[`&[data-popper-placement*="bottom"] .${$.arrow}`]:{top:0,marginTop:`-0.71em`,"&::before":{transformOrigin:`0 100%`}},[`&[data-popper-placement*="top"] .${$.arrow}`]:{bottom:0,marginBottom:`-0.71em`,"&::before":{transformOrigin:`100% 0`}},[`&[data-popper-placement*="right"] .${$.arrow}`]:{height:`1em`,width:`0.71em`,"&::before":{transformOrigin:`100% 100%`}},[`&[data-popper-placement*="left"] .${$.arrow}`]:{height:`1em`,width:`0.71em`,"&::before":{transformOrigin:`0 0`}}}},{props:({ownerState:e})=>e.arrow&&!e.isRtl,style:{[`&[data-popper-placement*="right"] .${$.arrow}`]:{left:0,marginLeft:`-0.71em`}}},{props:({ownerState:e})=>e.arrow&&!!e.isRtl,style:{[`&[data-popper-placement*="right"] .${$.arrow}`]:{right:0,marginRight:`-0.71em`}}},{props:({ownerState:e})=>e.arrow&&!e.isRtl,style:{[`&[data-popper-placement*="left"] .${$.arrow}`]:{right:0,marginRight:`-0.71em`}}},{props:({ownerState:e})=>e.arrow&&!!e.isRtl,style:{[`&[data-popper-placement*="left"] .${$.arrow}`]:{left:0,marginLeft:`-0.71em`}}}]}))),Gn=S(`div`,{name:`MuiTooltip`,slot:`Tooltip`,overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.tooltip,n.touch&&t.touch,n.arrow&&t.tooltipArrow,t[`tooltipPlacement${z(n.placement.split(`-`)[0])}`]]}})(C(({theme:e})=>({backgroundColor:e.vars?e.vars.palette.Tooltip.bg:e.alpha(e.palette.grey[700],.92),borderRadius:(e.vars||e).shape.borderRadius,color:(e.vars||e).palette.common.white,fontFamily:e.typography.fontFamily,padding:`4px 8px`,fontSize:e.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:`break-word`,fontWeight:e.typography.fontWeightMedium,[`.${$.popper}[data-popper-placement*="left"] &`]:{transformOrigin:`right center`},[`.${$.popper}[data-popper-placement*="right"] &`]:{transformOrigin:`left center`},[`.${$.popper}[data-popper-placement*="top"] &`]:{transformOrigin:`center bottom`,marginBottom:`14px`},[`.${$.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:`center top`,marginTop:`14px`},variants:[{props:({ownerState:e})=>e.arrow,style:{position:`relative`,margin:0}},{props:({ownerState:e})=>e.touch,style:{padding:`8px 16px`,fontSize:e.typography.pxToRem(14),lineHeight:`${Hn(16/14)}em`,fontWeight:e.typography.fontWeightRegular}},{props:({ownerState:e})=>!e.isRtl,style:{[`.${$.popper}[data-popper-placement*="left"] &`]:{marginRight:`14px`},[`.${$.popper}[data-popper-placement*="right"] &`]:{marginLeft:`14px`}}},{props:({ownerState:e})=>!e.isRtl&&e.touch,style:{[`.${$.popper}[data-popper-placement*="left"] &`]:{marginRight:`24px`},[`.${$.popper}[data-popper-placement*="right"] &`]:{marginLeft:`24px`}}},{props:({ownerState:e})=>!!e.isRtl,style:{[`.${$.popper}[data-popper-placement*="left"] &`]:{marginLeft:`14px`},[`.${$.popper}[data-popper-placement*="right"] &`]:{marginRight:`14px`}}},{props:({ownerState:e})=>!!e.isRtl&&e.touch,style:{[`.${$.popper}[data-popper-placement*="left"] &`]:{marginLeft:`24px`},[`.${$.popper}[data-popper-placement*="right"] &`]:{marginRight:`24px`}}},{props:({ownerState:e})=>e.touch,style:{[`.${$.popper}[data-popper-placement*="top"] &`]:{marginBottom:`24px`}}},{props:({ownerState:e})=>e.touch,style:{[`.${$.popper}[data-popper-placement*="bottom"] &`]:{marginTop:`24px`}}}]}))),Kn=S(`span`,{name:`MuiTooltip`,slot:`Arrow`})(C(({theme:e})=>({overflow:`hidden`,position:`absolute`,width:`1em`,height:`0.71em`,boxSizing:`border-box`,color:e.vars?e.vars.palette.Tooltip.bg:e.alpha(e.palette.grey[700],.9),"&::before":{content:`""`,margin:`auto`,display:`block`,width:`100%`,height:`100%`,backgroundColor:`currentColor`,transform:`rotate(45deg)`}}))),qn=!1,Jn=new U,Yn={x:0,y:0};function Xn(e,t){return(n,...r)=>{t&&t(n,...r),e(n,...r)}}var Zn=Z.forwardRef(function(e,t){let n=R({props:e,name:`MuiTooltip`}),{arrow:i=!1,children:a,classes:o,components:s={},componentsProps:c={},describeChild:l=!1,disableFocusListener:u=!1,disableHoverListener:d=!1,disableInteractive:f=!1,disableTouchListener:p=!1,enterDelay:m=100,enterNextDelay:h=0,enterTouchDelay:g=700,followCursor:_=!1,id:y,leaveDelay:b=0,leaveTouchDelay:x=1500,onClose:S,onOpen:C,open:w,placement:T=`bottom`,PopperComponent:D,PopperProps:k={},slotProps:A={},slots:j={},title:M,TransitionComponent:N,TransitionProps:F,...te}=n,I=Z.isValidElement(a)?a:(0,Q.jsx)(`span`,{children:a}),L=v(),z=ve(),[B,ne]=Z.useState(),[re,ie]=Z.useState(null),ae=Z.useRef(!1),oe=f||_,se=_e(),ce=_e(),de=_e(),H=_e(),[fe,pe]=r({controlled:w,default:!1,name:`Tooltip`,state:`open`}),U=fe,he=me(y),ge=Z.useRef(),ye=E(()=>{ge.current!==void 0&&(document.body.style.WebkitUserSelect=ge.current,ge.current=void 0),H.clear()});Z.useEffect(()=>ye,[ye]);let be=e=>{Jn.clear(),qn=!0,pe(!0),C&&!U&&C(e)},xe=E(e=>{Jn.start(800+b,()=>{qn=!1}),pe(!1),S&&U&&S(e),se.start(L.transitions.duration.shortest,()=>{ae.current=!1})}),W=e=>{ae.current&&e.type!==`touchstart`||(B&&B.removeAttribute(`title`),ce.clear(),de.clear(),m||qn&&h?ce.start(qn?h:m,()=>{be(e)}):be(e))},G=e=>{ce.clear(),de.start(b,()=>{xe(e)})},[,K]=Z.useState(!1),Se=e=>{P(e.target)||(K(!1),G(e))},Ce=e=>{B||ne(e.currentTarget),P(e.target)&&(K(!0),W(e))},we=e=>{ae.current=!0;let t=I.props;t.onTouchStart&&t.onTouchStart(e)},Te=e=>{we(e),de.clear(),se.clear(),ye(),ge.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect=`none`,H.start(g,()=>{document.body.style.WebkitUserSelect=ge.current,W(e)})},Ee=e=>{I.props.onTouchEnd&&I.props.onTouchEnd(e),ye(),de.start(x,()=>{xe(e)})};Z.useEffect(()=>{if(!U)return;function e(e){e.key===`Escape`&&xe(e)}return document.addEventListener(`keydown`,e),()=>{document.removeEventListener(`keydown`,e)}},[xe,U]);let De=ee(ue(I),ne,t);!M&&M!==0&&(U=!1);let Oe=Z.useRef(),ke=e=>{let t=I.props;t.onMouseMove&&t.onMouseMove(e),Yn={x:e.clientX,y:e.clientY},Oe.current&&Oe.current.update()},Ae={},je=typeof M==`string`;l?(Ae.title=!U&&je&&!d?M:null,Ae[`aria-describedby`]=U?he:null):(Ae[`aria-label`]=je?M:null,Ae[`aria-labelledby`]=U&&!je?he:null);let q={...Ae,...te,...I.props,className:le(te.className,I.props.className),onTouchStart:we,ref:De,..._?{onMouseMove:ke}:{}},J={};p||(q.onTouchStart=Te,q.onTouchEnd=Ee),d||(q.onMouseOver=Xn(W,q.onMouseOver),q.onMouseLeave=Xn(G,q.onMouseLeave),oe||(J.onMouseOver=W,J.onMouseLeave=G)),u||(q.onFocus=Xn(Ce,q.onFocus),q.onBlur=Xn(Se,q.onBlur),oe||(J.onFocus=Ce,J.onBlur=Se));let Y={...n,isRtl:z,arrow:i,disableInteractive:oe,placement:T,PopperComponentProp:D,touch:ae.current},X=typeof A.popper==`function`?A.popper(Y):A.popper,Me=Z.useMemo(()=>{let e=[{name:`arrow`,enabled:!!re,options:{element:re,padding:4}}];return k.popperOptions?.modifiers&&(e=e.concat(k.popperOptions.modifiers)),X?.popperOptions?.modifiers&&(e=e.concat(X.popperOptions.modifiers)),{...k.popperOptions,...X?.popperOptions,modifiers:e}},[re,k.popperOptions,X?.popperOptions]),Ne=Un(Y),Pe=typeof A.transition==`function`?A.transition(Y):A.transition,Fe={slots:{popper:s.Popper,transition:s.Transition??N,tooltip:s.Tooltip,arrow:s.Arrow,...j},slotProps:{arrow:A.arrow??c.arrow,popper:{...k,...X??c.popper},tooltip:A.tooltip??c.tooltip,transition:{...F,...Pe??c.transition}}},[Ie,Le]=V(`popper`,{elementType:Wn,externalForwardedProps:Fe,ownerState:Y,className:le(Ne.popper,k?.className)}),[Re,ze]=V(`transition`,{elementType:O,externalForwardedProps:Fe,ownerState:Y}),[Be,Ve]=V(`tooltip`,{elementType:Gn,className:Ne.tooltip,externalForwardedProps:Fe,ownerState:Y}),[He,Ue]=V(`arrow`,{elementType:Kn,className:Ne.arrow,externalForwardedProps:Fe,ownerState:Y,ref:ie});return(0,Q.jsxs)(Z.Fragment,{children:[Z.cloneElement(I,q),(0,Q.jsx)(Ie,{as:D??vn,placement:T,anchorEl:_?{getBoundingClientRect:()=>({top:Yn.y,left:Yn.x,right:Yn.x,bottom:Yn.y,width:0,height:0})}:B,popperRef:Oe,open:B?U:!1,id:he,transition:!0,...J,...Le,popperOptions:Me,children:({TransitionProps:e})=>(0,Q.jsx)(Re,{timeout:L.transitions.duration.shorter,...e,...ze,children:(0,Q.jsxs)(Be,{...Ve,children:[M,i?(0,Q.jsx)(He,{...Ue}):null]})})})]})});function Qn(){let{showSuccess:n}=xe(),{confirm:r,isOpen:i,options:s,handleConfirm:l,handleCancel:p}=ye(),[h,g]=(0,Z.useState)([]),[_,v]=(0,Z.useState)(!0),[b,x]=(0,Z.useState)(null),[S,C]=(0,Z.useState)(!1),[w,E]=(0,Z.useState)(null),[D,O]=(0,Z.useState)(null),[k,ee]=(0,Z.useState)(null),[N,P]=(0,Z.useState)(``),[R,z]=(0,Z.useState)(``),[B,re]=(0,Z.useState)(!0),[ie,ae]=(0,Z.useState)(`off`),[oe,V]=(0,Z.useState)(`full`),[le,ue]=(0,Z.useState)(!1),[de,fe]=(0,Z.useState)(null),[U,me]=(0,Z.useState)({}),[he,_e]=(0,Z.useState)(`full`),ve=(0,Z.useCallback)(async()=>{try{v(!0),x(null),g(await I())}catch(e){x(e instanceof Error?e.message:`Failed to load libraries`),console.error(`[LibraryManagement] Load error:`,e)}finally{v(!1)}},[]),W=(0,Z.useCallback)(async()=>{try{let e=await I();g(t=>{if(t.length!==e.length)return e;let n=new Map(e.map(e=>[e.library_id,e])),r=!1;for(let e of t){let t=n.get(e.library_id);if(!t){r=!0;break}if(e.scanStatus!==t.scanStatus||e.scanProgress!==t.scanProgress||e.scanTotal!==t.scanTotal||e.scanError!==t.scanError||e.scannedAt!==t.scannedAt||e.fileCount!==t.fileCount||e.folderCount!==t.folderCount){r=!0;break}}return r?t.map(e=>{let t=n.get(e.library_id);return!t||e.scanStatus===t.scanStatus&&e.scanProgress===t.scanProgress&&e.scanTotal===t.scanTotal&&e.scanError===t.scanError&&e.scannedAt===t.scannedAt&&e.fileCount===t.fileCount&&e.folderCount===t.folderCount?e:t}):t})}catch(e){console.error(`[LibraryManagement] Refresh error:`,e)}},[]),G=async()=>{try{ee((await j()).library_root||null)}catch(e){console.error(`[LibraryManagement] Failed to load config:`,e)}};(0,Z.useEffect)(()=>{ve(),G()},[ve]),(0,Z.useEffect)(()=>{let e=!0,t=null,n=async()=>{try{let n=await m();if(!e)return;n.is_busy?t||=setInterval(()=>{W()},500):t&&(clearInterval(t),t=null,W())}catch(e){console.error(`[LibraryManagement] Failed to check work status:`,e)}};n();let r=setInterval(n,5e3);return()=>{e=!1,t&&clearInterval(t),clearInterval(r)}},[W]);let K=e=>{if(!k)return!1;let t=k.replace(/\/+$/,``);return!e.replace(/\/+$/,``).startsWith(t)},Se=()=>{P(``),z(``),re(!0),ae(`off`),V(`full`),_e(`full`),ue(!1),C(!1),E(null)},Ce=()=>{Se(),C(!0)},we=e=>{P(e.name),z(e.rootPath),re(e.isEnabled),ae(e.watchMode),V(e.fileWriteMode),_e(e.fileWriteMode),E(e.library_id),C(!1)},Te=async()=>{if(!R.trim()){x(`Path is required`);return}try{x(null),await te({name:N.trim()||null,rootPath:R,isEnabled:B,watchMode:ie,fileWriteMode:oe}),await ve(),Se()}catch(e){x(e instanceof Error?e.message:`Failed to create library`)}},Ee=async()=>{if(w===null)return;if(!R.trim()){x(`Path is required`);return}let e=oe!==he;try{if(x(null),await ge(w,{name:N.trim()||void 0,rootPath:R,isEnabled:B,watchMode:ie,...e?{}:{fileWriteMode:oe}}),e){let e=await M(w,oe);e.requires_reconciliation&&e.affected_file_count>0&&await r({title:`Reconcile Tags?`,message:`${e.affected_file_count} files need to be rewritten with the new tag format. Reconcile now?`,severity:`info`})&&await Y(w)}await ve(),Se()}catch(e){x(e instanceof Error?e.message:`Failed to update library`)}},De=async(e,t)=>{try{x(null),O(e);let r=await pe(e,t);n(r.message||`Library scan started (${r.stats?.files_queued??0} files)`),await ve()}catch(e){x(e instanceof Error?e.message:`Failed to scan library`)}finally{O(null)}},Oe=async(e,t)=>{if(await r({title:`Delete Library?`,message:`Delete library "${t}"?\n\nThis will remove the library entry but will NOT delete files on disk.`,severity:`warning`}))try{x(null),await se(e),await ve()}catch(e){x(e instanceof Error?e.message:`Failed to delete library`)}},ke=async(e,t)=>{try{x(null),await ge(e,{watchMode:t}),await ve(),n(`File watching mode changed to ${t}`)}catch(e){x(e instanceof Error?e.message:`Failed to change watch mode`)}},Ae=e=>{switch(e){case`event`:return`Event`;case`poll`:return`Poll`;default:return`Off`}},je=e=>{switch(e){case`event`:return`success`;case`poll`:return`warning`;default:return`default`}},q=e=>{switch(e){case`none`:return`None`;case`minimal`:return`Minimal`;case`full`:return`Full`}},J=e=>{switch(e){case`none`:return`default`;case`minimal`:return`secondary`;case`full`:return`primary`}},Y=async e=>{try{x(null),fe(e);let t=await A(e);n(`Reconciled ${t.processed} files (${t.remaining} remaining, ${t.failed} failed)`);let r=await ne(e);me(t=>({...t,[e]:{pending:r.pending_count,inProgress:r.in_progress}}))}catch(e){x(e instanceof Error?e.message:`Failed to reconcile tags`)}finally{fe(null)}},X=async e=>{try{let t=await ne(e);me(n=>({...n,[e]:{pending:t.pending_count,inProgress:t.in_progress}}))}catch{}},Me=S||w!==null;return(0,Q.jsxs)(e,{spacing:2.5,children:[(0,Q.jsxs)(e,{direction:`row`,justifyContent:`space-between`,alignItems:`center`,children:[(0,Q.jsx)(L,{variant:`h5`,children:`Libraries`}),!Me&&(0,Q.jsx)(F,{variant:`contained`,onClick:Ce,children:`+ Add Library`})]}),b&&(0,Q.jsx)(f,{children:b}),Me&&(0,Q.jsxs)(y,{children:[(0,Q.jsx)(ce,{title:S?`Create Library`:`Edit Library`}),(0,Q.jsxs)(e,{spacing:2,children:[(0,Q.jsxs)(H,{children:[(0,Q.jsx)(L,{variant:`body2`,color:`text.secondary`,sx:{mb:.5},children:`Name (optional)`}),(0,Q.jsx)(c,{value:N,onChange:e=>P(e.target.value),placeholder:`Auto-generated from path if left empty`,fullWidth:!0})]}),(0,Q.jsxs)(H,{children:[(0,Q.jsx)(L,{variant:`body2`,color:`text.secondary`,sx:{mb:.5},children:`Root Path`}),(0,Q.jsxs)(e,{direction:`row`,spacing:1.25,children:[(0,Q.jsx)(c,{value:R,onChange:e=>z(e.target.value),placeholder:`/music`,fullWidth:!0}),(0,Q.jsx)(F,{variant:`outlined`,onClick:()=>ue(!le),sx:{minWidth:120},children:le?`Hide Picker`:`Browse...`})]}),le&&(0,Q.jsx)(H,{sx:{mt:1.25,p:2,bgcolor:`background.default`,borderRadius:1,border:1,borderColor:`divider`},children:(0,Q.jsx)(be,{value:R,onChange:e=>{z(e),ue(!1)},mode:`directory`,label:`Select Library Root Directory`})})]}),(0,Q.jsx)(Bn,{control:(0,Q.jsx)(Pn,{checked:B,onChange:e=>re(e.target.checked)}),label:`Enabled`}),(0,Q.jsx)(H,{children:(0,Q.jsxs)(o,{fullWidth:!0,children:[(0,Q.jsx)(t,{id:`watch-mode-label`,children:`File Watching`}),(0,Q.jsxs)(a,{labelId:`watch-mode-label`,value:ie,label:`File Watching`,onChange:e=>ae(e.target.value),children:[(0,Q.jsx)(d,{value:`off`,children:(0,Q.jsxs)(e,{children:[(0,Q.jsxs)(L,{children:[(0,Q.jsx)(`strong`,{children:`Off`}),` - No automatic scanning`]}),(0,Q.jsx)(L,{variant:`caption`,color:`text.secondary`,children:`Manual scans only`})]})}),(0,Q.jsx)(d,{value:`event`,children:(0,Q.jsxs)(e,{children:[(0,Q.jsxs)(L,{children:[(0,Q.jsx)(`strong`,{children:`Event`}),` - Real-time file watching`]}),(0,Q.jsx)(L,{variant:`caption`,color:`text.secondary`,children:`Fast (2-5s response), local filesystems only`})]})}),(0,Q.jsx)(d,{value:`poll`,children:(0,Q.jsxs)(e,{children:[(0,Q.jsxs)(L,{children:[(0,Q.jsx)(`strong`,{children:`Poll`}),` - Periodic scanning`]}),(0,Q.jsx)(L,{variant:`caption`,color:`text.secondary`,children:`Slower (60s interval), network-mount-safe`})]})})]})]})}),(0,Q.jsx)(H,{children:(0,Q.jsxs)(o,{fullWidth:!0,children:[(0,Q.jsx)(t,{id:`write-mode-label`,children:`Tag Writing Mode`}),(0,Q.jsxs)(a,{labelId:`write-mode-label`,value:oe,label:`Tag Writing Mode`,onChange:e=>V(e.target.value),children:[(0,Q.jsx)(d,{value:`none`,children:(0,Q.jsxs)(e,{children:[(0,Q.jsxs)(L,{children:[(0,Q.jsx)(`strong`,{children:`None`}),` - Don't write tags to files`]}),(0,Q.jsx)(L,{variant:`caption`,color:`text.secondary`,children:`DB is source of truth; clears existing nomarr tags`})]})}),(0,Q.jsx)(d,{value:`minimal`,children:(0,Q.jsxs)(e,{children:[(0,Q.jsxs)(L,{children:[(0,Q.jsx)(`strong`,{children:`Minimal`}),` - Mood tags only`]}),(0,Q.jsx)(L,{variant:`caption`,color:`text.secondary`,children:`Write mood-strict, mood-regular, mood-loose`})]})}),(0,Q.jsx)(d,{value:`full`,children:(0,Q.jsxs)(e,{children:[(0,Q.jsxs)(L,{children:[(0,Q.jsx)(`strong`,{children:`Full`}),` - All tags`]}),(0,Q.jsx)(L,{variant:`caption`,color:`text.secondary`,children:`Write all ML-derived tags to audio files`})]})})]})]})}),(0,Q.jsxs)(e,{direction:`row`,spacing:1.25,children:[(0,Q.jsx)(F,{variant:`contained`,onClick:S?Te:Ee,children:S?`Create`:`Update`}),(0,Q.jsx)(F,{variant:`outlined`,onClick:Se,children:`Cancel`})]})]})]}),_&&(0,Q.jsx)(L,{children:`Loading libraries...`}),!_&&!Me&&h.length===0&&(0,Q.jsx)(y,{children:(0,Q.jsx)(L,{color:`text.secondary`,textAlign:`center`,fontStyle:`italic`,children:`No libraries configured. Click "Add Library" to get started.`})}),!_&&!Me&&h.length>0&&(0,Q.jsx)(e,{spacing:2,children:h.map(t=>(0,Q.jsxs)(y,{children:[(0,Q.jsxs)(e,{direction:`row`,justifyContent:`space-between`,alignItems:`flex-start`,sx:{mb:2},children:[(0,Q.jsxs)(H,{children:[(0,Q.jsxs)(e,{direction:`row`,alignItems:`center`,spacing:1.25,sx:{mb:.5},children:[(0,Q.jsx)(L,{variant:`h6`,children:t.name}),K(t.rootPath)&&(0,Q.jsx)(u,{label:`Outside library_root`,color:`warning`,size:`small`})]}),(0,Q.jsx)(L,{variant:`body2`,color:`text.secondary`,sx:{fontFamily:`monospace`},children:t.rootPath}),(0,Q.jsxs)(e,{direction:`row`,spacing:2,sx:{mt:.5},children:[(0,Q.jsxs)(L,{variant:`body2`,color:`text.secondary`,children:[(0,Q.jsx)(`strong`,{children:t.fileCount.toLocaleString()}),` files`]}),(0,Q.jsxs)(L,{variant:`body2`,color:`text.secondary`,children:[(0,Q.jsx)(`strong`,{children:t.folderCount.toLocaleString()}),` folders`]})]}),t.scanStatus===`scanning`&&(0,Q.jsxs)(e,{direction:`row`,alignItems:`center`,spacing:1,sx:{mt:.5},children:[(0,Q.jsx)(u,{label:`Scanning...`,color:`info`,size:`small`,sx:{animation:`pulse 1.5s infinite`}}),t.scanProgress!=null&&t.scanTotal!=null&&t.scanTotal>0&&(0,Q.jsxs)(L,{variant:`body2`,color:`info.main`,children:[t.scanProgress.toLocaleString(),` / `,t.scanTotal.toLocaleString(),` files`,` `,`(`,Math.round(t.scanProgress/t.scanTotal*100),`%)`]})]}),t.scanStatus===`error`&&t.scanError&&(0,Q.jsxs)(L,{variant:`caption`,color:`error.main`,sx:{mt:.5},children:[`⚠ Scan error: `,t.scanError]}),K(t.rootPath)&&(0,Q.jsxs)(L,{variant:`caption`,color:`warning.main`,sx:{mt:.5},children:[`⚠ This library is outside the configured library_root (`,k,`)`]}),(0,Q.jsxs)(e,{direction:`row`,alignItems:`center`,spacing:1,sx:{mt:1},children:[(0,Q.jsx)(L,{variant:`caption`,color:`text.secondary`,children:`File Watching:`}),(0,Q.jsx)(o,{size:`small`,sx:{minWidth:120},children:(0,Q.jsxs)(a,{value:t.watchMode,onChange:e=>ke(t.library_id,e.target.value),size:`small`,sx:{fontSize:`0.75rem`},disabled:D===t.library_id,children:[(0,Q.jsx)(d,{value:`off`,children:`Off`}),(0,Q.jsx)(d,{value:`event`,children:`Event`}),(0,Q.jsx)(d,{value:`poll`,children:`Poll`})]})}),(0,Q.jsx)(Zn,{title:t.watchMode===`event`?`Real-time file watching (local filesystems)`:t.watchMode===`poll`?`Periodic scanning (network-mount-safe)`:`No automatic file watching`,children:(0,Q.jsx)(u,{label:Ae(t.watchMode),color:je(t.watchMode),size:`small`})})]}),(0,Q.jsxs)(e,{direction:`row`,alignItems:`center`,spacing:1,sx:{mt:.5},children:[(0,Q.jsx)(L,{variant:`caption`,color:`text.secondary`,children:`Tag Writing:`}),(0,Q.jsx)(Zn,{title:t.fileWriteMode===`full`?`All ML-derived tags written to audio files`:t.fileWriteMode===`minimal`?`Only mood tags written to audio files`:`No tags written to audio files (DB only)`,children:(0,Q.jsx)(u,{label:q(t.fileWriteMode),color:J(t.fileWriteMode),size:`small`})}),U[t.library_id]?.pending>0&&(0,Q.jsx)(u,{label:`${U[t.library_id].pending} pending`,color:`warning`,size:`small`})]})]}),(0,Q.jsxs)(e,{direction:`row`,alignItems:`center`,spacing:1,children:[(0,Q.jsx)(H,{sx:{width:8,height:8,borderRadius:`50%`,bgcolor:t.isEnabled?`success.main`:`text.disabled`}}),(0,Q.jsx)(L,{variant:`body2`,color:`text.secondary`,children:t.isEnabled?`Enabled`:`Disabled`})]})]}),(0,Q.jsxs)(e,{direction:`row`,spacing:1.25,flexWrap:`wrap`,children:[(0,Q.jsx)(F,{variant:`outlined`,size:`small`,onClick:()=>we(t),disabled:D===t.library_id,children:`Edit`}),(0,Q.jsx)(F,{variant:`outlined`,color:`success`,size:`small`,onClick:()=>De(t.library_id,`quick`),disabled:!t.isEnabled||D===t.library_id||t.scanStatus===`scanning`||K(t.rootPath)||!t.scannedAt,title:t.scannedAt?t.scanStatus===`scanning`?`Scan already in progress`:K(t.rootPath)?`Cannot scan: library is outside library_root`:`Scan only new and modified files`:`Run a Full Scan first before using Quick Scan`,children:D===t.library_id||t.scanStatus===`scanning`?`Scanning...`:`Quick Scan`}),(0,Q.jsx)(F,{variant:`contained`,color:`success`,size:`small`,onClick:()=>De(t.library_id,`full`),disabled:!t.isEnabled||D===t.library_id||t.scanStatus===`scanning`||K(t.rootPath),title:t.scanStatus===`scanning`?`Scan already in progress`:K(t.rootPath)?`Cannot scan: library is outside library_root`:`Rescan all files in the library`,children:D===t.library_id||t.scanStatus===`scanning`?`Scanning...`:`Full Scan`}),(0,Q.jsx)(F,{variant:`outlined`,color:`secondary`,size:`small`,onClick:()=>Y(t.library_id),disabled:!t.isEnabled||de===t.library_id||t.scanStatus===`scanning`,title:de===t.library_id?`Reconciling tags...`:`Write tags from database to audio files`,onMouseEnter:()=>X(t.library_id),children:de===t.library_id?`Reconciling...`:`Reconcile Tags`}),(0,Q.jsx)(F,{variant:`contained`,color:`error`,size:`small`,onClick:()=>Oe(t.library_id,t.name),disabled:D===t.library_id,children:`Delete`})]})]},t.library_id))}),(0,Q.jsx)(T,{open:i,title:s.title,message:s.message,confirmLabel:s.confirmLabel,cancelLabel:s.cancelLabel,severity:s.severity,onConfirm:l,onCancel:p})]})}var $n={file_write_mode:{label:`Tag Writing Mode`,description:`Controls which tags are written to audio files`,type:`select`,options:[{value:`none`,label:`None - Tags stored in database only`},{value:`minimal`,label:`Minimal - Essential tags only (artist, album, title, genre)`},{value:`full`,label:`Full - All generated tags written to files`}]},overwrite_tags:{label:`Overwrite Existing Tags`,description:`Whether to overwrite existing tags in audio files`,type:`boolean`},library_auto_tag:{label:`Auto-Tag New Files`,description:`Automatically process new files found during library scans`,type:`boolean`},library_ignore_patterns:{label:`Ignore Patterns`,description:`Comma-separated patterns to ignore during scanning (e.g., */Audiobooks/*,*.tmp)`,type:`text`},tagger_worker_count:{label:`Worker Threads`,description:`Number of parallel worker processes for tagging (0 = auto-detect)`,type:`text`},cache_idle_timeout:{label:`Cache Timeout (seconds)`,description:`How long to keep ML models in memory when idle`,type:`text`},calibrate_heads:{label:`Auto-Calibrate Heads`,description:`Automatically calibrate tag thresholds for optimal results`,type:`boolean`},calibration_repo:{label:`Calibration Repository`,description:`Git repository URL for calibration data downloads`,type:`text`}};function er({configKey:e,value:t,onChange:n,disabled:r}){let i=t==null?``:String(t),o=$n[e],s=o?.label||e,l=o?.description,u=o?.type||(typeof t==`boolean`?`boolean`:`text`),f=o?.options||[];return(0,Q.jsxs)(H,{sx:{display:`flex`,gap:2,alignItems:`flex-start`,py:1},children:[(0,Q.jsxs)(H,{sx:{minWidth:`280px`,flexShrink:0},children:[(0,Q.jsx)(L,{variant:`body2`,color:`text.primary`,sx:{fontWeight:500,mb:l?.5:0},children:s}),l&&(0,Q.jsx)(L,{variant:`caption`,color:`text.secondary`,sx:{display:`block`},children:l})]}),(0,Q.jsx)(H,{sx:{flex:1,maxWidth:`400px`},children:(()=>u===`select`&&f.length>0?(0,Q.jsx)(a,{value:i,onChange:t=>n(e,t.target.value),disabled:r,size:`small`,fullWidth:!0,children:f.map(({value:e,label:t})=>(0,Q.jsx)(d,{value:e,children:t},e))}):u===`boolean`?(0,Q.jsxs)(a,{value:i,onChange:t=>n(e,t.target.value),disabled:r,size:`small`,fullWidth:!0,children:[(0,Q.jsx)(d,{value:`true`,children:`true`}),(0,Q.jsx)(d,{value:`false`,children:`false`})]}):(0,Q.jsx)(c,{type:`text`,value:i,onChange:t=>n(e,t.target.value),disabled:r,size:`small`,fullWidth:!0,placeholder:l}))()})]})}function tr({config:t,hasChanges:n,saveLoading:r,onChange:i,onSaveAll:a}){return(0,Q.jsxs)(y,{children:[(0,Q.jsx)(ce,{title:`Settings`}),(0,Q.jsx)(L,{variant:`body2`,color:`text.secondary`,sx:{mb:2.5},children:`Changes are saved to the database and will take effect on server restart. Use "Restart Server" in Admin page to apply changes.`}),(0,Q.jsx)(e,{spacing:1.875,children:Object.entries(t).map(([e,t])=>(0,Q.jsx)(er,{configKey:e,value:t,onChange:i,disabled:r},e))}),(0,Q.jsxs)(H,{sx:{mt:3.75,display:`flex`,gap:1.25,alignItems:`center`},children:[(0,Q.jsx)(F,{onClick:a,variant:`contained`,disabled:!n||r,sx:{whiteSpace:`nowrap`},children:r?`Saving...`:`Save All Changes`}),n&&(0,Q.jsx)(L,{variant:`body2`,color:`warning.main`,children:`Unsaved changes`})]})]})}function nr(){let{showSuccess:e,showError:t,showInfo:n}=xe(),[r,i]=(0,Z.useState)({}),[a,o]=(0,Z.useState)({}),[s,c]=(0,Z.useState)(!0),[l,u]=(0,Z.useState)(null),[d,f]=(0,Z.useState)(!1),[p,m]=(0,Z.useState)(!1),h=async()=>{try{c(!0),u(null);let e=await j();i(e),o(e),m(!1)}catch(e){u(e instanceof Error?e.message:`Failed to load config`),console.error(`[Config] Load error:`,e)}finally{c(!1)}};return(0,Z.useEffect)(()=>{h()},[]),(0,Z.useEffect)(()=>{m(Object.keys(r).some(e=>r[e]!==a[e]))},[r,a]),{config:r,loading:s,error:l,saveLoading:d,hasChanges:p,handleSaveAll:async()=>{try{f(!0);let t=[];for(let e of Object.keys(r))if(r[e]!==a[e]){let n=r[e];if(n==null||n===``)continue;await ie(e,String(n)),t.push(e)}if(t.length===0){n(`No changes to save`);return}e(`Saved ${t.length} config change(s). Use "Restart Server" in Admin page to apply.`),await h()}catch(e){t(e instanceof Error?e.message:`Failed to save config`)}finally{f(!1)}},handleChange:(e,t)=>{i(n=>({...n,[e]:t}))}}}function rr(){let{config:t,loading:n,error:r,saveLoading:i,hasChanges:a,handleSaveAll:o,handleChange:s}=nr();return(0,Q.jsxs)(D,{title:`Configuration`,children:[n&&(0,Q.jsx)(N,{}),r&&(0,Q.jsxs)(oe,{severity:`error`,children:[`Error: `,r]}),!n&&!r&&(0,Q.jsxs)(e,{spacing:2.5,children:[(0,Q.jsx)(Qn,{}),(0,Q.jsx)(tr,{config:t,hasChanges:a,saveLoading:i,onChange:s,onSaveAll:o})]})]})}export{rr as ConfigPage};