import{t as e}from"./Stack-BtQgkU3W.js";import{Ft as t,Lt as n,d as r,f as i,n as a,s as o,xt as s}from"./index-DjY4hVv8.js";var c=n(s(),1);function l({onRestart:e,actionLoading:t}){return(0,c.jsxs)(i,{children:[(0,c.jsx)(r,{title:`System Controls`}),(0,c.jsx)(o,{label:`Restart Server`,description:`Stops and restarts the API server. Config changes will take effect. Page will reload automatically after restart.`,onClick:e,disabled:t,variant:`contained`,color:`error`})]})}function u({onPause:t,onResume:n,actionLoading:a}){return(0,c.jsxs)(i,{children:[(0,c.jsx)(r,{title:`Worker Controls`}),(0,c.jsxs)(e,{spacing:1.25,children:[(0,c.jsx)(o,{label:`Pause Worker`,description:`Stops the worker from processing queue jobs. Jobs remain in the queue.`,onClick:t,disabled:a}),(0,c.jsx)(o,{label:`Resume Worker`,description:`Starts the worker to process queue jobs.`,onClick:n,disabled:a})]})]})}var d=n(t(),1);function f(){let[e,t]=(0,d.useState)(!1);return{actionLoading:e,handlePauseWorker:async()=>{if(confirm(`Pause the worker? Processing will stop.`))try{t(!0);let e=await a.admin.pauseWorker();alert(e.message)}catch(e){alert(e instanceof Error?e.message:`Failed to pause worker`)}finally{t(!1)}},handleResumeWorker:async()=>{if(confirm(`Resume the worker? Processing will start.`))try{t(!0);let e=await a.admin.resumeWorker();alert(e.message)}catch(e){alert(e instanceof Error?e.message:`Failed to resume worker`)}finally{t(!1)}},handleRestart:async()=>{if(confirm(`Restart the API server? The page will reload in a few seconds.`))try{t(!0);let e=await a.admin.restart();alert(e.message),setTimeout(()=>{window.location.reload()},3e3)}catch(e){alert(e instanceof Error?e.message:`Failed to restart server`),t(!1)}}}}function p(){let{actionLoading:e,handlePauseWorker:t,handleResumeWorker:n,handleRestart:r}=f();return(0,c.jsxs)(`div`,{style:{padding:`20px`},children:[(0,c.jsx)(`h1`,{style:{marginBottom:`20px`},children:`Admin`}),(0,c.jsxs)(`div`,{style:{display:`grid`,gap:`20px`},children:[(0,c.jsx)(u,{onPause:t,onResume:n,actionLoading:e}),(0,c.jsx)(l,{onRestart:r,actionLoading:e})]})]})}export{p as AdminPage};