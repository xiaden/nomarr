import{c as e,t}from"./Stack-C3oFuMt6.js";import{i as n,o as r,r as i,t as a,v as o}from"./Select-CArIr3vA.js";import{t as s}from"./Autocomplete-DEKm1DD3.js";import"./Popper-BEK2VOi3.js";import"./Chip-CI6uSuJr.js";import{t as c}from"./TextField-C2jYce3F.js";import{a as l,i as u,n as d,r as f,t as p}from"./TableRow-C7mpJIn6.js";import{At as m,D as h,Dn as g,En as _,Et as ee,Gn as v,It as y,Jt as te,Mn as b,Mt as ne,Nt as x,On as S,Sn as re,Un as ie,Xt as ae,Z as C,an as w,bt as T,ct as E,dn as D,en as oe,f as O,gn as k,kt as A,l as j,ln as M,lt as N,nn as P,rn as F,rt as I,sn as L,vn as se,w as ce,wt as R,xn as z,xt as B,zt as le}from"./index-C5fbkBFX.js";var ue={border:0,clip:`rect(0 0 0 0)`,height:`1px`,margin:`-1px`,overflow:`hidden`,padding:0,position:`absolute`,whiteSpace:`nowrap`,width:`1px`};function de(e,t,n=(e,t)=>e===t){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}var V=de,H=v(ie()),fe=2;function U(e,t,n,r,i){return n===1?Math.min(e+t,i):Math.max(e-t,r)}function pe(e,t){return e-t}function W(e,t){let{index:n}=e.reduce((e,n,r)=>{let i=Math.abs(t-n);return e===null||i<e.distance||i===e.distance?{distance:i,index:r}:e},null)??{};return n}function G(e,t){if(t.current!==void 0&&e.changedTouches){let n=e;for(let e=0;e<n.changedTouches.length;e+=1){let r=n.changedTouches[e];if(r.identifier===t.current)return{x:r.clientX,y:r.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function me(e,t,n){return(e-t)*100/(n-t)}function he(e,t,n){return(n-t)*e+t}function K(e){if(Math.abs(e)<1){let t=e.toExponential().split(`e-`),n=t[0].split(`.`)[1];return(n?n.length:0)+parseInt(t[1],10)}let t=e.toString().split(`.`)[1];return t?t.length:0}function ge(e,t,n){let r=Math.round((e-n)/t)*t+n;return Number(r.toFixed(K(t)))}function _e({values:e,newValue:t,index:n}){let r=e.slice();return r[n]=t,r.sort(pe)}function q({sliderRef:e,activeIndex:t,setActive:n}){let r=oe(e.current);(!e.current?.contains(r.activeElement)||Number(r?.activeElement?.getAttribute(`data-index`))!==t)&&e.current?.querySelector(`[type="range"][data-index="${t}"]`).focus(),n&&n(t)}function J(e,t){return typeof e==`number`&&typeof t==`number`?e===t:typeof e==`object`&&typeof t==`object`?V(e,t):!1}var ve={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}};const ye=e=>e;var Y;function be(){return Y===void 0&&(Y=typeof CSS<`u`&&typeof CSS.supports==`function`?CSS.supports(`touch-action`,`none`):!0),Y}function X(e){let{"aria-labelledby":t,defaultValue:n,disabled:r=!1,disableSwap:i=!1,isRtl:a=!1,marks:s=!1,max:c=100,min:l=0,name:u,onChange:d,onChangeCommitted:f,orientation:p=`horizontal`,rootRef:m,scale:h=ye,step:g=1,shiftStep:_=10,tabIndex:ee,value:v}=e,b=H.useRef(void 0),[x,S]=H.useState(-1),[ie,C]=H.useState(-1),[w,T]=H.useState(!1),E=H.useRef(0),D=H.useRef(null),[O,k]=o({controlled:v,default:n??l,name:`Slider`}),A=d&&((e,t,n)=>{let r=e.nativeEvent||e,i=new r.constructor(r.type,r);Object.defineProperty(i,`target`,{writable:!0,value:{value:t,name:u}}),D.current=t,d(i,t,n)}),j=Array.isArray(O),M=j?O.slice().sort(pe):[O];M=M.map(e=>e==null?l:z(e,l,c));let N=s===!0&&g!==null?[...Array(Math.floor((c-l)/g)+1)].map((e,t)=>({value:l+g*t})):s||[],P=N.map(e=>e.value),[F,I]=H.useState(-1),L=H.useRef(null),se=te(m,L),ce=e=>t=>{let n=Number(t.currentTarget.getAttribute(`data-index`));ne(t.target)&&I(n),C(n),e?.onFocus?.(t)},R=e=>t=>{ne(t.target)||I(-1),C(-1),e?.onBlur?.(t)},B=(e,t)=>{let n=Number(e.currentTarget.getAttribute(`data-index`)),r=M[n],a=P.indexOf(r),o=t;if(N&&g==null){let e=P[P.length-1];o=o>=e?e:o<=P[0]?P[0]:o<r?P[a-1]:P[a+1]}if(o=z(o,l,c),j){i&&(o=z(o,M[n-1]||-1/0,M[n+1]||1/0));let e=o;o=_e({values:M,newValue:o,index:n});let t=n;i||(t=o.indexOf(e)),q({sliderRef:L,activeIndex:t})}k(o),I(n),A&&!J(o,O)&&A(e,o,n),f&&f(e,D.current??o)},le=e=>t=>{if([`ArrowUp`,`ArrowDown`,`ArrowLeft`,`ArrowRight`,`PageUp`,`PageDown`,`Home`,`End`].includes(t.key)){t.preventDefault();let e=Number(t.currentTarget.getAttribute(`data-index`)),n=M[e],r=null;if(g!=null){let e=t.shiftKey?_:g;switch(t.key){case`ArrowUp`:r=U(n,e,1,l,c);break;case`ArrowRight`:r=U(n,e,a?-1:1,l,c);break;case`ArrowDown`:r=U(n,e,-1,l,c);break;case`ArrowLeft`:r=U(n,e,a?1:-1,l,c);break;case`PageUp`:r=U(n,_,1,l,c);break;case`PageDown`:r=U(n,_,-1,l,c);break;case`Home`:r=l;break;case`End`:r=c;break;default:break}}else if(N){let e=P[P.length-1],i=P.indexOf(n),o=[a?`ArrowRight`:`ArrowLeft`,`ArrowDown`,`PageDown`,`Home`],s=[a?`ArrowLeft`:`ArrowRight`,`ArrowUp`,`PageUp`,`End`];o.includes(t.key)?r=i===0?P[0]:P[i-1]:s.includes(t.key)&&(r=i===P.length-1?e:P[i+1])}r!=null&&B(t,r)}e?.onKeyDown?.(t)};re(()=>{r&&L.current.contains(document.activeElement)&&document.activeElement?.blur()},[r]),r&&x!==-1&&S(-1),r&&F!==-1&&I(-1);let de=e=>t=>{e.onChange?.(t),B(t,t.target.valueAsNumber)},V=H.useRef(void 0),K=p;a&&p===`horizontal`&&(K+=`-reverse`);let Y=({finger:e,move:t=!1})=>{let{current:n}=L,{width:r,height:a,bottom:o,left:s}=n.getBoundingClientRect(),u;u=K.startsWith(`vertical`)?(o-e.y)/a:(e.x-s)/r,K.includes(`-reverse`)&&(u=1-u);let d;d=he(u,l,c),d=g?ge(d,g,l):P[W(P,d)],d=z(d,l,c);let f=0;if(j){f=t?V.current:W(M,d),i&&(d=z(d,M[f-1]||-1/0,M[f+1]||1/0));let e=d;d=_e({values:M,newValue:d,index:f}),i&&t||(f=d.indexOf(e),V.current=f)}return{newValue:d,activeIndex:f}},X=ae(e=>{let t=G(e,b);if(!t)return;if(E.current+=1,e.type===`mousemove`&&e.buttons===0){Z(e);return}let{newValue:n,activeIndex:r}=Y({finger:t,move:!0});q({sliderRef:L,activeIndex:r,setActive:S}),k(n),!w&&E.current>fe&&T(!0),A&&!J(n,O)&&A(e,n,r)}),Z=ae(e=>{let t=G(e,b);if(T(!1),!t)return;let{newValue:n}=Y({finger:t,move:!0});S(-1),e.type===`touchend`&&C(-1),f&&f(e,D.current??n),b.current=void 0,Q()}),xe=ae(e=>{if(r)return;be()||e.preventDefault();let t=e.changedTouches[0];t!=null&&(b.current=t.identifier);let n=G(e,b);if(n!==!1){let{newValue:t,activeIndex:r}=Y({finger:n});q({sliderRef:L,activeIndex:r,setActive:S}),k(t),A&&!J(t,O)&&A(e,t,r)}E.current=0;let i=oe(L.current);i.addEventListener(`touchmove`,X,{passive:!0}),i.addEventListener(`touchend`,Z,{passive:!0})}),Q=H.useCallback(()=>{let e=oe(L.current);e.removeEventListener(`mousemove`,X),e.removeEventListener(`mouseup`,Z),e.removeEventListener(`touchmove`,X),e.removeEventListener(`touchend`,Z)},[Z,X]);H.useEffect(()=>{let{current:e}=L;return e.addEventListener(`touchstart`,xe,{passive:be()}),()=>{e.removeEventListener(`touchstart`,xe),Q()}},[Q,xe]),H.useEffect(()=>{r&&Q()},[r,Q]);let $=e=>t=>{if(e.onMouseDown?.(t),r||t.defaultPrevented||t.button!==0)return;t.preventDefault();let n=G(t,b);if(n!==!1){let{newValue:e,activeIndex:r}=Y({finger:n});q({sliderRef:L,activeIndex:r,setActive:S}),k(e),A&&!J(e,O)&&A(t,e,r)}E.current=0;let i=oe(L.current);i.addEventListener(`mousemove`,X,{passive:!0}),i.addEventListener(`mouseup`,Z)},Se=me(j?M[0]:l,l,c),Ce=me(M[M.length-1],l,c)-Se,we=(e={})=>{let t=y(e),n={onMouseDown:$(t||{})},r={...t,...n};return{...e,ref:se,...r}},Te=e=>t=>{e.onMouseOver?.(t),C(Number(t.currentTarget.getAttribute(`data-index`)))},Ee=e=>t=>{e.onMouseLeave?.(t),C(-1)},De=(e={})=>{let t=y(e),n={onMouseOver:Te(t||{}),onMouseLeave:Ee(t||{})};return{...e,...t,...n}},Oe=e=>({pointerEvents:x!==-1&&x!==e?`none`:void 0}),ke;return p===`vertical`&&(ke=a?`vertical-rl`:`vertical-lr`),{active:x,axis:K,axisProps:ve,dragging:w,focusedThumbIndex:F,getHiddenInputProps:(n={})=>{let i=y(n),o={onChange:de(i||{}),onFocus:ce(i||{}),onBlur:R(i||{}),onKeyDown:le(i||{})},s={...i,...o};return{tabIndex:ee,"aria-labelledby":t,"aria-orientation":p,"aria-valuemax":h(c),"aria-valuemin":h(l),name:u,type:`range`,min:e.min,max:e.max,step:e.step===null&&e.marks?`any`:e.step??void 0,disabled:r,...n,...s,style:{...ue,direction:a?`rtl`:`ltr`,width:`100%`,height:`100%`,writingMode:ke}}},getRootProps:we,getThumbProps:De,marks:N,open:ie,range:j,rootRef:se,trackLeap:Ce,trackOffset:Se,values:M,getThumbStyle:Oe}}var Z=e=>!e||!le(e);function xe(e){return g(`MuiSlider`,e)}var Q=_(`MuiSlider`,`root.active.colorPrimary.colorSecondary.colorError.colorInfo.colorSuccess.colorWarning.disabled.dragging.focusVisible.mark.markActive.marked.markLabel.markLabelActive.rail.sizeSmall.thumb.thumbColorPrimary.thumbColorSecondary.thumbColorError.thumbColorSuccess.thumbColorInfo.thumbColorWarning.track.trackInverted.trackFalse.thumbSizeSmall.valueLabel.valueLabelOpen.valueLabelCircle.valueLabelLabel.vertical`.split(`.`)),$=v(b()),Se=e=>{let{open:t}=e;return{offset:S(t&&Q.valueLabelOpen),circle:Q.valueLabelCircle,label:Q.valueLabelLabel}};function Ce(e){let{children:t,className:n,value:r}=e,i=Se(e);return t?H.cloneElement(t,{className:t.props.className},(0,$.jsxs)(H.Fragment,{children:[t.props.children,(0,$.jsx)(`span`,{className:S(i.offset,n),"aria-hidden":!0,children:(0,$.jsx)(`span`,{className:i.circle,children:(0,$.jsx)(`span`,{className:i.label,children:r})})})]})):null}function we(e){return e}const Te=M(`span`,{name:`MuiSlider`,slot:`Root`,overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,t[`color${F(n.color)}`],n.size!==`medium`&&t[`size${F(n.size)}`],n.marked&&t.marked,n.orientation===`vertical`&&t.vertical,n.track===`inverted`&&t.trackInverted,n.track===!1&&t.trackFalse]}})(P(({theme:e})=>({borderRadius:12,boxSizing:`content-box`,display:`inline-block`,position:`relative`,cursor:`pointer`,touchAction:`none`,WebkitTapHighlightColor:`transparent`,"@media print":{colorAdjust:`exact`},[`&.${Q.disabled}`]:{pointerEvents:`none`,cursor:`default`,color:(e.vars||e).palette.grey[400]},[`&.${Q.dragging}`]:{[`& .${Q.thumb}, & .${Q.track}`]:{transition:`none`}},variants:[...Object.entries(e.palette).filter(m()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),{props:{orientation:`horizontal`},style:{height:4,width:`100%`,padding:`13px 0`,"@media (pointer: coarse)":{padding:`20px 0`}}},{props:{orientation:`horizontal`,size:`small`},style:{height:2}},{props:{orientation:`horizontal`,marked:!0},style:{marginBottom:20}},{props:{orientation:`vertical`},style:{height:`100%`,width:4,padding:`0 13px`,"@media (pointer: coarse)":{padding:`0 20px`}}},{props:{orientation:`vertical`,size:`small`},style:{width:2}},{props:{orientation:`vertical`,marked:!0},style:{marginRight:44}}]}))),Ee=M(`span`,{name:`MuiSlider`,slot:`Rail`})({display:`block`,position:`absolute`,borderRadius:`inherit`,backgroundColor:`currentColor`,opacity:.38,variants:[{props:{orientation:`horizontal`},style:{width:`100%`,height:`inherit`,top:`50%`,transform:`translateY(-50%)`}},{props:{orientation:`vertical`},style:{height:`100%`,width:`inherit`,left:`50%`,transform:`translateX(-50%)`}},{props:{track:`inverted`},style:{opacity:1}}]}),De=M(`span`,{name:`MuiSlider`,slot:`Track`})(P(({theme:e})=>({display:`block`,position:`absolute`,borderRadius:`inherit`,border:`1px solid currentColor`,backgroundColor:`currentColor`,transition:e.transitions.create([`left`,`width`,`bottom`,`height`],{duration:e.transitions.duration.shortest}),variants:[{props:{size:`small`},style:{border:`none`}},{props:{orientation:`horizontal`},style:{height:`inherit`,top:`50%`,transform:`translateY(-50%)`}},{props:{orientation:`vertical`},style:{width:`inherit`,left:`50%`,transform:`translateX(-50%)`}},{props:{track:!1},style:{display:`none`}},...Object.entries(e.palette).filter(m()).map(([t])=>({props:{color:t,track:`inverted`},style:{...e.vars?{backgroundColor:e.vars.palette.Slider[`${t}Track`],borderColor:e.vars.palette.Slider[`${t}Track`]}:{backgroundColor:e.lighten(e.palette[t].main,.62),borderColor:e.lighten(e.palette[t].main,.62),...e.applyStyles(`dark`,{backgroundColor:e.darken(e.palette[t].main,.5)}),...e.applyStyles(`dark`,{borderColor:e.darken(e.palette[t].main,.5)})}}}))]}))),Oe=M(`span`,{name:`MuiSlider`,slot:`Thumb`,overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.thumb,t[`thumbColor${F(n.color)}`],n.size!==`medium`&&t[`thumbSize${F(n.size)}`]]}})(P(({theme:e})=>({position:`absolute`,width:20,height:20,boxSizing:`border-box`,borderRadius:`50%`,outline:0,backgroundColor:`currentColor`,display:`flex`,alignItems:`center`,justifyContent:`center`,transition:e.transitions.create([`box-shadow`,`left`,`bottom`],{duration:e.transitions.duration.shortest}),"&::before":{position:`absolute`,content:`""`,borderRadius:`inherit`,width:`100%`,height:`100%`,boxShadow:(e.vars||e).shadows[2]},"&::after":{position:`absolute`,content:`""`,borderRadius:`50%`,width:42,height:42,top:`50%`,left:`50%`,transform:`translate(-50%, -50%)`},[`&.${Q.disabled}`]:{"&:hover":{boxShadow:`none`}},variants:[{props:{size:`small`},style:{width:12,height:12,"&::before":{boxShadow:`none`}}},{props:{orientation:`horizontal`},style:{top:`50%`,transform:`translate(-50%, -50%)`}},{props:{orientation:`vertical`},style:{left:`50%`,transform:`translate(-50%, 50%)`}},...Object.entries(e.palette).filter(m()).map(([t])=>({props:{color:t},style:{[`&:hover, &.${Q.focusVisible}`]:{boxShadow:`0px 0px 0px 8px ${e.alpha((e.vars||e).palette[t].main,.16)}`,"@media (hover: none)":{boxShadow:`none`}},[`&.${Q.active}`]:{boxShadow:`0px 0px 0px 14px ${e.alpha((e.vars||e).palette[t].main,.16)}`}}}))]})));var ke=M(Ce,{name:`MuiSlider`,slot:`ValueLabel`})(P(({theme:e})=>({zIndex:1,whiteSpace:`nowrap`,...e.typography.body2,fontWeight:500,transition:e.transitions.create([`transform`],{duration:e.transitions.duration.shortest}),position:`absolute`,backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:`flex`,alignItems:`center`,justifyContent:`center`,padding:`0.25rem 0.75rem`,variants:[{props:{orientation:`horizontal`},style:{transform:`translateY(-100%) scale(0)`,top:`-10px`,transformOrigin:`bottom center`,"&::before":{position:`absolute`,content:`""`,width:8,height:8,transform:`translate(-50%, 50%) rotate(45deg)`,backgroundColor:`inherit`,bottom:0,left:`50%`},[`&.${Q.valueLabelOpen}`]:{transform:`translateY(-100%) scale(1)`}}},{props:{orientation:`vertical`},style:{transform:`translateY(-50%) scale(0)`,right:`30px`,top:`50%`,transformOrigin:`right center`,"&::before":{position:`absolute`,content:`""`,width:8,height:8,transform:`translate(-50%, -50%) rotate(45deg)`,backgroundColor:`inherit`,right:-8,top:`50%`},[`&.${Q.valueLabelOpen}`]:{transform:`translateY(-50%) scale(1)`}}},{props:{size:`small`},style:{fontSize:e.typography.pxToRem(12),padding:`0.25rem 0.5rem`}},{props:{orientation:`vertical`,size:`small`},style:{right:`20px`}}]})));const Ae=M(`span`,{name:`MuiSlider`,slot:`Mark`,shouldForwardProp:e=>D(e)&&e!==`markActive`,overridesResolver:(e,t)=>{let{markActive:n}=e;return[t.mark,n&&t.markActive]}})(P(({theme:e})=>({position:`absolute`,width:2,height:2,borderRadius:1,backgroundColor:`currentColor`,variants:[{props:{orientation:`horizontal`},style:{top:`50%`,transform:`translate(-1px, -50%)`}},{props:{orientation:`vertical`},style:{left:`50%`,transform:`translate(-50%, 1px)`}},{props:{markActive:!0},style:{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8}}]}))),je=M(`span`,{name:`MuiSlider`,slot:`MarkLabel`,shouldForwardProp:e=>D(e)&&e!==`markLabelActive`})(P(({theme:e})=>({...e.typography.body2,color:(e.vars||e).palette.text.secondary,position:`absolute`,whiteSpace:`nowrap`,variants:[{props:{orientation:`horizontal`},style:{top:30,transform:`translateX(-50%)`,"@media (pointer: coarse)":{top:40}}},{props:{orientation:`vertical`},style:{left:36,transform:`translateY(50%)`,"@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(e.vars||e).palette.text.primary}}]})));var Me=e=>{let{disabled:t,dragging:n,marked:r,orientation:i,track:a,classes:o,color:s,size:c}=e;return k({root:[`root`,t&&`disabled`,n&&`dragging`,r&&`marked`,i===`vertical`&&`vertical`,a===`inverted`&&`trackInverted`,a===!1&&`trackFalse`,s&&`color${F(s)}`,c&&`size${F(c)}`],rail:[`rail`],track:[`track`],mark:[`mark`],markActive:[`markActive`],markLabel:[`markLabel`],markLabelActive:[`markLabelActive`],valueLabel:[`valueLabel`],thumb:[`thumb`,t&&`disabled`,c&&`thumbSize${F(c)}`,s&&`thumbColor${F(s)}`],active:[`active`],disabled:[`disabled`],focusVisible:[`focusVisible`]},xe,o)},Ne=({children:e})=>e,Pe=H.forwardRef(function(t,n){let r=L({props:t,name:`MuiSlider`}),i=se(),{"aria-label":a,"aria-valuetext":o,"aria-labelledby":s,component:c=`span`,components:l={},componentsProps:u={},color:d=`primary`,classes:f,className:p,disableSwap:m=!1,disabled:h=!1,getAriaLabel:g,getAriaValueText:_,marks:ee=!1,max:v=100,min:y=0,name:te,onChange:b,onChangeCommitted:ne,orientation:x=`horizontal`,shiftStep:re=10,size:ie=`medium`,step:ae=1,scale:C=we,slotProps:w,slots:T,tabIndex:E,track:D=`normal`,value:oe,valueLabelDisplay:O=`off`,valueLabelFormat:k=we,...A}=r,j={...r,isRtl:i,max:v,min:y,classes:f,disabled:h,disableSwap:m,orientation:x,marks:ee,color:d,size:ie,step:ae,shiftStep:re,scale:C,track:D,valueLabelDisplay:O,valueLabelFormat:k},{axisProps:M,getRootProps:N,getHiddenInputProps:P,getThumbProps:F,open:I,active:ce,axis:R,focusedThumbIndex:z,range:B,dragging:ue,marks:de,values:V,trackOffset:fe,trackLeap:U,getThumbStyle:pe}=X({...j,rootRef:n});j.marked=de.length>0&&de.some(e=>e.label),j.dragging=ue,j.focusedThumbIndex=z;let W=Me(j),G=T?.root??l.Root??Te,he=T?.rail??l.Rail??Ee,K=T?.track??l.Track??De,ge=T?.thumb??l.Thumb??Oe,_e=T?.valueLabel??l.ValueLabel??ke,q=T?.mark??l.Mark??Ae,J=T?.markLabel??l.MarkLabel??je,ve=T?.input??l.Input??`input`,ye=w?.root??u.root,Y=w?.rail??u.rail,be=w?.track??u.track,xe=w?.thumb??u.thumb,Q=w?.valueLabel??u.valueLabel,Se=w?.mark??u.mark,Ce=w?.markLabel??u.markLabel,Pe=w?.input??u.input,Fe=e({elementType:G,getSlotProps:N,externalSlotProps:ye,externalForwardedProps:A,additionalProps:{...Z(G)&&{as:c}},ownerState:{...j,...ye?.ownerState},className:[W.root,p]}),Ie=e({elementType:he,externalSlotProps:Y,ownerState:j,className:W.rail}),Le=e({elementType:K,externalSlotProps:be,additionalProps:{style:{...M[R].offset(fe),...M[R].leap(U)}},ownerState:{...j,...be?.ownerState},className:W.track}),Re=e({elementType:ge,getSlotProps:F,externalSlotProps:xe,ownerState:{...j,...xe?.ownerState},className:W.thumb}),ze=e({elementType:_e,externalSlotProps:Q,ownerState:{...j,...Q?.ownerState},className:W.valueLabel}),Be=e({elementType:q,externalSlotProps:Se,ownerState:j,className:W.mark}),Ve=e({elementType:J,externalSlotProps:Ce,ownerState:j,className:W.markLabel}),He=e({elementType:ve,getSlotProps:P,externalSlotProps:Pe,ownerState:j});return(0,$.jsxs)(G,{...Fe,children:[(0,$.jsx)(he,{...Ie}),(0,$.jsx)(K,{...Le}),de.filter(e=>e.value>=y&&e.value<=v).map((e,t)=>{let n=me(e.value,y,v),r=M[R].offset(n),i;return i=D===!1?V.includes(e.value):D===`normal`&&(B?e.value>=V[0]&&e.value<=V[V.length-1]:e.value<=V[0])||D===`inverted`&&(B?e.value<=V[0]||e.value>=V[V.length-1]:e.value>=V[0]),(0,$.jsxs)(H.Fragment,{children:[(0,$.jsx)(q,{"data-index":t,...Be,...!le(q)&&{markActive:i},style:{...r,...Be.style},className:S(Be.className,i&&W.markActive)}),e.label==null?null:(0,$.jsx)(J,{"aria-hidden":!0,"data-index":t,...Ve,...!le(J)&&{markLabelActive:i},style:{...r,...Ve.style},className:S(W.markLabel,Ve.className,i&&W.markLabelActive),children:e.label})]},t)}),V.map((e,t)=>{let n=me(e,y,v),r=M[R].offset(n),i=O===`off`?Ne:_e;return(0,$.jsx)(i,{...!le(i)&&{valueLabelFormat:k,valueLabelDisplay:O,value:typeof k==`function`?k(C(e),t):k,index:t,open:I===t||ce===t||O===`on`,disabled:h},...ze,children:(0,$.jsx)(ge,{"data-index":t,...Re,className:S(W.thumb,Re.className,ce===t&&W.active,z===t&&W.focusVisible),style:{...r,...pe(t),...Re.style},children:(0,$.jsx)(ve,{"data-index":t,"aria-label":g?g(t):a,"aria-valuenow":C(e),"aria-labelledby":s,"aria-valuetext":_?_(C(e),t):o,value:V[t],...He})})},t)})]})});function Fe(){let[e,t]=(0,H.useState)(!1),[n,r]=(0,H.useState)(null),[i,a]=(0,H.useState)(null);return{loading:e,error:n,results:i,searchByFileId:(0,H.useCallback)(async(e,n,i=10,o=0)=>{t(!0),r(null),a(null);try{a((await h(e,(await ce(e,n)).vector,i,o)).results)}catch(t){t instanceof C?t.status===404?r(`No vector found for this track with backbone "${e}". The track may not have been processed yet.`):t.status===503?r(`Vector search not available: no vector index exists. Run promote & rebuild from the admin panel first.`):r(`API Error (${t.status}): ${t.message}`):t instanceof Error?r(t.message):r(`Unknown error occurred`)}finally{t(!1)}},[]),searchByVector:(0,H.useCallback)(async(e,n,i=10,o=0)=>{t(!0),r(null),a(null);try{a((await h(e,n,i,o)).results)}catch(e){e instanceof C?e.status===503?r(`Vector search not available: no vector index exists. Run promote & rebuild from the admin panel first.`):r(`API Error (${e.status}): ${e.message}`):e instanceof Error?r(e.message):r(`Unknown error occurred`)}finally{t(!1)}},[])}}function Ie({onTrackSelect:e,helperText:t=`Search by artist, album, or title`,...n}){let[r,i]=(0,H.useState)(``),[a,o]=(0,H.useState)([]),[l,u]=(0,H.useState)(!1),[d,f]=(0,H.useState)(null),p=(0,H.useCallback)(async e=>{if(!e.trim()){o([]);return}u(!0);try{o((await O({q:e.trim()})).files||[])}catch(e){console.error(`Failed to search tracks:`,e),o([])}finally{u(!1)}},[]),m=(0,H.useMemo)(()=>{let e;return t=>{if(clearTimeout(e),!t.trim()){o([]);return}e=setTimeout(()=>{p(t)},300)}},[p]),h=(0,H.useCallback)((e,t)=>{i(t),m(t)},[m]),g=(0,H.useCallback)((t,n)=>{f(n),e?.(n)},[e]),_=e=>[e.artist||`Unknown Artist`,e.album||`Unknown Album`,e.title||`Unknown Title`].filter(Boolean).join(` - `);return(0,$.jsx)(s,{options:a,loading:l,inputValue:r,onInputChange:h,value:d,onChange:g,getOptionLabel:_,isOptionEqualToValue:(e,t)=>e.file_id===t.file_id,renderOption:(e,t)=>(0,$.jsx)(B,{component:`li`,...e,children:(0,$.jsxs)(B,{sx:{display:`flex`,flexDirection:`column`,width:`100%`},children:[(0,$.jsx)(R,{variant:`body2`,sx:{fontWeight:500},children:_(t)}),(0,$.jsx)(R,{variant:`caption`,sx:{color:`text.secondary`},children:t.path})]})}),renderInput:e=>(0,$.jsx)(c,{...e,label:`Track Search`,placeholder:`Search by artist, album, or title...`,size:`small`,helperText:t,slotProps:{input:{...e.InputProps,endAdornment:(0,$.jsxs)($.Fragment,{children:[l?(0,$.jsx)(A,{color:`inherit`,size:20}):null,e.InputProps.endAdornment]})}}}),noOptionsText:`No tracks found`,...n})}var Le=[`discogs_effnet`,`discogs_musicnn`];function Re(){let[e]=w(),[o,s]=(0,H.useState)(Le[0]),[c,m]=(0,H.useState)(null),[h,g]=(0,H.useState)(10),[_,v]=(0,H.useState)(0);(0,H.useEffect)(()=>{let t=e.get(`fileId`);t&&!c&&(async()=>{try{let e=await j([t]);e.files&&e.files.length>0&&m(e.files[0])}catch(e){console.error(`Failed to load track from fileId:`,e)}})()},[e,c]);let{loading:y,error:te,results:b,searchByFileId:ne}=Fe(),S=(0,H.useCallback)(async()=>{c&&await ne(o,c.file_id,h,_)},[o,c,h,_,ne]);return(0,$.jsx)(I,{title:`Vector Search`,children:(0,$.jsxs)(t,{spacing:3,children:[(0,$.jsxs)(N,{children:[(0,$.jsx)(E,{title:`Search Parameters`}),(0,$.jsxs)(t,{spacing:2,children:[(0,$.jsxs)(r,{fullWidth:!0,size:`small`,children:[(0,$.jsx)(n,{children:`Backbone`}),(0,$.jsx)(a,{value:o,label:`Backbone`,onChange:e=>s(e.target.value),children:Le.map(e=>(0,$.jsx)(i,{value:e,children:e},e))})]}),(0,$.jsx)(Ie,{onTrackSelect:m,helperText:`Search by artist, album, or title to find a track`}),(0,$.jsxs)(B,{children:[(0,$.jsxs)(R,{variant:`body2`,gutterBottom:!0,children:[`Limit: `,h]}),(0,$.jsx)(Pe,{value:h,onChange:(e,t)=>g(t),min:1,max:100,valueLabelDisplay:`auto`})]}),(0,$.jsxs)(B,{children:[(0,$.jsxs)(R,{variant:`body2`,gutterBottom:!0,children:[`Min Score: `,_.toFixed(2)]}),(0,$.jsx)(Pe,{value:_,onChange:(e,t)=>v(t),min:0,max:1,step:.01,valueLabelDisplay:`auto`})]}),(0,$.jsx)(T,{variant:`contained`,onClick:S,disabled:y||!c,children:y?(0,$.jsx)(A,{size:24}):`Search`})]})]}),te&&(0,$.jsx)(ee,{severity:`error`,children:te}),b&&b.length>0&&(0,$.jsxs)(N,{children:[(0,$.jsx)(E,{title:`Results (${b.length})`}),(0,$.jsx)(x,{variant:`outlined`,children:(0,$.jsxs)(l,{size:`small`,children:[(0,$.jsx)(d,{children:(0,$.jsxs)(p,{children:[(0,$.jsx)(f,{children:`File ID`}),(0,$.jsx)(f,{align:`right`,children:`Score`})]})}),(0,$.jsx)(u,{children:b.map((e,t)=>(0,$.jsxs)(p,{children:[(0,$.jsx)(f,{children:(0,$.jsx)(R,{component:`a`,href:`#/browse?file=${encodeURIComponent(e.file_id)}`,sx:{textDecoration:`none`,color:`primary.main`},children:e.file_id})}),(0,$.jsx)(f,{align:`right`,children:e.score.toFixed(4)})]},t))})]})})]}),b&&b.length===0&&(0,$.jsx)(ee,{severity:`info`,children:`No similar tracks found. Try adjusting the search parameters.`})]})})}export{Re as VectorSearchPage};