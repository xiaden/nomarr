import{t as e}from"./Stack-ClVIuG4B.js";import{$ as t,A as n,B as r,C as i,D as a,E as o,F as s,G as c,H as l,I as u,J as d,K as f,L as p,M as m,N as h,O as g,P as _,Q as v,R as y,S as b,T as x,U as S,V as C,W as w,X as T,Y as E,Z as D,_ as O,a as k,at as A,b as j,c as M,ct as N,d as P,dt as F,et as ee,f as te,ft as ne,g as re,h as ie,ht as I,i as ae,it as oe,j as se,k as ce,l as le,lt as ue,m as de,mt as fe,n as pe,nt as me,o as he,ot as ge,p as _e,pt as ve,q as ye,r as be,rt as xe,s as Se,st as Ce,t as we,tt as Te,u as Ee,ut as De,v as Oe,w as ke,x as L,y as Ae,z as je}from"./PieChart-aQycFYOH.js";import{r as Me}from"./List-C6hBqZwZ.js";import{c as Ne,i as Pe,n as Fe,r as Ie,t as Le}from"./TextField-CUecFaSB.js";import"./Popper-W_WsQ9TP.js";import{n as Re,t as ze}from"./MenuItem-BU7fxczh.js";import"./listItemTextClasses-Dl-EhdJ0.js";import{a as Be,i as Ve,n as He,r as R,t as Ue}from"./TableRow-D7FwZohr.js";import{B as We,Bt as Ge,Cn as Ke,Dt as qe,G as Je,Gt as Ye,Ht as z,It as Xe,Jt as Ze,K as Qe,Lt as $e,Ot as B,Q as et,St as tt,V as nt,W as rt,Xt as it,Yt as V,Z as at,Zt as ot,_ as st,_t as H,an as U,at as W,c as ct,ct as G,dn as K,en as lt,ft as ut,gt as dt,i as ft,in as q,it as pt,kt as mt,l as ht,mt as gt,n as _t,on as vt,r as yt,t as bt,un as xt,ut as St,wt as Ct,xn as wt,z as Tt}from"./index-DF7hOdML.js";import{t as Et}from"./useNotification-xDGVdim3.js";function Dt(e){return U(`MuiCollapse`,e)}q(`MuiCollapse`,[`root`,`horizontal`,`vertical`,`entered`,`hidden`,`wrapper`,`wrapperInner`]);var J=Ke(wt()),Y=Ke(xt()),Ot=e=>{let{orientation:t,classes:n}=e;return V({root:[`root`,`${t}`],entered:[`entered`],hidden:[`hidden`],wrapper:[`wrapper`,`${t}`],wrapperInner:[`wrapperInner`,`${t}`]},Dt,n)},kt=z(`div`,{name:`MuiCollapse`,slot:`Root`,overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,t[n.orientation],n.state===`entered`&&t.entered,n.state===`exited`&&!n.in&&n.collapsedSize===`0px`&&t.hidden]}})($e(({theme:e})=>({height:0,overflow:`hidden`,transition:e.transitions.create(`height`),variants:[{props:{orientation:`horizontal`},style:{height:`auto`,width:0,transition:e.transitions.create(`width`)}},{props:{state:`entered`},style:{height:`auto`,overflow:`visible`}},{props:{state:`entered`,orientation:`horizontal`},style:{width:`auto`}},{props:({ownerState:e})=>e.state===`exited`&&!e.in&&e.collapsedSize===`0px`,style:{visibility:`hidden`}}]}))),At=z(`div`,{name:`MuiCollapse`,slot:`Wrapper`})({display:`flex`,width:`100%`,variants:[{props:{orientation:`horizontal`},style:{width:`auto`,height:`100%`}}]}),jt=z(`div`,{name:`MuiCollapse`,slot:`WrapperInner`})({width:`100%`,variants:[{props:{orientation:`horizontal`},style:{width:`auto`,height:`100%`}}]}),Mt=J.forwardRef(function(e,t){let n=Ge({props:e,name:`MuiCollapse`}),{addEndListener:r,children:i,className:a,collapsedSize:o=`0px`,component:s,easing:c,in:l,onEnter:u,onEntered:d,onEntering:f,onExit:p,onExited:m,onExiting:h,orientation:g=`vertical`,slots:_={},slotProps:v={},style:y,timeout:b=Ze.standard,TransitionComponent:x=qe,...S}=n,C={...n,orientation:g,collapsedSize:o},w=Ot(C),T=Ye(),E=Ct(),D=J.useRef(null),O=J.useRef(),k=typeof o==`number`?`${o}px`:o,A=g===`horizontal`,j=A?`width`:`height`,M=J.useRef(null),N=mt(t,M),P=e=>t=>{if(e){let n=M.current;t===void 0?e(n):e(n,t)}},F=()=>D.current?D.current[A?`clientWidth`:`clientHeight`]:0,ee=P((e,t)=>{D.current&&A&&(D.current.style.position=`absolute`),e.style[j]=k,u&&u(e,t)}),te=P((e,t)=>{let n=F();D.current&&A&&(D.current.style.position=``);let{duration:r,easing:i}=tt({style:y,timeout:b,easing:c},{mode:`enter`});if(b===`auto`){let t=T.transitions.getAutoHeightDuration(n);e.style.transitionDuration=`${t}ms`,O.current=t}else e.style.transitionDuration=typeof r==`string`?r:`${r}ms`;e.style[j]=`${n}px`,e.style.transitionTimingFunction=i,f&&f(e,t)}),ne=P((e,t)=>{e.style[j]=`auto`,d&&d(e,t)}),re=P(e=>{e.style[j]=`${F()}px`,p&&p(e)}),ie=P(m),I=P(e=>{let t=F(),{duration:n,easing:r}=tt({style:y,timeout:b,easing:c},{mode:`exit`});if(b===`auto`){let n=T.transitions.getAutoHeightDuration(t);e.style.transitionDuration=`${n}ms`,O.current=n}else e.style.transitionDuration=typeof n==`string`?n:`${n}ms`;e.style[j]=k,e.style.transitionTimingFunction=r,h&&h(e)}),ae=e=>{b===`auto`&&E.start(O.current||0,e),r&&r(M.current,e)},oe={slots:_,slotProps:v,component:s},[se,ce]=H(`root`,{ref:N,className:vt(w.root,a),elementType:kt,externalForwardedProps:oe,ownerState:C,additionalProps:{style:{[A?`minWidth`:`minHeight`]:k,...y}}}),[le,ue]=H(`wrapper`,{ref:D,className:w.wrapper,elementType:At,externalForwardedProps:oe,ownerState:C}),[de,fe]=H(`wrapperInner`,{className:w.wrapperInner,elementType:jt,externalForwardedProps:oe,ownerState:C});return(0,Y.jsx)(x,{in:l,onEnter:ee,onEntered:ne,onEntering:te,onExit:re,onExited:ie,onExiting:I,addEndListener:ae,nodeRef:M,timeout:b===`auto`?null:b,...S,children:(e,{ownerState:t,...n})=>{let r={...C,state:e};return(0,Y.jsx)(se,{...ce,className:vt(ce.className,{entered:w.entered,exited:!l&&k===`0px`&&w.hidden}[e]),ownerState:r,...n,children:(0,Y.jsx)(le,{...ue,ownerState:r,children:(0,Y.jsx)(de,{...fe,ownerState:r,children:i})})})}})});Mt&&(Mt.muiSupportAuto=!0);var Nt=Mt,Pt=J.createContext({});function Ft(e){return U(`MuiAccordion`,e)}var It=q(`MuiAccordion`,[`root`,`heading`,`rounded`,`expanded`,`disabled`,`gutters`,`region`]),Lt=e=>{let{classes:t,square:n,expanded:r,disabled:i,disableGutters:a}=e;return V({root:[`root`,!n&&`rounded`,r&&`expanded`,i&&`disabled`,!a&&`gutters`],heading:[`heading`],region:[`region`]},Ft,t)},Rt=z(dt,{name:`MuiAccordion`,slot:`Root`,overridesResolver:(e,t)=>{let{ownerState:n}=e;return[{[`& .${It.region}`]:t.region},t.root,!n.square&&t.rounded,!n.disableGutters&&t.gutters]}})($e(({theme:e})=>{let t={duration:e.transitions.duration.shortest};return{position:`relative`,transition:e.transitions.create([`margin`],t),overflowAnchor:`none`,"&::before":{position:`absolute`,left:0,top:-1,right:0,height:1,content:`""`,opacity:1,backgroundColor:(e.vars||e).palette.divider,transition:e.transitions.create([`opacity`,`background-color`],t)},"&:first-of-type":{"&::before":{display:`none`}},[`&.${It.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:`none`}}},[`&.${It.disabled}`]:{backgroundColor:(e.vars||e).palette.action.disabledBackground}}}),$e(({theme:e})=>({variants:[{props:e=>!e.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(e.vars||e).shape.borderRadius,borderBottomRightRadius:(e.vars||e).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:e=>!e.disableGutters,style:{[`&.${It.expanded}`]:{margin:`16px 0`}}}]}))),zt=z(`h3`,{name:`MuiAccordion`,slot:`Heading`})({all:`unset`}),Bt=z(`div`,{name:`MuiAccordion`,slot:`Region`})({}),Vt=J.forwardRef(function(e,t){let n=Ge({props:e,name:`MuiAccordion`}),{children:r,className:i,defaultExpanded:a=!1,disabled:o=!1,disableGutters:s=!1,expanded:c,onChange:l,square:u=!1,slots:d={},slotProps:f={},TransitionComponent:p,TransitionProps:m,...h}=n,[g,_]=Ne({controlled:c,default:a,name:`Accordion`,state:`expanded`}),v=J.useCallback(e=>{_(!g),l&&l(e,!g)},[g,l,_]),[y,...b]=J.Children.toArray(r),x=J.useMemo(()=>({expanded:g,disabled:o,disableGutters:s,toggle:v}),[g,o,s,v]),S={...n,square:u,disabled:o,disableGutters:s,expanded:g},C=Lt(S),w={slots:{transition:p,...d},slotProps:{transition:m,...f}},[T,E]=H(`root`,{elementType:Rt,externalForwardedProps:{...w,...h},className:vt(C.root,i),shouldForwardComponentProp:!0,ownerState:S,ref:t,additionalProps:{square:u}}),[D,O]=H(`heading`,{elementType:zt,externalForwardedProps:w,className:C.heading,ownerState:S}),[k,A]=H(`transition`,{elementType:Nt,externalForwardedProps:w,ownerState:S}),[j,M]=H(`region`,{elementType:Bt,externalForwardedProps:w,ownerState:S,className:C.region,additionalProps:{"aria-labelledby":y.props.id,id:y.props[`aria-controls`],role:`region`}});return(0,Y.jsxs)(T,{...E,children:[(0,Y.jsx)(D,{...O,children:(0,Y.jsx)(Pt.Provider,{value:x,children:y})}),(0,Y.jsx)(k,{in:g,timeout:`auto`,...A,children:(0,Y.jsx)(j,{...M,children:b})})]})});function Ht(e){return U(`MuiAccordionDetails`,e)}q(`MuiAccordionDetails`,[`root`]);var Ut=e=>{let{classes:t}=e;return V({root:[`root`]},Ht,t)},Wt=z(`div`,{name:`MuiAccordionDetails`,slot:`Root`})($e(({theme:e})=>({padding:e.spacing(1,2,2)}))),Gt=J.forwardRef(function(e,t){let n=Ge({props:e,name:`MuiAccordionDetails`}),{className:r,...i}=n,a=n;return(0,Y.jsx)(Wt,{className:vt(Ut(a).root,r),ref:t,ownerState:a,...i})});function Kt(e){return U(`MuiAccordionSummary`,e)}var qt=q(`MuiAccordionSummary`,[`root`,`expanded`,`focusVisible`,`disabled`,`gutters`,`contentGutters`,`content`,`expandIconWrapper`]),Jt=e=>{let{classes:t,expanded:n,disabled:r,disableGutters:i}=e;return V({root:[`root`,n&&`expanded`,r&&`disabled`,!i&&`gutters`],focusVisible:[`focusVisible`],content:[`content`,n&&`expanded`,!i&&`contentGutters`],expandIconWrapper:[`expandIconWrapper`,n&&`expanded`]},Kt,t)},Yt=z(gt,{name:`MuiAccordionSummary`,slot:`Root`})($e(({theme:e})=>{let t={duration:e.transitions.duration.shortest};return{display:`flex`,width:`100%`,minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create([`min-height`,`background-color`],t),[`&.${qt.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${qt.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`&:hover:not(.${qt.disabled})`]:{cursor:`pointer`},variants:[{props:e=>!e.disableGutters,style:{[`&.${qt.expanded}`]:{minHeight:64}}}]}})),Xt=z(`span`,{name:`MuiAccordionSummary`,slot:`Content`})($e(({theme:e})=>({display:`flex`,textAlign:`start`,flexGrow:1,margin:`12px 0`,variants:[{props:e=>!e.disableGutters,style:{transition:e.transitions.create([`margin`],{duration:e.transitions.duration.shortest}),[`&.${qt.expanded}`]:{margin:`20px 0`}}}]}))),Zt=z(`span`,{name:`MuiAccordionSummary`,slot:`ExpandIconWrapper`})($e(({theme:e})=>({display:`flex`,color:(e.vars||e).palette.action.active,transform:`rotate(0deg)`,transition:e.transitions.create(`transform`,{duration:e.transitions.duration.shortest}),[`&.${qt.expanded}`]:{transform:`rotate(180deg)`}}))),Qt=J.forwardRef(function(e,t){let n=Ge({props:e,name:`MuiAccordionSummary`}),{children:r,className:i,expandIcon:a,focusVisibleClassName:o,onClick:s,slots:c,slotProps:l,...u}=n,{disabled:d=!1,disableGutters:f,expanded:p,toggle:m}=J.useContext(Pt),h=e=>{m&&m(e),s&&s(e)},g={...n,expanded:p,disabled:d,disableGutters:f},_=Jt(g),v={slots:c,slotProps:l},[y,b]=H(`root`,{ref:t,shouldForwardComponentProp:!0,className:vt(_.root,i),elementType:Yt,externalForwardedProps:{...v,...u},ownerState:g,additionalProps:{focusRipple:!1,disableRipple:!0,disabled:d,"aria-expanded":p,focusVisibleClassName:vt(_.focusVisible,o)},getSlotProps:e=>({...e,onClick:t=>{e.onClick?.(t),h(t)}})}),[x,S]=H(`content`,{className:_.content,elementType:Xt,externalForwardedProps:v,ownerState:g}),[C,w]=H(`expandIconWrapper`,{className:_.expandIconWrapper,elementType:Zt,externalForwardedProps:v,ownerState:g});return(0,Y.jsxs)(y,{...b,children:[(0,Y.jsx)(x,{...S,children:r}),a&&(0,Y.jsx)(C,{...w,children:a})]})}),$t=Xe((0,Y.jsx)(`path`,{d:`M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z`}),`Close`),en=Xe((0,Y.jsx)(`path`,{d:`M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z`}),`ExpandMore`);function tn(e,t=`warning`){}var nn=e=>e.controlledCartesianAxisHighlight,rn=(e,t,n,r)=>r?[]:n===void 0?e===null?[]:[{axisId:t.axisIds[0],dataIndex:e}]:n.filter(e=>t.axis[e.axisId]!==void 0).map(e=>e);const an=fe(T,me,nn,c,rn);fe(v,xe,nn,c,rn);var on=(e,t,n,r,i,a,o)=>{if(o)return[];if(r!==void 0)return r.map(e=>K({},e,{value:n.axis[e.axisId]?.data?.[e.dataIndex]})).filter(({value:e})=>e!==void 0);let s=t!==null&&{axisId:n.axisIds[0],dataIndex:e,value:t},c=i&&n.axis[i.axisId]?.data?.[i.dataIndex],l=i&&c!=null&&K({},i,{value:c});if(a===`pointer`){if(s)return[s];if(l)return[l]}if(a===`keyboard`){if(l)return[l];if(s)return[s]}return[]};const sn=fe(T,D,me,nn,ye,ee,c,on),cn=fe(v,t,xe,nn,d,ee,c,on);var ln=(e,t)=>e===void 0?[t.axis[t.axisIds[0]]]:e.map(e=>t.axis[e.axisId]??null).filter(e=>e!==null);ve(nn,me,ln),ve(nn,xe,ln);function un(e){this._context=e}un.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function dn(e){return new un(e)}function fn(e){return e[0]}function pn(e){return e[1]}function mn(e,t){var r=y(!0),i=null,a=dn,o=null,s=se(c);e=typeof e==`function`?e:e===void 0?fn:y(e),t=typeof t==`function`?t:t===void 0?pn:y(t);function c(c){var l,u=(c=n(c)).length,d,f=!1,p;for(i??(o=a(p=s())),l=0;l<=u;++l)!(l<u&&r(d=c[l],l,c))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+e(d,l,c),+t(d,l,c));if(p)return o=null,p+``||null}return c.x=function(t){return arguments.length?(e=typeof t==`function`?t:y(+t),c):e},c.y=function(e){return arguments.length?(t=typeof e==`function`?e:y(+e),c):t},c.defined=function(e){return arguments.length?(r=typeof e==`function`?e:y(!!e),c):r},c.curve=function(e){return arguments.length?(a=e,i!=null&&(o=a(i)),c):a},c.context=function(e){return arguments.length?(e==null?i=o=null:o=a(i=e),c):i},c}function hn(e,t,r){var i=null,a=y(!0),o=null,s=dn,c=null,l=se(u);e=typeof e==`function`?e:e===void 0?fn:y(+e),t=typeof t==`function`?t:y(t===void 0?0:+t),r=typeof r==`function`?r:r===void 0?pn:y(+r);function u(u){var d,f,p,m=(u=n(u)).length,h,g=!1,_,v=Array(m),y=Array(m);for(o??(c=s(_=l())),d=0;d<=m;++d){if(!(d<m&&a(h=u[d],d,u))===g)if(g=!g)f=d,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),p=d-1;p>=f;--p)c.point(v[p],y[p]);c.lineEnd(),c.areaEnd()}g&&(v[d]=+e(h,d,u),y[d]=+t(h,d,u),c.point(i?+i(h,d,u):v[d],r?+r(h,d,u):y[d]))}if(_)return c=null,_+``||null}function d(){return mn().defined(a).curve(s).context(o)}return u.x=function(t){return arguments.length?(e=typeof t==`function`?t:y(+t),i=null,u):e},u.x0=function(t){return arguments.length?(e=typeof t==`function`?t:y(+t),u):e},u.x1=function(e){return arguments.length?(i=e==null?null:typeof e==`function`?e:y(+e),u):i},u.y=function(e){return arguments.length?(t=typeof e==`function`?e:y(+e),r=null,u):t},u.y0=function(e){return arguments.length?(t=typeof e==`function`?e:y(+e),u):t},u.y1=function(e){return arguments.length?(r=e==null?null:typeof e==`function`?e:y(+e),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(i).y(t)},u.defined=function(e){return arguments.length?(a=typeof e==`function`?e:y(!!e),u):a},u.curve=function(e){return arguments.length?(s=e,o!=null&&(c=s(o)),u):s},u.context=function(e){return arguments.length?(e==null?o=c=null:c=s(o=e),u):o},u}var gn=class{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t);break}this._x0=e,this._y0=t}};function _n(e){return new gn(e,!0)}function vn(e){return new gn(e,!1)}var yn={draw(e,t){let n=u(t/_);e.moveTo(n,0),e.arc(0,0,n,0,p)}},bn={draw(e,t){let n=u(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},xn=u(1/3),Sn=xn*2,Cn={draw(e,t){let n=u(t/Sn),r=n*xn;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},wn={draw(e,t){let n=u(t),r=-n/2;e.rect(r,r,n,n)}},Tn=.8908130915292852,En=s(_/10)/s(7*_/10),Dn=s(p/10)*En,On=-m(p/10)*En,kn={draw(e,t){let n=u(t*Tn),r=Dn*n,i=On*n;e.moveTo(0,-n),e.lineTo(r,i);for(let t=1;t<5;++t){let a=p*t/5,o=m(a),c=s(a);e.lineTo(c*n,-o*n),e.lineTo(o*r-c*i,c*r+o*i)}e.closePath()}},An=u(3),jn={draw(e,t){let n=-u(t/(An*3));e.moveTo(0,n*2),e.lineTo(-An*n,-n),e.lineTo(An*n,-n),e.closePath()}},X=-.5,Z=u(3)/2,Mn=1/u(12),Nn=(Mn/2+1)*3;const Pn=[yn,bn,Cn,wn,kn,jn,{draw(e,t){let n=u(t/Nn),r=n/2,i=n*Mn,a=r,o=n*Mn+n,s=-a,c=o;e.moveTo(r,i),e.lineTo(a,o),e.lineTo(s,c),e.lineTo(X*r-Z*i,Z*r+X*i),e.lineTo(X*a-Z*o,Z*a+X*o),e.lineTo(X*s-Z*c,Z*s+X*c),e.lineTo(X*r+Z*i,X*i-Z*r),e.lineTo(X*a+Z*o,X*o-Z*a),e.lineTo(X*s+Z*c,X*c-Z*s),e.closePath()}}];function Fn(e,t){let n=null,r=se(i);e=typeof e==`function`?e:y(e||yn),t=typeof t==`function`?t:y(t===void 0?64:+t);function i(){let i;if(n||=i=r(),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+``||null}return i.type=function(t){return arguments.length?(e=typeof t==`function`?t:y(t),i):e},i.size=function(e){return arguments.length?(t=typeof e==`function`?e:y(+e),i):t},i.context=function(e){return arguments.length?(n=e??null,i):n},i}function In(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Ln(e,t){this._context=e,this._k=(1-t)/6}Ln.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:In(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:In(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},(function e(t){function n(e){return new Ln(e,t)}return n.tension=function(t){return e(+t)},n})(0);function Rn(e,t,n){var r=e._x1,i=e._y1,a=e._x2,o=e._y2;if(e._l01_a>1e-12){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>1e-12){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*l+e._x1*e._l23_2a-t*e._l12_2a)/u,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(r,i,a,o,e._x2,e._y2)}function zn(e,t){this._context=e,this._alpha=t}zn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=(n*n+r*r)**+this._alpha)}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Rn(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Bn=(function e(t){function n(e){return t?new zn(e,t):new Ln(e,0)}return n.alpha=function(t){return e(+t)},n})(.5);function Vn(e){return e<0?-1:1}function Hn(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(Vn(a)+Vn(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function Un(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Wn(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,s=(a-r)/3;e._context.bezierCurveTo(r+s,i+s*t,a-s,o-s*n,a,o)}function Gn(e){this._context=e}Gn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Wn(this,this._t0,Un(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Wn(this,Un(this,n=Hn(this,e,t)),n);break;default:Wn(this,this._t0,n=Hn(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Kn(e){this._context=new qn(e)}(Kn.prototype=Object.create(Gn.prototype)).point=function(e,t){Gn.prototype.point.call(this,t,e)};function qn(e){this._context=e}qn.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}};function Jn(e){return new Gn(e)}function Yn(e){return new Kn(e)}function Xn(e){this._context=e}Xn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Zn(e),i=Zn(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Zn(e){var t,n=e.length-1,r,i=Array(n),a=Array(n),o=Array(n);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/a[t-1],a[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function Qn(e){return new Xn(e)}function $n(e,t){this._context=e,this._t=t}$n.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}this._x=e,this._y=t}};function er(e){return new $n(e,.5)}function tr(e){return new $n(e,0)}function nr(e){return new $n(e,1)}function rr(e){if(A(e))return t=>(e(t)??0)+e.bandwidth()/2;let t=e.domain();return t[0]===t[1]?n=>n===t[0]?e(n):NaN:t=>e(t)}function ir(){return Ae(`bar`)}function ar(){return Ae(`line`)}function or(e){let t=x(),n=F(t,Oe,e),r=F(t,O,e);return{isHighlighted:n,isFaded:!n&&r}}function sr(e){return te({d:e.d},{createInterpolator:(e,t)=>{let n=Ce(e.d,t.d);return e=>({d:n(e)})},applyProps:(e,{d:t})=>e.setAttribute(`d`,t),transformProps:e=>e,skip:e.skipAnimation,ref:e.ref})}function cr(e,t){let n=N(e.x,t.x),r=N(e.y,t.y),i=N(e.width,t.width),a=N(e.height,t.height);return e=>({x:n(e),y:r(e),width:i(e),height:a(e)})}function lr(e){let t={x:e.layout===`vertical`?e.x:e.xOrigin,y:e.layout===`vertical`?e.yOrigin:e.y,width:e.layout===`vertical`?e.width:0,height:e.layout===`vertical`?0:e.height};return te({x:e.x,y:e.y,width:e.width,height:e.height},{createInterpolator:cr,applyProps(e,t){e.setAttribute(`x`,t.x.toString()),e.setAttribute(`y`,t.y.toString()),e.setAttribute(`width`,t.width.toString()),e.setAttribute(`height`,t.height.toString())},transformProps:e=>e,initialProps:t,skip:e.skipAnimation,ref:e.ref})}function ur(e,t){let n=N(e.x,t.x),r=N(e.y,t.y),i=N(e.width,t.width),a=N(e.height,t.height);return e=>({x:n(e),y:r(e),width:i(e),height:a(e)})}function dr(e){let{initialX:t,currentX:n,initialY:r,currentY:i}=e.placement===`outside`?mr(e):pr(e),a={x:t,y:r,width:e.width,height:e.height};return te({x:n,y:i,width:e.width,height:e.height},{createInterpolator:ur,transformProps:e=>e,applyProps(e,t){e.setAttribute(`x`,t.x.toString()),e.setAttribute(`y`,t.y.toString()),e.setAttribute(`width`,t.width.toString()),e.setAttribute(`height`,t.height.toString())},initialProps:a,skip:e.skipAnimation,ref:e.ref})}var fr=4;function pr(e){return{initialX:e.layout===`vertical`?e.x+e.width/2:e.xOrigin,initialY:e.layout===`vertical`?e.yOrigin:e.y+e.height/2,currentX:e.x+e.width/2,currentY:e.y+e.height/2}}function mr(e){let t=0,n=0,r=0,i=0;return e.layout===`vertical`?(e.y<e.yOrigin?(t=e.yOrigin-fr,n=e.y-fr):(t=e.yOrigin+fr,n=e.y+e.height+fr),{initialX:e.x+e.width/2,currentX:e.x+e.width/2,initialY:t,currentY:n}):(e.x<e.xOrigin?(r=e.xOrigin,i=e.x-fr):(r=e.xOrigin,i=e.x+e.width+fr),{initialX:r,currentX:i,initialY:e.y+e.height/2,currentY:e.y+e.height/2})}function hr(e){return te({d:e.d},{createInterpolator:(e,t)=>{let n=Ce(e.d,t.d);return e=>({d:n(e)})},applyProps:(e,{d:t})=>e.setAttribute(`d`,t),skip:e.skipAnimation,transformProps:e=>e,ref:e.ref})}function gr({value:e,onChange:t,options:n,placeholder:r=`Type or select...`,disabled:i=!1,...a}){let[o,s]=(0,J.useState)(!1),[c,l]=(0,J.useState)(n),u=(0,J.useRef)(null);(0,J.useEffect)(()=>{l(e?n.filter(t=>t.toLowerCase().includes(e.toLowerCase())):n)},[e,n]),(0,J.useEffect)(()=>{let e=e=>{u.current&&!u.current.contains(e.target)&&s(!1)};return document.addEventListener(`mousedown`,e),()=>document.removeEventListener(`mousedown`,e)},[]);let d=e=>{t(e.target.value),s(!0)},f=e=>{t(e),s(!1)};return(0,Y.jsxs)(W,{...a,ref:u,sx:{position:`relative`,...a.sx},children:[(0,Y.jsx)(Le,{type:`text`,value:e,onChange:d,onFocus:()=>s(!0),placeholder:r,disabled:i,fullWidth:!0,size:`small`,sx:{"& .MuiOutlinedInput-root":{bgcolor:i?`background.paper`:`background.default`}}}),o&&!i&&c.length>0&&(0,Y.jsx)(W,{sx:{position:`absolute`,top:`100%`,left:0,right:0,maxHeight:`200px`,overflowY:`auto`,bgcolor:`background.default`,border:1,borderColor:`divider`,borderTop:`none`,borderRadius:`0 0 4px 4px`,boxShadow:2,zIndex:1e3},children:c.map((e,t)=>(0,Y.jsx)(W,{onClick:()=>f(e),sx:{p:1.5,cursor:`pointer`,fontSize:`0.875rem`,borderBottom:t<c.length-1?1:`none`,borderColor:`divider`,"&:hover":{bgcolor:`action.hover`}},children:e},t))})]})}function _r({libraryId:t}){let[n,r]=(0,J.useState)([]),[i,a]=(0,J.useState)([]),[o,s]=(0,J.useState)(``),[c,l]=(0,J.useState)(``),[u,d]=(0,J.useState)([]),[f,p]=(0,J.useState)([]),[m,h]=(0,J.useState)(null),[g,_]=(0,J.useState)(!1),[v,y]=(0,J.useState)(null);(0,J.useEffect)(()=>{b()},[]),(0,J.useEffect)(()=>{o?x(o):(a([]),l(``))},[o]);let b=async()=>{try{r((await ct(!0)).tag_keys)}catch(e){console.error(`[TagCoOccurrence] Failed to load tag keys:`,e)}},x=async e=>{try{let t=await ht(e,!0),n=new Set;for(let e of t.tag_keys)if(e.startsWith(`[`)&&e.endsWith(`]`))try{let t=JSON.parse(e);Array.isArray(t)?t.forEach(e=>n.add(String(e))):n.add(e)}catch{n.add(e)}else n.add(e);a(Array.from(n).sort())}catch(e){console.error(`[TagCoOccurrence] Failed to load tag values:`,e),a([])}},S=(e,t)=>u.some(n=>n.key===e&&n.value===t)||f.some(n=>n.key===e&&n.value===t),C=()=>{o&&c&&!u.some(e=>e.key===o&&e.value===c)&&u.length<16&&d([...u,{key:o,value:c}])},w=()=>{o&&c&&!f.some(e=>e.key===o&&e.value===c)&&f.length<16&&p([...f,{key:o,value:c}])},T=e=>{d(u.filter((t,n)=>n!==e))},E=e=>{p(f.filter((t,n)=>n!==e))},D=async()=>{if(u.length===0||f.length===0){y(`Both X and Y axes must have at least one tag`);return}try{_(!0),y(null),h(await nt({x:u,y:f},t))}catch(e){y(e instanceof Error?e.message:`Failed to build matrix`),console.error(`[TagCoOccurrence] Matrix build error:`,e)}finally{_(!1)}},O=(e,t)=>{if(e===0)return`#1a1a1a`;let n=Math.min(e/t,1);return`rgb(${Math.floor(30+n*44)}, ${Math.floor(30+n*128)}, ${Math.floor(30+n*225)})`},k=m?.matrix?Math.max(...m.matrix.flat(),1):1;return(0,Y.jsxs)(et,{children:[(0,Y.jsx)(at,{title:`Tag Co-Occurrence Matrix`}),(0,Y.jsxs)(e,{spacing:2,sx:{mb:2.5},children:[(0,Y.jsxs)(W,{sx:{display:`flex`,gap:1.5,alignItems:`flex-end`},children:[(0,Y.jsxs)(W,{sx:{flex:1},children:[(0,Y.jsx)(G,{variant:`body2`,sx:{mb:.5,fontWeight:500},children:`Tag Key`}),(0,Y.jsx)(gr,{value:o,onChange:s,options:n,placeholder:`Select tag key...`})]}),(0,Y.jsxs)(W,{sx:{flex:1},children:[(0,Y.jsx)(G,{variant:`body2`,sx:{mb:.5,fontWeight:500},children:`Tag Value`}),(0,Y.jsx)(gr,{value:c,onChange:l,options:i,placeholder:`Select tag value...`,disabled:!o})]}),(0,Y.jsx)(pt,{onClick:C,disabled:!o||!c||u.length>=16||S(o,c),variant:`contained`,size:`small`,children:`Add to X`}),(0,Y.jsx)(pt,{onClick:w,disabled:!o||!c||f.length>=16||S(o,c),variant:`contained`,color:`secondary`,size:`small`,children:`Add to Y`})]}),(0,Y.jsxs)(W,{children:[(0,Y.jsxs)(G,{variant:`body2`,sx:{mb:.5,fontWeight:500},children:[`X Axis (`,u.length,`/16)`]}),(0,Y.jsxs)(W,{sx:{display:`flex`,flexWrap:`wrap`,gap:1,p:1.5,bgcolor:`background.default`,border:1,borderColor:`divider`,borderRadius:1,minHeight:80},children:[u.length===0&&(0,Y.jsx)(G,{variant:`body2`,color:`text.secondary`,children:`No tags added to X axis yet`}),u.map((e,t)=>(0,Y.jsx)(Re,{label:`${e.key}: ${e.value}`,onDelete:()=>T(t),deleteIcon:(0,Y.jsx)($t,{}),size:`small`},t))]})]}),(0,Y.jsxs)(W,{children:[(0,Y.jsxs)(G,{variant:`body2`,sx:{mb:.5,fontWeight:500},children:[`Y Axis (`,f.length,`/16)`]}),(0,Y.jsxs)(W,{sx:{display:`flex`,flexWrap:`wrap`,gap:1,p:1.5,bgcolor:`background.default`,border:1,borderColor:`divider`,borderRadius:1,minHeight:80},children:[f.length===0&&(0,Y.jsx)(G,{variant:`body2`,color:`text.secondary`,children:`No tags added to Y axis yet`}),f.map((e,t)=>(0,Y.jsx)(Re,{label:`${e.key}: ${e.value}`,onDelete:()=>E(t),deleteIcon:(0,Y.jsx)($t,{}),size:`small`},t))]})]}),(0,Y.jsx)(pt,{onClick:D,disabled:g||u.length===0||f.length===0,variant:`contained`,fullWidth:!0,children:g?`Building Matrix...`:`Build Matrix`})]}),v&&(0,Y.jsx)(G,{color:`error`,sx:{mb:2},children:v}),m&&(0,Y.jsx)(W,{sx:{overflowX:`auto`,mt:2.5},children:(0,Y.jsxs)(Be,{size:`small`,sx:{minWidth:300},children:[(0,Y.jsx)(He,{children:(0,Y.jsxs)(Ue,{children:[(0,Y.jsx)(R,{sx:{bgcolor:`background.default`,borderBottom:2,borderColor:`divider`,fontWeight:600},children:`Y \\ X`}),m.x.map((e,t)=>(0,Y.jsxs)(R,{sx:{bgcolor:`background.default`,borderBottom:2,borderColor:`divider`,fontWeight:600},children:[e.key,`:`,(0,Y.jsx)(`br`,{}),e.value]},t))]})}),(0,Y.jsx)(Ve,{children:m.y.map((e,t)=>(0,Y.jsxs)(Ue,{children:[(0,Y.jsxs)(R,{sx:{borderColor:`divider`,fontWeight:600},children:[e.key,`: `,e.value]}),m.x.map((e,n)=>(0,Y.jsx)(R,{align:`center`,sx:{borderColor:`divider`,bgcolor:O(m.matrix[t][n],k),fontWeight:m.matrix[t][n]>0?600:`normal`},children:m.matrix[t][n]},n))]},t))})]})})]})}var vr=`nomarr:insights:accordion:`;function yr({storageKey:e,title:t,defaultExpanded:n=!0,children:r,secondary:i}){let a=`${vr}${e}`,[o,s]=(0,J.useState)(()=>{try{let e=localStorage.getItem(a);if(e!==null)return e===`true`}catch{}return n}),c=(0,J.useCallback)((e,t)=>{s(t);try{localStorage.setItem(a,String(t))}catch{}},[a]);return(0,J.useEffect)(()=>{let e=e=>{e.key===a&&e.newValue!==null&&s(e.newValue===`true`)};return window.addEventListener(`storage`,e),()=>window.removeEventListener(`storage`,e)},[a]),(0,Y.jsxs)(Vt,{expanded:o,onChange:c,children:[(0,Y.jsxs)(Qt,{expandIcon:(0,Y.jsx)(en,{}),children:[(0,Y.jsx)(G,{variant:`h6`,sx:{flexGrow:1},children:t}),i]}),(0,Y.jsx)(Gt,{children:r})]})}function br({sectionId:e,title:t,defaultExpanded:n=!0,children:r,secondary:i}){return(0,Y.jsx)(dt,{elevation:1,sx:{mb:2},children:(0,Y.jsx)(yr,{storageKey:e,title:t,defaultExpanded:n,secondary:i,children:(0,Y.jsx)(W,{sx:{px:1},children:r})})})}function xr({libraryId:e}){return(0,Y.jsx)(br,{sectionId:`advanced`,title:`Advanced Analytics`,defaultExpanded:!1,children:(0,Y.jsx)(_r,{libraryId:e})})}function Sr(e){return U(`MuiBarElement`,e)}const Cr=q(`MuiBarElement`,[`root`,`highlighted`,`faded`,`series`]),wr=e=>{let{classes:t,id:n,isHighlighted:r,isFaded:i}=e;return V({root:[`root`,`series-${n}`,r&&`highlighted`,i&&`faded`]},Sr,t)};var Tr=[`ownerState`,`skipAnimation`,`id`,`dataIndex`,`xOrigin`,`yOrigin`];function Er(e){let{ownerState:t}=e,n=B(e,Tr),r=lr(e);return(0,Y.jsx)(`rect`,K({},n,{filter:t.isHighlighted?`brightness(120%)`:void 0,opacity:t.isFaded?.3:1,"data-highlighted":t.isHighlighted||void 0,"data-faded":t.isFaded||void 0},r))}function Dr(e){return F(x(),f,e)}var Or=[`id`,`dataIndex`,`classes`,`color`,`slots`,`slotProps`,`style`,`onClick`,`skipAnimation`,`layout`,`x`,`xOrigin`,`y`,`yOrigin`,`width`,`height`];function kr(e){let{id:t,dataIndex:n,classes:r,color:i,slots:a,slotProps:o,style:s,onClick:c,skipAnimation:l,layout:u,x:d,xOrigin:f,y:p,yOrigin:m,width:h,height:g}=e,_=B(e,Or),v=J.useMemo(()=>({type:`bar`,seriesId:t,dataIndex:n}),[t,n]),y=M(v),{isFaded:b,isHighlighted:x}=or(v),S={id:t,dataIndex:n,classes:r,color:i,isFaded:b,isHighlighted:x,isFocused:Dr(J.useMemo(()=>({seriesType:`bar`,seriesId:t,dataIndex:n}),[t,n]))},C=wr(S),w=a?.bar??Er;return(0,Y.jsx)(w,K({},Me({elementType:w,externalSlotProps:o?.bar,externalForwardedProps:_,additionalProps:K({},y,{id:t,dataIndex:n,color:i,x:d,xOrigin:f,y:p,yOrigin:m,width:h,height:g,style:s,onClick:c,cursor:c?`pointer`:`unset`,stroke:`none`,fill:i,skipAnimation:l,layout:u}),className:C.root,ownerState:S})))}function Ar(e,t){let n=N(e.x,t.x),r=N(e.y,t.y),i=N(e.width,t.width),a=N(e.height,t.height),o=N(e.borderRadius,t.borderRadius);return e=>({x:n(e),y:r(e),width:i(e),height:a(e),borderRadius:o(e)})}function jr(e){let t={x:e.layout===`vertical`?e.x:e.xOrigin,y:e.layout===`vertical`?e.yOrigin:e.y,width:e.layout===`vertical`?e.width:0,height:e.layout===`vertical`?0:e.height,borderRadius:e.borderRadius};return te({x:e.x,y:e.y,width:e.width,height:e.height,borderRadius:e.borderRadius},{createInterpolator:Ar,transformProps:t=>({d:Nr(e.hasNegative,e.hasPositive,e.layout,t.x,t.y,t.width,t.height,e.xOrigin,e.yOrigin,t.borderRadius)}),applyProps(e,{d:t}){t&&e.setAttribute(`d`,t)},initialProps:t,skip:e.skipAnimation,ref:e.ref})}function Mr(e){let{maskId:t,x:n,y:r,width:i,height:a,skipAnimation:o}=e,{ref:s,d:c}=jr({layout:e.layout??`vertical`,hasNegative:e.hasNegative,hasPositive:e.hasPositive,xOrigin:e.xOrigin,yOrigin:e.yOrigin,x:n,y:r,width:i,height:a,borderRadius:e.borderRadius??0,skipAnimation:o});return!e.borderRadius||e.borderRadius<=0?null:(0,Y.jsx)(`clipPath`,{id:t,children:(0,Y.jsx)(`path`,{ref:s,d:c})})}function Nr(e,t,n,r,i,a,o,s,c,l){if(n===`vertical`){if(t&&e){let e=Math.min(l,a/2,o/2);return`M${r},${i+o/2} v${-(o/2-e)} a${e},${e} 0 0 1 ${e},${-e} h${a-e*2} a${e},${e} 0 0 1 ${e},${e} v${o-2*e} a${e},${e} 0 0 1 ${-e},${e} h${-(a-e*2)} a${e},${e} 0 0 1 ${-e},${-e} v${-(o/2-e)}`}let n=Math.min(l,a/2);if(t)return`M${r},${Math.max(c,i+n)} v${Math.min(0,-(c-i-n))} a${n},${n} 0 0 1 ${n},${-n} h${a-n*2} a${n},${n} 0 0 1 ${n},${n} v${Math.max(0,c-i-n)} Z`;if(e)return`M${r},${Math.min(c,i+o-n)} v${Math.max(0,o-n)} a${n},${n} 0 0 0 ${n},${n} h${a-n*2} a${n},${n} 0 0 0 ${n},${-n} v${-Math.max(0,o-n)} Z`}if(n===`horizontal`){if(t&&e){let e=Math.min(l,a/2,o/2);return`M${r+a/2},${i} h${a/2-e} a${e},${e} 0 0 1 ${e},${e} v${o-e*2} a${e},${e} 0 0 1 ${-e},${e} h${-(a-2*e)} a${e},${e} 0 0 1 ${-e},${-e} v${-(o-e*2)} a${e},${e} 0 0 1 ${e},${-e} h${a/2-e}`}let n=Math.min(l,o/2);if(t)return`M${Math.min(s,r-n)},${i} h${a} a${n},${n} 0 0 1 ${n},${n} v${o-n*2} a${n},${n} 0 0 1 ${-n},${n} h${-a} Z`;if(e)return`M${Math.max(s,r+a+n)},${i} h${-a} a${n},${n} 0 0 0 ${-n},${n} v${o-n*2} a${n},${n} 0 0 0 ${n},${n} h${a} Z`}}function Pr(e){return U(`MuiBarLabel`,e)}const Fr=q(`MuiBarLabel`,[`root`,`highlighted`,`faded`,`animate`]),Ir=e=>{let{classes:t,seriesId:n,isFaded:r,isHighlighted:i,skipAnimation:a}=e;return V({root:[`root`,`series-${n}`,i&&`highlighted`,r&&`faded`,!a&&`animate`]},Pr,t)};function Lr(e){let{barLabel:t,value:n,dataIndex:r,seriesId:i,height:a,width:o}=e;return t===`value`?n?n?.toString():null:t({seriesId:i,dataIndex:r,value:n},{bar:{height:a,width:o}})}var Rr=[`seriesId`,`dataIndex`,`color`,`isFaded`,`isHighlighted`,`classes`,`skipAnimation`,`layout`,`xOrigin`,`yOrigin`,`placement`];const zr=z(`text`,{name:`MuiBarLabel`,slot:`Root`,overridesResolver:(e,t)=>[{[`&.${Fr.faded}`]:t.faded},{[`&.${Fr.highlighted}`]:t.highlighted},t.root]})(({theme:e})=>K({},e?.typography?.body2,{stroke:`none`,fill:(e.vars||e)?.palette?.text?.primary,transitionProperty:`opacity, fill`,transitionDuration:`300ms`,transitionTimingFunction:de,pointerEvents:`none`}));function Br(e){let t=I({props:e,name:`MuiBarLabel`}),{isFaded:n}=t,r=B(t,Rr),i=dr(t);return(0,Y.jsx)(zr,K({textAnchor:Vr(t),dominantBaseline:Hr(t),opacity:n?.3:1},r,i))}function Vr({placement:e,layout:t,xOrigin:n,x:r}){return e===`outside`&&t===`horizontal`?r<n?`end`:`start`:`middle`}function Hr({placement:e,layout:t,yOrigin:n,y:r}){return e===`outside`?t===`horizontal`?`central`:r<n?`auto`:`hanging`:`central`}var Ur=[`seriesId`,`classes`,`color`,`dataIndex`,`barLabel`,`slots`,`slotProps`,`xOrigin`,`yOrigin`,`x`,`y`,`width`,`height`,`value`,`skipAnimation`,`layout`,`barLabelPlacement`],Wr=[`ownerState`];function Gr(e){let{seriesId:t,classes:n,color:r,dataIndex:i,barLabel:a,slots:o,slotProps:s,xOrigin:c,yOrigin:l,x:u,y:d,width:f,height:p,value:m,skipAnimation:h,layout:g,barLabelPlacement:_}=e,v=B(e,Ur),{isFaded:y,isHighlighted:b}=or({seriesId:t,dataIndex:i}),x={seriesId:t,classes:n,color:r,isFaded:y,isHighlighted:b,dataIndex:i,skipAnimation:h,layout:g},S=Ir(x),C=o?.barLabel??Br,w=Me({elementType:C,externalSlotProps:s?.barLabel,additionalProps:K({},v,{xOrigin:c,yOrigin:l,x:u,y:d,width:f,height:p,placement:_,className:S.root}),ownerState:x}),{ownerState:T}=w,E=B(w,Wr);if(!a)return null;let D=Lr({barLabel:a,value:m,dataIndex:i,seriesId:t,height:p,width:f});return D?(0,Y.jsx)(C,K({},E,T,{children:D})):null}var Kr=[`processedSeries`,`className`,`skipAnimation`];function qr(e){let{processedSeries:t,className:n,skipAnimation:r}=e,i=B(e,Kr),{seriesId:a,data:o,layout:s,xOrigin:c,yOrigin:l}=t,u=t.barLabel??e.barLabel;return u?(0,Y.jsx)(`g`,{className:n,"data-series":a,children:o.map(({x:e,y:n,dataIndex:o,color:d,value:f,width:p,height:m})=>(0,Y.jsx)(Gr,K({seriesId:a,dataIndex:o,value:f,color:d,xOrigin:c,yOrigin:l,x:e,y:n,width:p,height:m,skipAnimation:r??!1,layout:s??`vertical`},i,{barLabel:u,barLabelPlacement:t.barLabelPlacement||`center`}),o))},a):null}function Jr(){return F(x(),oe)}var Yr=(e,t)=>{let n=`${e}-axis`,r=`${e}Axis`;return t===(e===`x`?`DEFAULT_X_AXIS_KEY`:`DEFAULT_Y_AXIS_KEY`)?`The first \`${r}\``:`The ${n} with id "${t}"`};function Xr(e,t,n,r,i,a,o){let s=i[r],c=o[a],l=e?s:c,u=e?c:s,d=e?r:a,f=e?a:r,p=e?`x`:`y`,m=e?`y`:`x`;if(l.scaleType!==`band`)throw Error(`MUI X Charts: ${Yr(p,d)} should be of type "band" to display the bar series of id "${t}".`);if(l.data===void 0)throw Error(`MUI X Charts: ${Yr(p,d)} should have data property.`);if(u.scaleType===`band`||u.scaleType===`point`)throw Error(`MUI X Charts: ${Yr(m,f)} should be a continuous type to display the bar series of id "${t}".`)}function Zr(e,t,n){let r=ir()??{series:{},stackingGroups:[],seriesOrder:[]},a=b().xAxisIds[0],o=i().yAxisIds[0],s=j(),{series:c,stackingGroups:l}=r,u={};return{completedData:l.flatMap(({ids:r},i)=>{let d=e.left,f=e.left+e.width,p=e.top,m=e.top+e.height;return r.map(e=>{let r=c[e].xAxisId??a,h=c[e].yAxisId??o,_=c[e].layout,v=t[r],y=n[h],b=c[e].layout===`vertical`,x=(b?y.reverse:v.reverse)??!1;Xr(b,e,c[e].stackedData.length,r,t,h,n);let S=b?v:y,C=v.scale,w=y.scale,T=Math.round(C(0)??0),E=Math.round(w(0)??0),D=ce(c[e],t[r],n[h]),O=[];for(let t=0;t<S.data.length;t+=1){let n=g({verticalLayout:b,xAxisConfig:v,yAxisConfig:y,series:c[e],dataIndex:t,numberOfGroups:l.length,groupIndex:i});if(n==null)continue;let r=c[e].stack,a=K({seriesId:e,dataIndex:t},n,{color:D(t),value:c[e].data[t],maskId:`${s}_${r||e}_${i}_${t}`});if(a.x>f||a.x+a.width<d||a.y>m||a.y+a.height<p)continue;u[a.maskId]||(u[a.maskId]={id:a.maskId,width:0,height:0,hasNegative:!1,hasPositive:!1,layout:_,xOrigin:T,yOrigin:E,x:0,y:0});let o=u[a.maskId];o.width=_===`vertical`?a.width:o.width+a.width,o.height=_===`vertical`?o.height+a.height:a.height,o.x=Math.min(o.x===0?1/0:o.x,a.x),o.y=Math.min(o.y===0?1/0:o.y,a.y);let h=a.value??0;o.hasNegative=o.hasNegative||(x?h>0:h<0),o.hasPositive=o.hasPositive||(x?h<0:h>0),O.push(a)}return{seriesId:e,barLabel:c[e].barLabel,barLabelPlacement:c[e].barLabelPlacement,data:O,layout:_,xOrigin:T,yOrigin:E}})}),masksData:Object.values(u)}}function Qr(e){return U(`MuiBar`,e)}q(`MuiBar`,[`root`,`series`,`seriesLabels`]);const $r=e=>V({root:[`root`],series:[`series`],seriesLabels:[`seriesLabels`]},Qr,e);var ei=[`skipAnimation`,`onItemClick`,`borderRadius`,`barLabel`],ti=z(`g`,{name:`MuiBarPlot`,slot:`Root`})({[`& .${Cr.root}`]:{transitionProperty:`opacity, fill`,transitionDuration:`300ms`,transitionTimingFunction:de}});function ni(e){let{skipAnimation:t,onItemClick:n,borderRadius:r,barLabel:a}=e,o=B(e,ei),s=Se(Jr()||t),{xAxis:c}=b(),{yAxis:l}=i(),{completedData:u,masksData:d}=Zr(L(),c,l),f=!r||r<=0,p=$r();return(0,Y.jsxs)(ti,{className:p.root,children:[!f&&d.map(({id:e,x:t,y:n,xOrigin:i,yOrigin:a,width:o,height:c,hasPositive:l,hasNegative:u,layout:d})=>(0,Y.jsx)(Mr,{maskId:e,borderRadius:r,hasNegative:u,hasPositive:l,layout:d,x:t,y:n,xOrigin:i,yOrigin:a,width:o,height:c,skipAnimation:s??!1},e)),u.map(({seriesId:e,layout:t,xOrigin:r,yOrigin:i,data:a})=>(0,Y.jsx)(`g`,{"data-series":e,className:p.series,children:a.map(({dataIndex:a,color:c,maskId:l,x:u,y:d,width:p,height:m})=>{let h=(0,Y.jsx)(kr,K({id:e,dataIndex:a,color:c,skipAnimation:s??!1,layout:t??`vertical`,x:u,xOrigin:r,y:d,yOrigin:i,width:p,height:m},o,{onClick:n&&(t=>{n(t,{type:`bar`,seriesId:e,dataIndex:a})})}),a);return f?h:(0,Y.jsx)(`g`,{clipPath:`url(#${l})`,children:h},a)})},e)),u.map(e=>(0,Y.jsx)(qr,K({className:p.seriesLabels,processedSeries:e,skipAnimation:s,barLabel:a},o),e.seriesId))]})}function ri(){let[e,t]=J.useState(!1);return J.useEffect(()=>{t(!0)},[]),e}function ii(e){return typeof e==`number`&&!Number.isFinite(e)}function ai(e,t){return Math.abs(t.getFullYear()-e.getFullYear())}function oi(e,t){return Math.abs(t.getFullYear()*12+t.getMonth()-12*e.getFullYear()-e.getMonth())}function si(e,t){return Math.abs(t.getTime()-e.getTime())/(1e3*60*60*24)}function ci(e,t){return Math.abs(t.getTime()-e.getTime())/(1e3*60*60)}const li={years:{getTickNumber:ai,isTick:(e,t)=>t.getFullYear()!==e.getFullYear(),format:e=>e.getFullYear().toString()},quarterly:{getTickNumber:(e,t)=>Math.floor(oi(e,t)/3),isTick:(e,t)=>t.getMonth()!==e.getMonth()&&t.getMonth()%3==0,format:new Intl.DateTimeFormat(`default`,{month:`short`}).format},months:{getTickNumber:oi,isTick:(e,t)=>t.getMonth()!==e.getMonth(),format:new Intl.DateTimeFormat(`default`,{month:`short`}).format},biweekly:{getTickNumber:(e,t)=>si(e,t)/14,isTick:(e,t)=>(t.getDay()<e.getDay()||si(t,e)>7)&&Math.floor(t.getDate()/7)%2==1,format:new Intl.DateTimeFormat(`default`,{day:`numeric`}).format},weeks:{getTickNumber:(e,t)=>si(e,t)/7,isTick:(e,t)=>t.getDay()<e.getDay()||si(t,e)>=7,format:new Intl.DateTimeFormat(`default`,{day:`numeric`}).format},days:{getTickNumber:si,isTick:(e,t)=>t.getDate()!==e.getDate(),format:new Intl.DateTimeFormat(`default`,{day:`numeric`}).format},hours:{getTickNumber:ci,isTick:(e,t)=>t.getHours()!==e.getHours(),format:new Intl.DateTimeFormat(`default`,{hour:`2-digit`,minute:`2-digit`}).format}};var ui={start:0,extremities:0,end:1,middle:.5};function di(e,t,n){return e(t)-(e.step()-e.bandwidth())/2+ui[n]*e.step()}function fi(e,t,n){let r=Math.abs(t[1]-t[0]),i=Math.ceil(e.length/(r/n));return Number.isNaN(i)||i<=1?e:e.filter((e,t)=>t%i===0)}function pi(e,t,n,r,i){if(n.length===0)return[];let a=r.range()[0]>r.range()[1],o=e.findIndex(e=>i(di(r,e,a?`start`:`end`))),s=e.findLastIndex(e=>i(di(r,e,a?`end`:`start`))),c=e[0],l=e[e.length-1];if(!(c instanceof Date)||!(l instanceof Date))return[];let u=0;for(let e=0;e<n.length;e+=1)if(n[e].getTickNumber(c,l)!==0){u=e;break}let d=u;for(let e=u;e<n.length;e+=1){if(e===n.length-1){d=e;break}let r=n[e].getTickNumber(c,l),i=n[e+1].getTickNumber(c,l);if(i>t||t/r<i/t){d=e;break}}let f=[];for(let t=Math.max(1,o);t<=s;t+=1)for(let r=u;r<=d;r+=1){let i=e[t-1],a=e[t];if(i instanceof Date&&a instanceof Date&&n[r].isTick(i,a)){f.push({index:t,formatter:n[r].format});break}}return f}function mi(e){let{scale:t,tickNumber:n,valueFormatter:r,tickInterval:i,tickPlacement:a,tickLabelPlacement:o,tickSpacing:s,isInside:c,ordinalTimeTicks:l}=e;if(l!==void 0&&ge(t.domain())&&A(t)){let e=t.domain();return e.length===0||e.length===1?[]:pi(e,n,l.map(e=>typeof e==`string`?li[e]:e),t,c).map(({index:n,formatter:r})=>{let i=e[n];return{value:i,formattedValue:r(i),offset:di(t,i,`middle`),labelOffset:0}})}let u=a??`extremities`;if(A(t)){let e=t.domain(),a=o??`middle`,l=e;if(typeof i==`object`&&i?l=i:(typeof i==`function`&&(l=l.filter(i)),s!==void 0&&s>0&&(l=fi(l,t.range(),s))),l.length===0)return[];if(t.bandwidth()>0){let i=t.range()[0]>t.range()[1],o=l.findIndex(e=>c(di(t,e,i?`start`:`end`))),s=l.findLastIndex(e=>c(di(t,e,i?`end`:`start`)));return[...l.slice(o,s+1).map(e=>{let i=`${e}`;return{value:e,formattedValue:r?.(e,{location:`tick`,scale:t,tickNumber:n,defaultTickLabel:i})??i,offset:di(t,e,u),labelOffset:a===`tick`?0:t.step()*(ui[a]-ui[u])}}),...u===`extremities`&&s===e.length-1&&c(t.range()[1])?[{formattedValue:void 0,offset:t.range()[1],labelOffset:0}]:[]]}return l.map(e=>{let i=`${e}`;return{value:e,formattedValue:r?.(e,{location:`tick`,scale:t,tickNumber:n,defaultTickLabel:i})??i,offset:t(e),labelOffset:0}})}if(t.domain().some(ii))return[];let d=o,f=typeof i==`object`?i:hi(t,n),p=[];for(let e=0;e<f.length;e+=1){let i=f[e],a=t(i);if(c(a)){let o=t.tickFormat(n)(i);p.push({value:i,formattedValue:r?.(i,{location:`tick`,scale:t,tickNumber:n,defaultTickLabel:o})??o,offset:a,labelOffset:d===`middle`?t(f[e-1]??0)-(a+t(f[e-1]??0))/2:0})}}return p}function hi(e,t){let n=e.domain();return n[0]===n[1]?[n[0]]:e.ticks(t)}function gi(e){let{scale:t,tickNumber:n,valueFormatter:r,tickInterval:i,tickPlacement:a=`extremities`,tickLabelPlacement:s,tickSpacing:c,direction:l,ordinalTimeTicks:u}=e,{instance:d}=o(),f=l===`x`?d.isXInside:d.isYInside;return J.useMemo(()=>mi({scale:t,tickNumber:n,tickPlacement:a,tickInterval:i,tickLabelPlacement:s,tickSpacing:c,valueFormatter:r,isInside:f,ordinalTimeTicks:u}),[t,n,a,i,s,c,r,f,u])}function _i(e=!1){let[t,n]=J.useState(!1);return lt(()=>{e||n(!0)},[e]),J.useEffect(()=>{e&&n(!0)},[e]),t}var vi=typeof window<`u`&&`Intl`in window&&`Segmenter`in Intl?new Intl.Segmenter(void 0,{granularity:`grapheme`}):null;function yi(e){return e.length}function bi(e){let t=vi.segment(e),n=0;for(let e of t)n+=1;return n}const xi=vi?bi:yi;function Si(e){return e*(Math.PI/180)}var Ci=typeof window<`u`&&`Intl`in window&&`Segmenter`in Intl?new Intl.Segmenter(void 0,{granularity:`grapheme`}):null;function wi(e,t){return e.slice(0,t)}function Ti(e,t){let n=Ci.segment(e),r=``,i=0;for(let e of n)if(r+=e.segment,i+=1,i>=t)break;return r}const Ei=Ci?Ti:wi;var Di=`â€¦`;function Oi(e,t){let{width:n,height:r,measureText:i}=t,a=Si(t.angle),o=i(e),s=Math.abs(o.width*Math.cos(a))+Math.abs(o.height*Math.sin(a)),c=Math.abs(o.width*Math.sin(a))+Math.abs(o.height*Math.cos(a));return s<=n&&c<=r}function ki(e,t){if(t(e))return e;let n=e,r=1,i=1/2,a=xi(e),o=a,s=a,c=null;do{if(s=o,o=Math.floor(a*i),o===0)break;n=Ei(e,o).trim();let l=t(n+Di);r+=1,l?(c=n,i+=1/2**r):i-=1/2**r}while(Math.abs(o-s)!==1);return c?c+Di:``}function Ai(){return typeof window>`u`}var ji=new Map,Mi=2e3,Ni=new Set([`minWidth`,`maxWidth`,`width`,`minHeight`,`maxHeight`,`height`,`top`,`left`,`fontSize`,`padding`,`margin`,`paddingLeft`,`paddingRight`,`paddingTop`,`paddingBottom`,`marginLeft`,`marginRight`,`marginTop`,`marginBottom`]);function Pi(e,t){return Ni.has(e)&&t===+t?`${t}px`:t}var Fi=/([A-Z])/g;function Ii(e){return String(e).replace(Fi,e=>`-${e.toLowerCase()}`)}function Li(e){let t=``;for(let n in e)if(Object.hasOwn(e,n)){let r=n,i=e[r];if(i===void 0)continue;t+=`${Ii(r)}:${Pi(r,i)};`}return t}const Ri=(e,t={})=>{if(e==null||Ai())return{width:0,height:0};let n=String(e),r=`${n}-${Li(t)}`,i=ji.get(r);if(i)return i;try{let e=Vi(),i=document.createElementNS(`http://www.w3.org/2000/svg`,`text`);Object.keys(t).map(e=>(i.style[Ii(e)]=Pi(e,t[e]),e)),i.textContent=n,e.replaceChildren(i);let a=Bi(i);return ji.set(r,a),ji.size+1>Mi&&ji.clear(),a}catch{return{width:0,height:0}}};function zi(e,t={}){if(Ai())return new Map(Array.from(e).map(e=>[e,{width:0,height:0}]));let n=new Map,r=[],i=Li(t);for(let t of e){let e=`${t}-${i}`,a=ji.get(e);a?n.set(t,a):r.push(t)}let a=Vi(),o=K({},t);Object.keys(o).map(e=>(a.style[Ii(e)]=Pi(e,o[e]),e));let s=[];for(let e of r){let t=document.createElementNS(`http://www.w3.org/2000/svg`,`text`);t.textContent=`${e}`,s.push(t)}a.replaceChildren(...s);for(let e=0;e<r.length;e+=1){let t=r[e],o=a.children[e],s=Bi(o),c=`${t}-${i}`;ji.set(c,s),n.set(t,s)}return ji.size+1>Mi&&ji.clear(),n}function Bi(e){try{let t=e.getBBox();return{width:t.width,height:t.height}}catch{let t=e.getBoundingClientRect();return{width:t.width,height:t.height}}}var Q=null;function Vi(){return Q===null&&(Q=document.createElementNS(`http://www.w3.org/2000/svg`,`svg`),Q.setAttribute(`aria-hidden`,`true`),Q.style.position=`absolute`,Q.style.top=`-20000px`,Q.style.left=`0`,Q.style.padding=`0`,Q.style.margin=`0`,Q.style.border=`none`,Q.style.pointerEvents=`none`,Q.style.visibility=`hidden`,Q.style.contain=`strict`,document.body.appendChild(Q)),Q}function Hi(e,t,n,r,i){let a=new Map,o=ke(i?.angle??0),s=1,c=1;i?.textAnchor===`start`?(s=1/0,c=1):i?.textAnchor===`end`?(s=1,c=1/0):(s=2,c=2),o>90&&o<270&&([s,c]=[c,s]),r&&([s,c]=[c,s]);for(let r of e)if(r.formattedValue){let e=Math.min((r.offset+r.labelOffset)*s,(t.left+t.width+t.right-r.offset-r.labelOffset)*c);a.set(r,ki(r.formattedValue.toString(),t=>Oi(t,{width:e,height:n,angle:o,measureText:e=>Ri(e,i)})))}return a}var Ui=5;function Wi(e,t,n=0){let r=Math.min(Math.abs(n)%180,Math.abs(Math.abs(n)%180-180)%180);if(r<Ui)return e;if(r>90-Ui)return t;let i=C(r);return i<Math.atan2(t,e)?e/Math.cos(i):t/Math.sin(i)}function Gi(e,{tickLabelStyle:t,tickLabelInterval:n,tickLabelMinGap:r,reverse:i,isMounted:a,isXInside:o}){if(typeof n==`function`)return new Set(e.filter((e,t)=>n(e.value,t)));let s=0,c=i?-1:1,l=e.filter(e=>{let{offset:t,labelOffset:n,formattedValue:r}=e;return r===``?!1:o(t+n)}),u=qi(l,t);return new Set(l.filter((e,n)=>{let{offset:i,labelOffset:o}=e,l=i+o;if(n>0&&c*l<c*(s+r))return!1;let{width:d,height:f}=a?Ki(u,e):{width:0,height:0},p=Wi(d,f,t?.angle),m=l-c*p/2;return n>0&&c*m<c*(s+r)?!1:(s=l+c*p/2,!0)}))}function Ki(e,t){if(t.formattedValue===void 0)return{width:0,height:0};let n=0,r=0;for(let i of t.formattedValue.split(`
`)){let t=e.get(i);t&&(n=Math.max(n,t.width),r+=t.height)}return{width:n,height:r}}function qi(e,t){let n=new Set;for(let t of e)t.formattedValue&&t.formattedValue.split(`
`).forEach(e=>n.add(e));return zi(n,t)}function Ji(e){return U(`MuiChartsAxis`,e)}const Yi=q(`MuiChartsAxis`,[`root`,`line`,`tickContainer`,`tick`,`tickLabel`,`label`,`directionX`,`directionY`,`top`,`bottom`,`left`,`right`,`id`]),Xi=e=>{let{classes:t,position:n,id:r}=e;return V({root:[`root`,`directionX`,n,`id-${r}`],line:[`line`],tickContainer:[`tickContainer`],tick:[`tick`],tickLabel:[`tickLabel`],label:[`label`]},Ji,t)},Zi={disableLine:!1,disableTicks:!1,tickSize:6,tickLabelMinGap:4};function Qi({style:e,needsComputation:t,text:n}){return n.split(`
`).map(n=>K({text:n},t?Ri(n,e):{width:0,height:0}))}var $i=[`x`,`y`,`style`,`text`,`ownerState`],ea=[`angle`,`textAnchor`,`dominantBaseline`];function ta(e){let{x:t,y:n,style:r,text:i}=e,a=B(e,$i),o=r??{},{angle:s,textAnchor:c,dominantBaseline:l}=o,u=B(o,ea),d=ri(),f=J.useMemo(()=>Qi({style:u,needsComputation:d&&i.includes(`
`),text:i}),[u,i,d]),p;switch(l){case`hanging`:case`text-before-edge`:p=0;break;case`central`:p=(f.length-1)/2*-f[0].height;break;default:p=(f.length-1)*-f[0].height;break}return(0,Y.jsx)(`text`,K({},a,{transform:s?`rotate(${s}, ${t}, ${n})`:void 0,x:t,y:n,textAnchor:c,dominantBaseline:l,style:u,children:f.map((e,n)=>(0,Y.jsx)(`tspan`,{x:t,dy:`${n===0?p:f[0].height}px`,dominantBaseline:l,children:e.text},n))}))}function na(e){let t=ke(e);return t<=30||t>=330||t<=210&&t>=150?`middle`:t<=180?`end`:`start`}function ra(e){let t=ke(e);return t<=30||t>=330?`hanging`:t<=210&&t>=150?`auto`:`central`}function ia(e){switch(e){case`start`:return`end`;case`end`:return`start`;default:return e}}var aa=[`scale`,`tickNumber`,`reverse`];function oa(e){let{xAxis:t,xAxisIds:n}=b(),r=t[e.axisId??n[0]],{scale:i,tickNumber:a,reverse:o}=r,s=K({},Zi,I({props:K({},B(r,aa),e),name:`MuiChartsXAxis`})),{position:c,tickLabelStyle:l,slots:u,slotProps:d}=s,f=Ye(),p=ot(),m=Xi(s),h=c===`bottom`?1:-1,g=u?.axisTick??`line`,_=u?.axisTickLabel??ta,v=na((c===`bottom`?0:180)-(l?.angle??0)),y=ra((c===`bottom`?0:180)-(l?.angle??0));return{xScale:i,defaultizedProps:s,tickNumber:a,positionSign:h,classes:m,Tick:g,TickLabel:_,axisTickLabelProps:Me({elementType:_,externalSlotProps:d?.axisTickLabel,additionalProps:{style:K({},f.typography.caption,{fontSize:12,lineHeight:1.25,textAnchor:p?ia(v):v,dominantBaseline:y},l)},className:m.tickLabel,ownerState:{}}),reverse:o}}function sa(e){let{axisLabelHeight:t,ordinalTimeTicks:n}=e,{xScale:r,defaultizedProps:i,tickNumber:a,positionSign:s,classes:c,Tick:l,TickLabel:u,axisTickLabelProps:d,reverse:f}=oa(e),p=ot(),m=_i(),{disableTicks:h,tickSize:g,valueFormatter:_,slotProps:v,tickInterval:y,tickLabelInterval:b,tickPlacement:x,tickLabelPlacement:S,tickLabelMinGap:C,tickSpacing:w,height:T}=i,E=L(),{instance:D}=o(),O=ri(),k=h?4:g,A=gi({scale:r,tickNumber:a,valueFormatter:_,tickInterval:y,tickPlacement:x,tickLabelPlacement:S,tickSpacing:w,direction:`x`,ordinalTimeTicks:n}),j=Gi(A,{tickLabelStyle:d.style,tickLabelInterval:b,tickLabelMinGap:C,reverse:f,isMounted:m,isXInside:D.isXInside}),M=Math.max(0,T-(t>0?t+4:0)-k-3),N=O?Hi(j,E,M,p,d.style):new Map(Array.from(j).map(e=>[e,e.formattedValue]));return(0,Y.jsx)(J.Fragment,{children:A.map((e,t)=>{let{offset:n,labelOffset:r}=e,i=r??0,a=s*(k+3),o=D.isXInside(n),f=N.get(e),p=j.has(e);return(0,Y.jsxs)(`g`,{transform:`translate(${n}, 0)`,className:c.tickContainer,children:[!h&&o&&(0,Y.jsx)(l,K({y2:s*k,className:c.tick},v?.axisTick)),f!==void 0&&p&&(0,Y.jsx)(u,K({x:i,y:a},d,{text:f}))]},t)})})}var ca={start:0,extremities:0,end:1,middle:.5,tick:0};function la(e){let{scale:t,tickInterval:n,tickLabelPlacement:r=`middle`,tickPlacement:i=`extremities`,groups:a}=e;return J.useMemo(()=>{let e=t.domain(),o=typeof n==`function`&&e.filter(n)||typeof n==`object`&&n||e;if(t.bandwidth()>0){let e=ua(o,a,i,r,t);return e[0]&&(e[0].ignoreTick=!0),[{formattedValue:void 0,offset:t.range()[0],labelOffset:0,groupIndex:a.length-1},...e,{formattedValue:void 0,offset:t.range()[1],labelOffset:0,groupIndex:a.length-1}]}return ua(o,a,i,r,t)},[t,n,a,i,r])}function ua(e,t,n,r,i){let a=[],o=new Map,s=0;for(let c=0;c<t.length;c+=1)for(let l=0;l<e.length;l+=1){let u=e[l],d=t[c].getValue(u,l),f=a[a.length-1];if(f?.value!==d||f?.groupIndex!==c){s=1;let e=A(i)?i(u)-(i.step()-i.bandwidth())/2+ca[n]*i.step():i(u),t=i.step()*s*(ca[r]-ca[n]);a.push({value:d,formattedValue:`${d}`,offset:e,groupIndex:c,dataIndex:l,ignoreTick:!1,labelOffset:t}),o.has(l)||o.set(l,new Set);let f=o.get(l);for(let e of f.values())a[e].ignoreTick=!0;f.add(a.length-1)}else s+=1,f.labelOffset=i.step()*s*(ca[r]-ca[n])}return a}var da={tickSize:6},fa=(e,t,n)=>{let r=e[t]??{},i=n??da.tickSize,a=i*t*2+i;return K({},da,r,{tickSize:r.tickSize??a})};function pa(e){let{xScale:t,defaultizedProps:n,tickNumber:r,positionSign:i,classes:a,Tick:s,TickLabel:c,axisTickLabelProps:l}=oa(e);if(!A(t))throw Error("MUI X Charts: ChartsGroupedXAxis only supports the `band` and `point` scale types.");let{disableTicks:u,tickSize:d,valueFormatter:f,slotProps:p,tickInterval:m,tickPlacement:h,tickLabelPlacement:g}=n,_=n.groups,{instance:v}=o(),y=la({scale:t,tickNumber:r,valueFormatter:f,tickInterval:m,tickPlacement:h,tickLabelPlacement:g,direction:`x`,groups:_});return(0,Y.jsx)(J.Fragment,{children:y.map((e,t)=>{let{offset:n,labelOffset:r}=e,o=r??0,f=v.isXInside(n),m=e.formattedValue,h=e.ignoreTick??!1,g=e.groupIndex??0,y=fa(_,g,d),b=i*y.tickSize,x=i*(y.tickSize+3);return(0,Y.jsxs)(`g`,{transform:`translate(${n}, 0)`,className:a.tickContainer,"data-group-index":g,children:[!u&&!h&&f&&(0,Y.jsx)(s,K({y2:b,className:a.tick},p?.axisTick)),m!==void 0&&(0,Y.jsx)(c,K({x:o,y:x},l,{style:K({},l.style,y.tickLabelStyle),text:m}))]},t)})})}const ma=z(`g`,{name:`MuiChartsAxis`,slot:`Root`})(({theme:e})=>({[`& .${Yi.tickLabel}`]:K({},e.typography.caption,{fill:(e.vars||e).palette.text.primary}),[`& .${Yi.label}`]:{fill:(e.vars||e).palette.text.primary},[`& .${Yi.line}`]:{stroke:(e.vars||e).palette.text.primary,shapeRendering:`crispEdges`,strokeWidth:1},[`& .${Yi.tick}`]:{stroke:(e.vars||e).palette.text.primary,shapeRendering:`crispEdges`}}));var ha=[`axis`],ga=[`scale`,`tickNumber`,`reverse`,`ordinalTimeTicks`],_a=z(ma,{name:`MuiChartsXAxis`,slot:`Root`})({});function va(e){let{axis:t}=e,n=B(e,ha),{scale:r,ordinalTimeTicks:i}=t,a=K({},Zi,I({props:K({},B(t,ga),n),name:`MuiChartsXAxis`})),{position:o,labelStyle:s,offset:c,slots:l,slotProps:u,sx:d,disableLine:f,label:p,height:m}=a,h=Ye(),g=Xi(a),{left:_,top:v,width:y,height:b}=L(),x=o===`bottom`?1:-1,S=l?.axisLine??`line`,C=l?.axisLabel??ta,w=Me({elementType:C,externalSlotProps:u?.axisLabel,additionalProps:{style:K({},h.typography.body1,{lineHeight:1,fontSize:14,textAnchor:`middle`,dominantBaseline:o===`bottom`?`text-after-edge`:`text-before-edge`},s)},ownerState:{}});if(o===`none`)return null;let T=p?Ri(p,w.style).height:0,E=r.domain(),D=A(r)?E.length===0:E.some(ii),O=null;D||(O=`groups`in t&&Array.isArray(t.groups)?(0,Y.jsx)(pa,K({},n)):(0,Y.jsx)(sa,K({},n,{axisLabelHeight:T,ordinalTimeTicks:i})));let k={x:_+y/2,y:x*m};return(0,Y.jsxs)(_a,{transform:`translate(0, ${o===`bottom`?v+b+c:v-c})`,className:g.root,sx:d,children:[!f&&(0,Y.jsx)(S,K({x1:_,x2:_+y,className:g.line},u?.axisLine)),O,p&&(0,Y.jsx)(`g`,{className:g.label,children:(0,Y.jsx)(C,K({},k,w,{text:p}))})]})}function ya(e){let{xAxis:t,xAxisIds:n}=b(),r=t[e.axisId??n[0]];return r?(0,Y.jsx)(va,K({},e,{axis:r})):(tn(`MUI X Charts: No axis found. The axisId "${e.axisId}" is probably invalid.`),null)}function ba(e,t,n,r,i){let a=new Map,o=ke(i?.angle??0),s=1,c=1;i?.textAnchor===`start`?(s=1/0,c=1):i?.textAnchor===`end`?(s=1,c=1/0):(s=2,c=2),o>180&&([s,c]=[c,s]),r&&([s,c]=[c,s]);for(let r of e)if(r.formattedValue){let e=Math.min((r.offset+r.labelOffset)*s,(t.top+t.height+t.bottom-r.offset-r.labelOffset)*c);a.set(r,ki(r.formattedValue.toString(),t=>Oi(t,{width:n,height:e,angle:o,measureText:e=>Ri(e,i)})))}return a}const xa=e=>{let{classes:t,position:n,id:r}=e;return V({root:[`root`,`directionY`,n,`id-${r}`],line:[`line`],tickContainer:[`tickContainer`],tick:[`tick`],tickLabel:[`tickLabel`],label:[`label`]},Ji,t)},Sa={disableLine:!1,disableTicks:!1,tickSize:6};var Ca=[`scale`,`tickNumber`,`reverse`];function wa(e){let{yAxis:t,yAxisIds:n}=i(),r=t[e.axisId??n[0]],{scale:a,tickNumber:o}=r,s=K({},Sa,I({props:K({},B(r,Ca),e),name:`MuiChartsYAxis`})),{position:c,tickLabelStyle:l,slots:u,slotProps:d}=s,f=Ye(),p=ot(),m=xa(s),h=c===`right`?1:-1,g=typeof l?.fontSize==`number`?l.fontSize:12,_=u?.axisTick??`line`,v=u?.axisTickLabel??ta,y=na((c===`right`?-90:90)-(l?.angle??0)),b=ra((c===`right`?-90:90)-(l?.angle??0));return{yScale:a,defaultizedProps:s,tickNumber:o,positionSign:h,classes:m,Tick:_,TickLabel:v,axisTickLabelProps:Me({elementType:v,externalSlotProps:d?.axisTickLabel,additionalProps:{style:K({},f.typography.caption,{fontSize:g,textAnchor:p?ia(y):y,dominantBaseline:b},l)},className:m.tickLabel,ownerState:{}})}}function Ta(e){let{axisLabelHeight:t,ordinalTimeTicks:n}=e,{yScale:r,defaultizedProps:i,tickNumber:a,positionSign:s,classes:c,Tick:l,TickLabel:u,axisTickLabelProps:d}=wa(e),f=ot(),{disableTicks:p,tickSize:m,valueFormatter:h,slotProps:g,tickPlacement:_,tickLabelPlacement:v,tickInterval:y,tickLabelInterval:b,tickSpacing:x,width:S}=i,C=L(),{instance:w}=o(),T=ri(),E=p?4:m,D=gi({scale:r,tickNumber:a,valueFormatter:h,tickPlacement:_,tickLabelPlacement:v,tickInterval:y,tickSpacing:x,direction:`y`,ordinalTimeTicks:n}),O=Math.max(0,S-(t>0?t+2:0)-E-2),k=T?ba(D,C,O,f,d.style):new Map(Array.from(D).map(e=>[e,e.formattedValue]));return(0,Y.jsx)(J.Fragment,{children:D.map((e,t)=>{let{offset:n,labelOffset:r,value:i}=e,a=s*(E+2),o=r,f=typeof b==`function`&&!b?.(i,t),m=w.isYInside(n),h=k.get(e);return m?(0,Y.jsxs)(`g`,{transform:`translate(0, ${n})`,className:c.tickContainer,children:[!p&&(0,Y.jsx)(l,K({x2:s*E,className:c.tick},g?.axisTick)),h!==void 0&&!f&&(0,Y.jsx)(u,K({x:a,y:o,text:h},d))]},t):null})})}var Ea={tickSize:6},Da=(e,t,n)=>{let r=e[t]??{},i=n??Ea.tickSize,a=i*t*2+i;return K({},Ea,r,{tickSize:r.tickSize??a})};function Oa(e){let{yScale:t,defaultizedProps:n,tickNumber:r,positionSign:i,classes:a,Tick:s,TickLabel:c,axisTickLabelProps:l}=wa(e);if(!A(t))throw Error("MUI X Charts: ChartsGroupedYAxis only supports the `band` and `point` scale types.");let{disableTicks:u,tickSize:d,valueFormatter:f,slotProps:p,tickInterval:m,tickPlacement:h,tickLabelPlacement:g}=n,_=n.groups,{instance:v}=o(),y=la({scale:t,tickNumber:r,valueFormatter:f,tickInterval:m,tickPlacement:h,tickLabelPlacement:g,direction:`y`,groups:_});return(0,Y.jsx)(J.Fragment,{children:y.map((e,t)=>{let{offset:n,labelOffset:r}=e,o=r??0,f=v.isYInside(n),m=e.formattedValue,h=e.ignoreTick??!1,g=e.groupIndex??0,y=Da(_,g,d),b=i*y.tickSize,x=i*(y.tickSize+2);return(0,Y.jsxs)(`g`,{transform:`translate(0, ${n})`,className:a.tickContainer,"data-group-index":g,children:[!u&&!h&&f&&(0,Y.jsx)(s,K({x2:b,className:a.tick},p?.axisTick)),m!==void 0&&(0,Y.jsx)(c,K({x,y:o},l,{style:K({},l.style,y.tickLabelStyle),text:m}))]},t)})})}var ka=[`axis`],Aa=[`scale`,`tickNumber`,`reverse`,`ordinalTimeTicks`],ja=z(ma,{name:`MuiChartsYAxis`,slot:`Root`})({});function Ma(e){let{axis:t}=e,n=B(e,ka),{scale:r,ordinalTimeTicks:i}=t,a=B(t,Aa),o=ri(),s=K({},Sa,I({props:K({},a,n),name:`MuiChartsYAxis`})),{position:c,disableLine:l,label:u,labelStyle:d,offset:f,width:p,sx:m,slots:h,slotProps:g}=s,_=Ye(),v=xa(s),{left:y,top:b,width:x,height:S}=L(),C=c===`right`?1:-1,w=h?.axisLine??`line`,T=h?.axisLabel??ta,E=Me({elementType:w,externalSlotProps:g?.axisLine,additionalProps:{strokeLinecap:`square`},ownerState:{}}),D=Me({elementType:T,externalSlotProps:g?.axisLabel,additionalProps:{style:K({},_.typography.body1,{lineHeight:1,fontSize:14,angle:C*90,textAnchor:`middle`,dominantBaseline:`text-before-edge`},d)},ownerState:{}});if(c===`none`)return null;let O={x:C*p,y:b+S/2},k=u==null?0:Ri(u,D.style).height,j=r.domain(),M=A(r)?j.length===0:j.some(ii),N=null;return M||(N=`groups`in t&&Array.isArray(t.groups)?(0,Y.jsx)(Oa,K({},n)):(0,Y.jsx)(Ta,K({},n,{axisLabelHeight:k,ordinalTimeTicks:i}))),(0,Y.jsxs)(ja,{transform:`translate(${c===`right`?y+x+f:y-f}, 0)`,className:v.root,sx:m,children:[!l&&(0,Y.jsx)(w,K({y1:b,y2:b+S,className:v.line},E)),N,u&&o&&(0,Y.jsx)(`g`,{className:v.label,children:(0,Y.jsx)(T,K({},O,D,{text:u}))})]})}function Na(e){let{yAxis:t,yAxisIds:n}=i(),r=t[e.axisId??n[0]];return r?(0,Y.jsx)(Ma,K({},e,{axis:r})):(tn(`MUI X Charts: No axis found. The axisId "${e.axisId}" is probably invalid.`),null)}function Pa(e){let{slots:t,slotProps:n}=e,{xAxisIds:r,xAxis:a}=b(),{yAxisIds:o,yAxis:s}=i();return(0,Y.jsxs)(J.Fragment,{children:[r.map(e=>!a[e].position||a[e].position===`none`?null:(0,Y.jsx)(ya,{slots:t,slotProps:n,axisId:e},e)),o.map(e=>!s[e].position||s[e].position===`none`?null:(0,Y.jsx)(Na,{slots:t,slotProps:n,axisId:e},e))]})}function Fa(e){return U(`MuiChartsAxisHighlight`,e)}q(`MuiChartsAxisHighlight`,[`root`]);const Ia=z(`path`,{name:`MuiChartsAxisHighlight`,slot:`Root`})(({theme:e})=>({pointerEvents:`none`,variants:[{props:{axisHighlight:`band`},style:K({fill:`white`,fillOpacity:.1},e.applyStyles(`light`,{fill:`gray`}))},{props:{axisHighlight:`line`},style:K({strokeDasharray:`5 2`,stroke:`#ffffff`},e.applyStyles(`light`,{stroke:`#000000`}))}]}));function La(e){let{type:t,classes:n}=e,{left:r,width:i}=L(),a=x(),o=F(a,cn),s=F(a,xe);return o.length===0?null:o.map(({axisId:e,value:a})=>{let o=s.axis[e].scale,c=rr(o),l=t===`band`&&a!==null&&A(o);return(0,Y.jsxs)(J.Fragment,{children:[l&&o(a)!==void 0&&(0,Y.jsx)(Ia,{d:`M ${r} ${o(a)-(o.step()-o.bandwidth())/2} l 0 ${o.step()} l ${i} 0 l 0 ${-o.step()} Z`,className:n.root,ownerState:{axisHighlight:`band`}}),t===`line`&&a!==null&&(0,Y.jsx)(Ia,{d:`M ${r} ${c(a)} L ${r+i} ${c(a)}`,className:n.root,ownerState:{axisHighlight:`line`}})]},`${e}-${a}`)})}function Ra(e){let{type:t,classes:n}=e,{top:r,height:i}=L(),a=x(),o=F(a,sn),s=F(a,me);return o.length===0?null:o.map(({axisId:e,value:a})=>{let o=s.axis[e].scale,c=rr(o),l=t===`band`&&a!==null&&A(o);return(0,Y.jsxs)(J.Fragment,{children:[l&&o(a)!==void 0&&(0,Y.jsx)(Ia,{d:`M ${o(a)-(o.step()-o.bandwidth())/2} ${r} l ${o.step()} 0 l 0 ${i} l ${-o.step()} 0 Z`,className:n.root,ownerState:{axisHighlight:`band`}}),t===`line`&&a!==null&&(0,Y.jsx)(Ia,{d:`M ${c(a)} ${r} L ${c(a)} ${r+i}`,className:n.root,ownerState:{axisHighlight:`line`}})]},`${e}-${a}`)})}var za=()=>V({root:[`root`]},Fa);function Ba(e){let{x:t,y:n}=e,r=za();return(0,Y.jsxs)(J.Fragment,{children:[t&&t!==`none`&&(0,Y.jsx)(Ra,{type:t,classes:r}),n&&n!==`none`&&(0,Y.jsx)(La,{type:n,classes:r})]})}function Va(e){let{id:t,offset:n}=e,{left:r,top:i,width:a,height:o}=L(),s=K({top:0,right:0,bottom:0,left:0},n);return(0,Y.jsx)(`clipPath`,{id:t,children:(0,Y.jsx)(`rect`,{x:r-s.left,y:i-s.top,width:a+s.left+s.right,height:o+s.top+s.bottom})})}function Ha(e){return U(`MuiChartsGrid`,e)}const Ua=q(`MuiChartsGrid`,[`root`,`line`,`horizontalLine`,`verticalLine`]),Wa=z(`g`,{name:`MuiChartsGrid`,slot:`Root`,overridesResolver:(e,t)=>[{[`&.${Ua.verticalLine}`]:t.verticalLine},{[`&.${Ua.horizontalLine}`]:t.horizontalLine},t.root]})({}),Ga=z(`line`,{name:`MuiChartsGrid`,slot:`Line`})(({theme:e})=>({stroke:(e.vars||e).palette.divider,shapeRendering:`crispEdges`,strokeWidth:1}));function Ka(e){let{instance:t}=o(),{axis:n,start:r,end:i,classes:a}=e,{scale:s,tickNumber:c,tickInterval:l,tickSpacing:u}=n,d=gi({scale:s,tickNumber:c,tickInterval:l,tickSpacing:u,direction:`x`,ordinalTimeTicks:`ordinalTimeTicks`in n?n.ordinalTimeTicks:void 0});return(0,Y.jsx)(J.Fragment,{children:d.map(({value:e,offset:n})=>t.isXInside(n)?(0,Y.jsx)(Ga,{y1:r,y2:i,x1:n,x2:n,className:a.verticalLine},`vertical-${e?.getTime?.()??e}`):null)})}function qa(e){let{instance:t}=o(),{axis:n,start:r,end:i,classes:a}=e,{scale:s,tickNumber:c,tickInterval:l,tickSpacing:u}=n,d=gi({scale:s,tickNumber:c,tickInterval:l,tickSpacing:u,direction:`y`,ordinalTimeTicks:`ordinalTimeTicks`in n?n.ordinalTimeTicks:void 0});return(0,Y.jsx)(J.Fragment,{children:d.map(({value:e,offset:n})=>t.isYInside(n)?(0,Y.jsx)(Ga,{y1:n,y2:n,x1:r,x2:i,className:a.horizontalLine},`horizontal-${e?.getTime?.()??e}`):null)})}var Ja=[`vertical`,`horizontal`],Ya=({classes:e})=>V({root:[`root`],verticalLine:[`line`,`verticalLine`],horizontalLine:[`line`,`horizontalLine`]},Ha,e);function Xa(e){let t=I({props:e,name:`MuiChartsGrid`}),n=L(),{vertical:r,horizontal:a}=t,o=B(t,Ja),{xAxis:s,xAxisIds:c}=b(),{yAxis:l,yAxisIds:u}=i(),d=Ya(t),f=l[u[0]],p=s[c[0]];return(0,Y.jsxs)(Wa,K({},o,{className:d.root,children:[r&&(0,Y.jsx)(Ka,{axis:p,start:n.top,end:n.height+n.top,classes:d}),a&&(0,Y.jsx)(qa,{axis:f,start:n.left,end:n.width+n.left,classes:d})]}))}const Za=[r,w,S,Te,E,je,l];var Qa=`xAxis.yAxis.series.width.height.margin.colors.dataset.sx.axisHighlight.grid.children.slots.slotProps.skipAnimation.loading.layout.onItemClick.highlightedItem.onHighlightChange.borderRadius.barLabel.className.hideLegend.showToolbar.brushConfig`.split(`.`);const $a=e=>{let{xAxis:t,yAxis:n,series:r,width:i,height:a,margin:o,colors:s,dataset:c,sx:l,axisHighlight:u,grid:d,children:f,slots:p,slotProps:m,skipAnimation:h,loading:g,layout:_,onItemClick:v,highlightedItem:y,onHighlightChange:b,borderRadius:x,barLabel:S,className:C,brushConfig:w}=e,T=B(e,Qa),E=`${it()}-clip-path`,D=_===`horizontal`||_===void 0&&r.some(e=>e.layout===`horizontal`),O=J.useMemo(()=>[{id:ue,scaleType:`band`,data:Array.from({length:Math.max(...r.map(e=>(e.data??c??[]).length))},(e,t)=>t)}],[c,r]),k=J.useMemo(()=>[{id:De,scaleType:`band`,data:Array.from({length:Math.max(...r.map(e=>(e.data??c??[]).length))},(e,t)=>t)}],[c,r]),A=J.useMemo(()=>r.map(e=>K({type:`bar`},e,{layout:D?`horizontal`:`vertical`})),[D,r]),j=D?void 0:O,M=J.useMemo(()=>t?D?t:t.map(e=>K({scaleType:`band`},e)):j,[j,D,t]),N=D?k:void 0,P=K({},T,{series:A,width:i,height:a,margin:o,colors:s,dataset:c,xAxis:M,yAxis:J.useMemo(()=>n?D?n.map(e=>K({scaleType:`band`},e)):n:N,[N,D,n]),highlightedItem:y,onHighlightChange:b,disableAxisListener:m?.tooltip?.trigger!==`axis`&&u?.x===`none`&&u?.y===`none`,className:C,skipAnimation:h,brushConfig:w,plugins:Za}),F={onItemClick:v,slots:p,slotProps:m,borderRadius:x,barLabel:S},ee={vertical:d?.vertical,horizontal:d?.horizontal},te={clipPath:`url(#${E})`},ne={id:E},re={slots:p,slotProps:m,loading:g},ie={slots:p,slotProps:m},I=K({},D?{y:`band`}:{x:`band`},u),ae={slots:p,slotProps:m};return{chartsWrapperProps:{sx:l,legendPosition:e.slotProps?.legend?.position,legendDirection:e.slotProps?.legend?.direction,hideLegend:e.hideLegend??!1},chartContainerProps:P,barPlotProps:F,gridProps:ee,clipPathProps:ne,clipPathGroupProps:te,overlayProps:re,chartsAxisProps:ie,axisHighlightProps:I,legendProps:ae,children:f}};function eo(e){let t=Ye(),n=le(),r=ir(),{xAxis:a,xAxisIds:o}=b(),{yAxis:s,yAxisIds:c}=i();if(n===null||n.seriesType!==`bar`||!r)return null;let l=r?.series[n.seriesId],u=l.xAxisId??o[0],d=l.yAxisId??c[0],f=a[u],p=s[d],m=r.series[n.seriesId].layout===`vertical`,h=r.stackingGroups.findIndex(e=>e.ids.includes(n.seriesId)),_=g({verticalLayout:m,xAxisConfig:f,yAxisConfig:p,series:l,dataIndex:n.dataIndex,numberOfGroups:r.stackingGroups.length,groupIndex:h});if(_===null)return null;let{x:v,y,height:x,width:S}=_;return(0,Y.jsx)(`rect`,K({fill:`none`,stroke:(t.vars??t).palette.text.primary,strokeWidth:2,x:v-3,y:y-3,width:S+6,height:x+6,rx:3,ry:3},e))}var to=J.forwardRef(function(e,t){let n=I({props:e,name:`MuiBarChart`}),{chartsWrapperProps:r,chartContainerProps:i,barPlotProps:a,gridProps:o,clipPathProps:s,clipPathGroupProps:c,overlayProps:l,chartsAxisProps:u,axisHighlightProps:d,legendProps:f,children:p}=$a(n),{chartDataProviderProps:m,chartsSurfaceProps:h}=be(i,t),g=n.slots?.tooltip??P,_=n.slots?.toolbar;return(0,Y.jsx)(ae,K({},m,{children:(0,Y.jsxs)(pe,K({},r,{children:[n.showToolbar&&_?(0,Y.jsx)(_,K({},n.slotProps?.toolbar)):null,!n.hideLegend&&(0,Y.jsx)(Ee,K({},f)),(0,Y.jsxs)(k,K({},h,{children:[(0,Y.jsx)(Xa,K({},o)),(0,Y.jsxs)(`g`,K({},c,{children:[(0,Y.jsx)(ni,K({},a)),(0,Y.jsx)(he,K({},l)),(0,Y.jsx)(Ba,K({},d)),(0,Y.jsx)(eo,{})]})),(0,Y.jsx)(Pa,K({},u)),(0,Y.jsx)(Va,K({},s)),p]})),!n.loading&&(0,Y.jsx)(g,K({},n.slotProps?.tooltip))]}))}))});function $({subsectionId:e,parentId:t,title:n,defaultExpanded:r=!0,children:i,secondary:a}){return(0,Y.jsx)(W,{sx:{mb:1},children:(0,Y.jsx)(yr,{storageKey:`${t}:${e}`,title:n,defaultExpanded:r,secondary:a,children:i})})}function no({distribution:e,parentId:t}){let{top_artists:n,others_count:r,total_artists:i}=e;if(n.length===0)return(0,Y.jsx)($,{subsectionId:`artists`,parentId:t,title:`Artists`,children:(0,Y.jsx)(G,{color:`text.secondary`,children:`No artist data available`})});let a=n.map(e=>e.artist),o=n.map(e=>e.count);return(0,Y.jsxs)($,{subsectionId:`artists`,parentId:t,title:`Artists`,secondary:(0,Y.jsxs)(G,{variant:`body2`,color:`text.secondary`,children:[i,` artists`]}),children:[(0,Y.jsx)(to,{height:300,xAxis:[{scaleType:`band`,data:a,tickLabelStyle:{angle:-45,textAnchor:`end`,fontSize:11}}],series:[{data:o}],margin:{left:50,right:20,top:20,bottom:80}}),r>0&&(0,Y.jsxs)(G,{variant:`body2`,color:`text.secondary`,sx:{fontStyle:`italic`,mt:1},children:[`+ `,r,` tracks from `,i-n.length,` `,`other artists`]})]})}var ro=[`#2196f3`,`#4caf50`,`#ff9800`,`#e91e63`,`#9c27b0`,`#00bcd4`,`#ff5722`,`#795548`,`#607d8b`,`#3f51b5`,`#8bc34a`,`#ffc107`,`#673ab7`,`#009688`,`#f44336`,`#03a9f4`,`#cddc39`,`#ffeb3b`,`#9e9e9e`,`#ff4081`];function io({distribution:t,parentId:n}){let[r,i]=(0,J.useState)(new Set),{pieData:a,visibleCount:o,totalCount:s}=(0,J.useMemo)(()=>{let e=t.filter(e=>!r.has(e.genre));return{pieData:e.map((e,t)=>({id:e.genre,value:e.count,label:e.genre,color:ro[t%ro.length]})),visibleCount:e.length,totalCount:t.length}},[t,r]),c=e=>{i(t=>{let n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})};return t.length===0?(0,Y.jsx)($,{subsectionId:`genres`,parentId:n,title:`Genres`,children:(0,Y.jsx)(G,{color:`text.secondary`,children:`No genre data available`})}):(0,Y.jsxs)($,{subsectionId:`genres`,parentId:n,title:`Genres`,secondary:(0,Y.jsxs)(G,{variant:`body2`,color:`text.secondary`,children:[o,` of `,s,` genres shown`]}),children:[a.length>0?(0,Y.jsx)(W,{sx:{height:350,mb:2},children:(0,Y.jsx)(we,{series:[{data:a,innerRadius:40,outerRadius:120,paddingAngle:1,cornerRadius:4,highlightScope:{highlight:`item`,fade:`global`}}],height:350,hideLegend:!0})}):(0,Y.jsx)(G,{color:`text.secondary`,sx:{mb:2},children:`All genres hidden. Click chips below to show.`}),(0,Y.jsx)(W,{sx:{mb:1},children:(0,Y.jsxs)(e,{direction:`row`,spacing:1,sx:{mb:1},children:[(0,Y.jsx)(Re,{label:`Show All`,size:`small`,variant:`outlined`,onClick:()=>i(new Set),disabled:r.size===0}),(0,Y.jsx)(Re,{label:`Hide All`,size:`small`,variant:`outlined`,onClick:()=>i(new Set(t.map(e=>e.genre))),disabled:r.size===t.length})]})}),(0,Y.jsx)(e,{direction:`row`,flexWrap:`wrap`,gap:.5,children:t.map((e,t)=>{let n=r.has(e.genre),i=ro[t%ro.length];return(0,Y.jsx)(Re,{label:`${e.genre} (${e.count})`,size:`small`,onClick:()=>c(e.genre),sx:{bgcolor:n?`transparent`:i,color:n?`text.secondary`:`#fff`,border:n?1:0,borderColor:`divider`,textDecoration:n?`line-through`:`none`,opacity:n?.6:1,"&:hover":{bgcolor:n?`action.hover`:i,opacity:1}}},e.genre)})})]})}function ao(e){let t=Math.floor(e/36e5),n=Math.floor(e%36e5/6e4);return t>0?`${t}h ${n}m`:`${n}m`}function oo(e){return e>=0xe8d4a51000?`${(e/0xe8d4a51000).toFixed(1)} TB`:e>=1e9?`${(e/1e9).toFixed(1)} GB`:e>=1e6?`${(e/1e6).toFixed(1)} MB`:`${(e/1e3).toFixed(1)} KB`}function so({label:e,value:t}){return(0,Y.jsxs)(W,{sx:{textAlign:`center`,py:1,flex:`1 1 25%`,minWidth:100},children:[(0,Y.jsx)(G,{variant:`h5`,color:`primary`,children:t}),(0,Y.jsx)(G,{variant:`body2`,color:`text.secondary`,children:e})]})}function co({stats:e,parentId:t}){return(0,Y.jsx)($,{subsectionId:`stats`,parentId:t,title:`Library Statistics`,children:(0,Y.jsxs)(W,{sx:{display:`flex`,flexWrap:`wrap`,gap:2},children:[(0,Y.jsx)(so,{label:`Tracks`,value:e.file_count.toLocaleString()}),(0,Y.jsx)(so,{label:`Total Duration`,value:ao(e.total_duration_ms)}),(0,Y.jsx)(so,{label:`Total Size`,value:oo(e.total_file_size_bytes)}),(0,Y.jsx)(so,{label:`Avg Track`,value:ao(e.avg_track_length_ms)})]})})}function lo(e){return e.replace(` `,`_`)}const uo=q(`MuiAppearingMask`,[`animate`]);var fo=z(`rect`)({animationName:`animate-width`,animationTimingFunction:de,animationDuration:`0s`,[`&.${uo.animate}`]:{animationDuration:`300ms`},"@keyframes animate-width":{from:{width:0}}});function po(e){let t=L(),n=lo(`${j()}-${e.id}`);return(0,Y.jsxs)(J.Fragment,{children:[(0,Y.jsx)(`clipPath`,{id:n,children:(0,Y.jsx)(fo,{className:e.skipAnimation?``:uo.animate,x:0,y:0,width:t.left+t.width+t.right,height:t.top+t.height+t.bottom})}),(0,Y.jsx)(`g`,{clipPath:`url(#${n})`,children:e.children})]})}var mo=[`skipAnimation`,`ownerState`];function ho(e){let{skipAnimation:t,ownerState:n}=e,r=B(e,mo),i=sr(e);return(0,Y.jsx)(po,{skipAnimation:t,id:`${n.id}-area-clip`,children:(0,Y.jsx)(`path`,K({fill:n.gradientId?`url(#${n.gradientId})`:n.color,filter:n.isHighlighted?`brightness(140%)`:n.gradientId?void 0:`brightness(120%)`,opacity:n.isFaded?.3:1,stroke:`none`,"data-series":n.id,"data-highlighted":n.isHighlighted||void 0,"data-faded":n.isFaded||void 0},r,i))})}var go=[`id`,`classes`,`color`,`gradientId`,`slots`,`slotProps`,`onClick`];function _o(e){return U(`MuiAreaElement`,e)}const vo=q(`MuiAreaElement`,[`root`,`highlighted`,`faded`,`series`]);var yo=e=>{let{classes:t,id:n,isFaded:r,isHighlighted:i}=e;return V({root:[`root`,`series-${n}`,i&&`highlighted`,r&&`faded`]},_o,t)};function bo(e){let{id:t,classes:n,color:r,gradientId:i,slots:a,slotProps:o,onClick:s}=e,c=B(e,go),l=M({type:`line`,seriesId:t}),{isFaded:u,isHighlighted:d}=or({seriesId:t}),f={id:t,classes:n,color:r,gradientId:i,isFaded:u,isHighlighted:d},p=yo(f),m=a?.area??ho;return(0,Y.jsx)(m,K({},c,Me({elementType:m,externalSlotProps:o?.area,additionalProps:K({},l,{onClick:s,cursor:s?`pointer`:`unset`}),className:p.root,ownerState:f})))}function xo(e){switch(e){case`catmullRom`:return Bn.alpha(.5);case`linear`:return dn;case`monotoneX`:return Jn;case`monotoneY`:return Yn;case`natural`:return Qn;case`step`:return er;case`stepBefore`:return tr;case`stepAfter`:return nr;case`bumpY`:return vn;case`bumpX`:return _n;default:return Jn}}function So(e,t){let n=ar(),r=b().xAxisIds[0],a=i().yAxisIds[0],o=ie();return J.useMemo(()=>{if(n===void 0)return[];let{series:i,stackingGroups:s}=n,c=[];for(let n of s){let s=n.ids;for(let n=s.length-1;n>=0;--n){let l=s[n],{xAxisId:u=r,yAxisId:d=a,stackedData:f,data:p,connectNulls:m,baseline:h,curve:g,strictStepCurve:_,area:v}=i[l];if(!v||!(u in e)||!(d in t))continue;let y=e[u].scale,b=rr(y),x=t[d].scale,S=e[u].data,C=t[d].colorScale&&o(d)||e[u].colorScale&&o(u)||void 0,w=g?.includes(`step`)&&!_&&A(y),T=S?.flatMap((e,t)=>{let n=p[t]==null;if(w){let r=[{x:e,y:f[t],nullData:n,isExtension:!1}];return!n&&(t===0||p[t-1]==null)&&r.unshift({x:(y(e)??0)-(y.step()-y.bandwidth())/2,y:f[t],nullData:n,isExtension:!0}),!n&&(t===p.length-1||p[t+1]==null)&&r.push({x:(y(e)??0)+(y.step()+y.bandwidth())/2,y:f[t],nullData:n,isExtension:!0}),r}return{x:e,y:f[t],nullData:n}})??[],E=m?T.filter(e=>!e.nullData):T,D=hn().x(e=>e.isExtension?e.x:b(e.x)).defined(e=>m||!e.nullData||!!e.isExtension).y0(e=>{if(typeof h==`number`)return x(h);if(h===`max`)return x.range()[1];if(h===`min`)return x.range()[0];let t=e.y&&x(e.y[0]);return Number.isNaN(t)?x.range()[0]:t}).y1(e=>e.y&&x(e.y[1])).curve(xo(g))(E)||``;c.push({area:i[l].area,color:i[l].color,gradientId:C,d:D,seriesId:l})}}return c},[n,r,a,e,t,o])}var Co=[`slots`,`slotProps`,`onItemClick`,`skipAnimation`],wo=z(`g`,{name:`MuiAreaPlot`,slot:`Root`})({[`& .${vo.root}`]:{transitionProperty:`opacity, fill`,transitionDuration:`300ms`,transitionTimingFunction:de}}),To=()=>{let{xAxis:e}=b(),{yAxis:t}=i();return So(e,t)};function Eo(e){let{slots:t,slotProps:n,onItemClick:r,skipAnimation:i}=e,a=B(e,Co),o=Se(Jr()||i);return(0,Y.jsx)(wo,K({},a,{children:To().map(({d:e,seriesId:i,color:a,area:s,gradientId:c})=>!!s&&(0,Y.jsx)(bo,{id:i,d:e,color:a,gradientId:c,slots:t,slotProps:n,onClick:r&&(e=>r(e,{type:`line`,seriesId:i})),skipAnimation:o},i))}))}var Do=[`skipAnimation`,`ownerState`],Oo=J.forwardRef(function(e,t){let{skipAnimation:n,ownerState:r}=e,i=B(e,Do),a=hr(K({},e,{ref:t}));return(0,Y.jsx)(po,{skipAnimation:n,id:`${r.id}-line-clip`,children:(0,Y.jsx)(`path`,K({stroke:r.gradientId?`url(#${r.gradientId})`:r.color,strokeWidth:2,strokeLinejoin:`round`,fill:`none`,filter:r.isHighlighted?`brightness(120%)`:void 0,opacity:r.isFaded?.3:1,"data-series":r.id,"data-highlighted":r.isHighlighted||void 0,"data-faded":r.isFaded||void 0},i,a))})}),ko=[`id`,`classes`,`color`,`gradientId`,`slots`,`slotProps`,`onClick`];function Ao(e){return U(`MuiLineElement`,e)}const jo=q(`MuiLineElement`,[`root`,`highlighted`,`faded`,`series`]);var Mo=e=>{let{classes:t,id:n,isFaded:r,isHighlighted:i}=e;return V({root:[`root`,`series-${n}`,i&&`highlighted`,r&&`faded`]},Ao,t)};function No(e){let{id:t,classes:n,color:r,gradientId:i,slots:a,slotProps:o,onClick:s}=e,c=B(e,ko),l=M({type:`line`,seriesId:t}),{isFaded:u,isHighlighted:d}=or({seriesId:t}),f={id:t,classes:n,color:r,gradientId:i,isFaded:u,isHighlighted:d},p=Mo(f),m=a?.line??Oo;return(0,Y.jsx)(m,K({},c,Me({elementType:m,externalSlotProps:o?.line,additionalProps:K({},l,{onClick:s,cursor:s?`pointer`:`unset`}),className:p.root,ownerState:f})))}function Po(e,t){let n=ar(),r=b().xAxisIds[0],a=i().yAxisIds[0],o=ie();return J.useMemo(()=>{if(n===void 0)return[];let{series:i,stackingGroups:s}=n,c=[];for(let n of s){let s=n.ids;for(let n of s){let{xAxisId:s=r,yAxisId:l=a,stackedData:u,data:d,connectNulls:f,curve:p,strictStepCurve:m}=i[n];if(!(s in e)||!(l in t))continue;let h=e[s].scale,g=rr(h),_=t[l].scale,v=e[s].data,y=t[l].colorScale&&o(l)||e[s].colorScale&&o(s)||void 0,b=p?.includes(`step`)&&!m&&A(h),x=v?.flatMap((e,t)=>{let n=d[t]==null;if(b){let r=[{x:e,y:u[t],nullData:n,isExtension:!1}];return!n&&(t===0||d[t-1]==null)&&r.unshift({x:(h(e)??0)-(h.step()-h.bandwidth())/2,y:u[t],nullData:n,isExtension:!0}),!n&&(t===d.length-1||d[t+1]==null)&&r.push({x:(h(e)??0)+(h.step()+h.bandwidth())/2,y:u[t],nullData:n,isExtension:!0}),r}return{x:e,y:u[t],nullData:n}})??[],S=f?x.filter(e=>!e.nullData):x,C=mn().x(e=>e.isExtension?e.x:g(e.x)).defined(e=>f||!e.nullData||!!e.isExtension).y(e=>_(e.y[1])).curve(xo(p))(S)||``;c.push({color:i[n].color,gradientId:y,d:C,seriesId:n})}}return c},[n,r,a,e,t,o])}var Fo=[`slots`,`slotProps`,`skipAnimation`,`onItemClick`],Io=z(`g`,{name:`MuiAreaPlot`,slot:`Root`})({[`& .${jo.root}`]:{transitionProperty:`opacity, fill`,transitionDuration:`300ms`,transitionTimingFunction:de}}),Lo=()=>{let{xAxis:e}=b(),{yAxis:t}=i();return Po(e,t)};function Ro(e){let{slots:t,slotProps:n,skipAnimation:r,onItemClick:i}=e,a=B(e,Fo),o=Se(Jr()||r);return(0,Y.jsx)(Io,K({},a,{children:Lo().map(({d:e,seriesId:r,color:a,gradientId:s})=>(0,Y.jsx)(No,{id:r,d:e,color:a,gradientId:s,skipAnimation:o,slots:t,slotProps:n,onClick:i&&(e=>i(e,{type:`line`,seriesId:r}))},r))}))}function zo(e){return U(`MuiMarkElement`,e)}const Bo=q(`MuiMarkElement`,[`root`,`highlighted`,`faded`,`animate`,`series`]),Vo=e=>{let{classes:t,id:n,isFaded:r,isHighlighted:i,skipAnimation:a}=e;return V({root:[`root`,`series-${n}`,i&&`highlighted`,r&&`faded`,a?void 0:`animate`]},zo,t)};var Ho=[`x`,`y`,`id`,`classes`,`color`,`dataIndex`,`onClick`,`skipAnimation`,`isFaded`,`isHighlighted`],Uo=z(`circle`)({[`&.${Bo.animate}`]:{transitionDuration:`300ms`,transitionProperty:`cx, cy, opacity`,transitionTimingFunction:de}});function Wo(e){let{x:t,y:n,id:r,classes:i,color:a,dataIndex:o,onClick:s,skipAnimation:c,isFaded:l=!1,isHighlighted:u=!1}=e,d=B(e,Ho),f=Ye(),p=M({type:`line`,seriesId:r,dataIndex:o}),m=Vo({id:r,classes:i,isHighlighted:u,isFaded:l,color:a,skipAnimation:c});return(0,Y.jsx)(Uo,K({},d,{cx:t,cy:n,r:5,fill:(f.vars||f).palette.background.paper,stroke:a,strokeWidth:2,className:m.root,onClick:s,cursor:s?`pointer`:`unset`},p,{"data-highlighted":u||void 0,"data-faded":l||void 0}))}function Go(e){switch(e){case`circle`:return 0;case`cross`:return 1;case`diamond`:return 2;case`square`:return 3;case`star`:return 4;case`triangle`:return 5;case`wye`:return 6;default:return 0}}var Ko=[`x`,`y`,`id`,`classes`,`color`,`shape`,`dataIndex`,`onClick`,`skipAnimation`,`isFaded`,`isHighlighted`],qo=z(`path`,{name:`MuiMarkElement`,slot:`Root`})(({ownerState:e,theme:t})=>({fill:(t.vars||t).palette.background.paper,stroke:e.color,strokeWidth:2,[`&.${Bo.animate}`]:{transitionDuration:`300ms`,transitionProperty:`transform, transform-origin, opacity`,transitionTimingFunction:de}}));function Jo(e){let{x:t,y:n,id:r,classes:i,color:a,shape:o,dataIndex:s,onClick:c,skipAnimation:l,isFaded:u=!1,isHighlighted:d=!1}=e,f=B(e,Ko),p=M({type:`line`,seriesId:r,dataIndex:s}),m={id:r,classes:i,isHighlighted:d,isFaded:u,color:a,skipAnimation:l},h=Vo(m);return(0,Y.jsx)(qo,K({},f,{style:{transform:`translate(${t}px, ${n}px)`,transformOrigin:`${t}px ${n}px`},ownerState:m,className:h.root,d:Fn(Pn[Go(o)])(),onClick:c,cursor:c?`pointer`:`unset`},p,{"data-highlighted":d||void 0,"data-faded":u||void 0}))}function Yo(e,t){let n=ar(),r=b().xAxisIds[0],s=i().yAxisIds[0],c=j(),{instance:l}=o();return J.useMemo(()=>{if(n===void 0)return[];let{series:i,stackingGroups:o}=n,u=[];for(let n of o){let o=n.ids;for(let n of o){let{xAxisId:o=r,yAxisId:d=s,stackedData:f,data:p,showMark:m=!0,shape:h=`circle`}=i[n];if(m===!1||!(o in e)||!(d in t))continue;let g=rr(e[o].scale),_=t[d].scale,v=e[o].data,y=lo(`${c}-${n}-line-clip`),b=a(i[n],e[o],t[d]),x=[];if(v)for(let e=0;e<v.length;e+=1){let t=v[e],n=p[e]==null?null:f[e][1];if(n===null)continue;let r=_(n),i=g(t);l.isPointInside(i,r)&&(m!==!0&&!m({x:i,y:r,index:e,position:t,value:n})||x.push({x:i,y:r,index:e,color:b(e)}))}u.push({seriesId:n,clipId:y,shape:h,xAxisId:o,marks:x})}}return u},[n,r,s,c,e,t,l])}var Xo=[`slots`,`slotProps`,`skipAnimation`,`onItemClick`];function Zo(e){let{slots:t,slotProps:n,skipAnimation:r,onItemClick:a}=e,s=B(e,Xo),c=Se(Jr()||r),{xAxis:l}=b(),{yAxis:u}=i(),{store:d}=o(),{isFaded:f,isHighlighted:p}=re(),m=F(d,an),h=J.useMemo(()=>{let e={};for(let{dataIndex:t,axisId:n}of m)e[n]===void 0?e[n]=new Set([t]):e[n].add(t);return e},[m]);return(0,Y.jsx)(`g`,K({},s,{children:Yo(l,u).map(({seriesId:e,clipId:r,shape:i,xAxisId:o,marks:s})=>{let l=t?.mark??(i===`circle`?Wo:Jo),u=p({seriesId:e}),d=!u&&f({seriesId:e});return(0,Y.jsx)(`g`,{clipPath:`url(#${r})`,"data-series":e,children:s.map(({x:t,y:r,index:s,color:f})=>(0,Y.jsx)(l,K({id:e,dataIndex:s,shape:i,color:f,x:t,y:r,skipAnimation:c,onClick:a&&(t=>a(t,{type:`line`,seriesId:e,dataIndex:s})),isHighlighted:h[o]?.has(s)||u,isFaded:d},n?.mark),`${e}-${s}`))},e)})}))}var Qo=[`x`,`y`,`id`,`classes`,`color`,`shape`];function $o(e){return U(`MuiHighlightElement`,e)}q(`MuiHighlightElement`,[`root`]);var es=e=>{let{classes:t,id:n}=e;return V({root:[`root`,`series-${n}`]},$o,t)};function ts(e){let{x:t,y:n,color:r,shape:i}=e,a=B(e,Qo),o=es(e),s=i===`circle`?`circle`:`path`,c=i===`circle`?{cx:0,cy:0,r:a.r===void 0?5:a.r}:{d:Fn(Pn[Go(i)])()},l=ne>18?{transformOrigin:`${t} ${n}`}:{"transform-origin":`${t} ${n}`};return(0,Y.jsx)(s,K({pointerEvents:`none`,className:o.root,transform:`translate(${t} ${n})`,fill:r},l,c,a))}var ns=[`slots`,`slotProps`];function rs(e){let{slots:t,slotProps:n}=e,r=B(e,ns),s=ar(),{xAxis:c,xAxisIds:l}=b(),{yAxis:u,yAxisIds:d}=i(),{instance:f}=o(),p=F(x(),an);if(p.length===0||s===void 0)return null;let{series:m,stackingGroups:h}=s,g=l[0],_=d[0],v=t?.lineHighlight??ts;return(0,Y.jsx)(`g`,K({},r,{children:p.flatMap(({dataIndex:e,axisId:t})=>h.flatMap(({ids:r})=>r.flatMap(r=>{let{xAxisId:i=g,yAxisId:o=_,stackedData:s,data:l,disableHighlight:d,shape:p=`circle`}=m[r];if(d||l[e]==null||t!==i)return null;let h=rr(c[i].scale),y=u[o].scale,b=c[i].data;if(b===void 0)throw Error(`MUI X Charts: ${i===`DEFAULT_X_AXIS_KEY`?"The first `xAxis`":`The x-axis with id "${i}"`} should have data property to be able to display a line plot.`);let x=h(b[e]),S=y(s[e][1]);return f.isPointInside(x,S)?(0,Y.jsx)(v,K({id:r,color:a(m[r],c[i],u[o])(e),x,y:S,shape:p},n?.lineHighlight),`${r}`):null})))}))}const is=[r,w,S,Te,E,je,l];var as=`xAxis.yAxis.series.width.height.margin.colors.dataset.sx.onAreaClick.onLineClick.onMarkClick.axisHighlight.disableLineItemHighlight.hideLegend.grid.children.slots.slotProps.skipAnimation.loading.highlightedItem.onHighlightChange.className.showToolbar.brushConfig`.split(`.`);const os=e=>{let{xAxis:t,yAxis:n,series:r,width:i,height:a,margin:o,colors:s,dataset:c,sx:l,onAreaClick:u,onLineClick:d,onMarkClick:f,axisHighlight:p,disableLineItemHighlight:m,grid:h,children:g,slots:_,slotProps:v,skipAnimation:y,loading:b,highlightedItem:x,onHighlightChange:S,className:C,brushConfig:w}=e,T=B(e,as),E=`${it()}-clip-path`,D=K({},T,{series:J.useMemo(()=>r.map(e=>K({disableHighlight:!!m,type:`line`},e)),[m,r]),width:i,height:a,margin:o,colors:s,dataset:c,xAxis:t??[{id:`DEFAULT_X_AXIS_KEY`,scaleType:`point`,data:Array.from({length:Math.max(...r.map(e=>(e.data??c??[]).length))},(e,t)=>t)}],yAxis:n,highlightedItem:x,onHighlightChange:S,disableAxisListener:v?.tooltip?.trigger!==`axis`&&p?.x===`none`&&p?.y===`none`,className:C,skipAnimation:y,brushConfig:w,plugins:is}),O={vertical:h?.vertical,horizontal:h?.horizontal},k={clipPath:`url(#${E})`},A={id:E},j={slots:_,slotProps:v,onItemClick:u},M={slots:_,slotProps:v,onItemClick:d},N={slots:_,slotProps:v,onItemClick:f,skipAnimation:y},P={slots:_,slotProps:v,loading:b},F={slots:_,slotProps:v},ee=K({x:`line`},p),te={slots:_,slotProps:v},ne={slots:_,slotProps:v};return{chartsWrapperProps:{sx:l,legendPosition:e.slotProps?.legend?.position,legendDirection:e.slotProps?.legend?.direction,hideLegend:e.hideLegend??!1},chartContainerProps:D,gridProps:O,clipPathProps:A,clipPathGroupProps:k,areaPlotProps:j,linePlotProps:M,markPlotProps:N,overlayProps:P,chartsAxisProps:F,axisHighlightProps:ee,lineHighlightPlotProps:te,legendProps:ne,children:g}};var ss=6;function cs(){let e=Ye(),t=le(),n=ar(),{xAxis:r,xAxisIds:a}=b(),{yAxis:o,yAxisIds:s}=i();if(t===null||t.seriesType!==`line`||!n)return null;let c=n?.series[t.seriesId],l=c.xAxisId??a[0],u=c.yAxisId??s[0];return(0,Y.jsx)(`rect`,{fill:`none`,stroke:(e.vars??e).palette.text.primary,strokeWidth:2,x:r[l].scale(r[l].data[t.dataIndex])-ss,y:o[u].scale(c.stackedData[t.dataIndex][1])-ss,width:2*ss,height:2*ss,rx:3,ry:3})}var ls=J.forwardRef(function(e,t){let n=I({props:e,name:`MuiLineChart`}),{chartsWrapperProps:r,chartContainerProps:i,gridProps:a,clipPathProps:o,clipPathGroupProps:s,areaPlotProps:c,linePlotProps:l,markPlotProps:u,overlayProps:d,chartsAxisProps:f,axisHighlightProps:p,lineHighlightPlotProps:m,legendProps:h,children:g}=os(n),{chartDataProviderProps:_,chartsSurfaceProps:v}=be(i,t),y=n.slots?.tooltip??P,b=n.slots?.toolbar;return(0,Y.jsx)(ae,K({},_,{children:(0,Y.jsxs)(pe,K({},r,{children:[n.showToolbar&&b?(0,Y.jsx)(b,K({},n.slotProps?.toolbar)):null,!n.hideLegend&&(0,Y.jsx)(Ee,K({},h)),(0,Y.jsxs)(k,K({},v,{children:[(0,Y.jsx)(Xa,K({},a)),(0,Y.jsxs)(`g`,K({},s,{children:[(0,Y.jsx)(Eo,K({},c)),(0,Y.jsx)(Ro,K({},l)),(0,Y.jsx)(he,K({},d)),(0,Y.jsx)(Ba,K({},p))]})),(0,Y.jsx)(cs,{}),(0,Y.jsx)(Pa,K({},f)),(0,Y.jsx)(`g`,{"data-drawing-container":!0,children:(0,Y.jsx)(Zo,K({},u))}),(0,Y.jsx)(rs,K({},m)),(0,Y.jsx)(Va,K({},o)),g]})),!n.loading&&(0,Y.jsx)(y,K({},n.slotProps?.tooltip))]}))}))});function us({distribution:e,parentId:t}){let n=e.filter(e=>String(e.year)!==`1`).sort((e,t)=>Number(e.year)-Number(t.year));if(n.length===0)return(0,Y.jsx)($,{subsectionId:`years`,parentId:t,title:`Years`,children:(0,Y.jsx)(G,{color:`text.secondary`,children:`No year data available`})});let r=n.map(e=>String(e.year)),i=n.map(e=>e.count);return(0,Y.jsx)($,{subsectionId:`years`,parentId:t,title:`Years`,secondary:(0,Y.jsxs)(G,{variant:`body2`,color:`text.secondary`,children:[n.length,` years`]}),children:(0,Y.jsx)(ls,{height:250,xAxis:[{scaleType:`point`,data:r}],series:[{data:i,curve:`catmullRom`,showMark:!1}],margin:{left:50,right:20,top:20,bottom:30}})})}function ds({libraryId:e}){let[t,n]=(0,J.useState)(null),[r,i]=(0,J.useState)(!0),[a,o]=(0,J.useState)(null);return(0,J.useEffect)(()=>{(async()=>{try{i(!0),o(null),n(await Tt(e))}catch(e){o(e instanceof Error?e.message:`Failed to load collection overview`),console.error(`[CollectionOverview] Load error:`,e)}finally{i(!1)}})()},[e]),r?(0,Y.jsx)(br,{sectionId:`collection-overview`,title:`Collection Overview`,children:(0,Y.jsx)(ut,{size:24})}):a||!t?(0,Y.jsx)(br,{sectionId:`collection-overview`,title:`Collection Overview`,children:(0,Y.jsx)(St,{severity:`error`,children:a||`Failed to load collection overview`})}):(0,Y.jsxs)(br,{sectionId:`collection-overview`,title:`Collection Overview`,secondary:(0,Y.jsxs)(G,{variant:`body2`,color:`text.secondary`,children:[t.stats.file_count.toLocaleString(),` tracks`]}),children:[(0,Y.jsx)(co,{stats:t.stats,parentId:`collection-overview`}),(0,Y.jsx)(us,{distribution:t.year_distribution,parentId:`collection-overview`}),(0,Y.jsx)(io,{distribution:t.genre_distribution,parentId:`collection-overview`}),(0,Y.jsx)(no,{distribution:t.artist_distribution,parentId:`collection-overview`})]})}function fs({value:e,onChange:t}){let[n,r]=(0,J.useState)([]),[i,a]=(0,J.useState)(!0);return(0,J.useEffect)(()=>{(async()=>{try{r(await st(!0))}catch(e){console.error(`[LibraryFilter] Failed to load libraries:`,e)}finally{a(!1)}})()},[]),(0,Y.jsxs)(Pe,{size:`small`,sx:{minWidth:200},children:[(0,Y.jsx)(Ie,{id:`library-filter-label`,children:`Library`}),(0,Y.jsxs)(Fe,{labelId:`library-filter-label`,id:`library-filter`,value:e??``,label:`Library`,onChange:e=>{let n=e.target.value;t(n===``?void 0:n)},disabled:i,children:[(0,Y.jsx)(ze,{value:``,children:`All Libraries`}),n.map(e=>(0,Y.jsx)(ze,{value:e.library_id,children:e.name},e.library_id))]})]})}function ps({vibes:e,parentId:t}){return e.length===0?(0,Y.jsx)($,{subsectionId:`vibes`,parentId:t,title:`Dominant Vibes`,children:(0,Y.jsx)(G,{color:`text.secondary`,children:`No mood data available`})}):(0,Y.jsx)($,{subsectionId:`vibes`,parentId:t,title:`Dominant Vibes`,children:(0,Y.jsx)(W,{sx:{display:`flex`,flexWrap:`wrap`,gap:2},children:e.map((e,t)=>(0,Y.jsxs)(W,{sx:{textAlign:`center`,flex:`1 1 100px`,p:1,borderRadius:1,bgcolor:t===0?`primary.main`:`action.hover`,color:t===0?`primary.contrastText`:`text.primary`},children:[(0,Y.jsxs)(G,{variant:`h6`,children:[e.percentage.toFixed(0),`%`]}),(0,Y.jsx)(G,{variant:`body2`,sx:{textTransform:`capitalize`},children:e.mood})]},e.mood))})})}function ms({pairs:e,parentId:t,tierSelector:n}){return e.length===0?(0,Y.jsx)($,{subsectionId:`combos`,parentId:t,title:`Mood Combos`,secondary:(0,Y.jsx)(W,{sx:{display:`flex`,alignItems:`center`,gap:1},children:n}),children:(0,Y.jsx)(G,{color:`text.secondary`,children:`No mood combinations found`})}):(0,Y.jsx)($,{subsectionId:`combos`,parentId:t,title:`Mood Combos`,defaultExpanded:!1,secondary:(0,Y.jsxs)(W,{sx:{display:`flex`,alignItems:`center`,gap:1},children:[(0,Y.jsx)(G,{variant:`body2`,color:`text.secondary`,children:`Top pairs`}),n]}),children:(0,Y.jsx)(W,{sx:{display:`flex`,flexWrap:`wrap`,gap:1},children:e.map((e,t)=>(0,Y.jsx)(Re,{label:(0,Y.jsxs)(W,{sx:{display:`flex`,alignItems:`center`,gap:.5},children:[(0,Y.jsx)(G,{variant:`body2`,component:`span`,sx:{textTransform:`capitalize`},children:e.mood1}),(0,Y.jsx)(G,{variant:`body2`,component:`span`,color:`text.secondary`,children:`+`}),(0,Y.jsx)(G,{variant:`body2`,component:`span`,sx:{textTransform:`capitalize`},children:e.mood2}),(0,Y.jsxs)(G,{variant:`body2`,component:`span`,color:`text.secondary`,sx:{ml:.5},children:[`(`,e.count,`)`]})]}),variant:t<3?`filled`:`outlined`,color:t<3?`primary`:`default`,size:`small`},`${e.mood1}-${e.mood2}`))})})}var hs={strict:`Strict`,regular:`Regular`,loose:`Loose`},gs=[`strict`,`regular`,`loose`];function _s({coverage:e,balance:t,parentId:n}){let r=gs.filter(n=>n in e.tiers||n in t);return(0,Y.jsx)($,{subsectionId:`coverage`,parentId:n,title:`Mood Coverage`,secondary:(0,Y.jsxs)(G,{variant:`body2`,color:`text.secondary`,children:[e.total_files.toLocaleString(),` tracks`]}),children:(0,Y.jsx)(W,{sx:{display:`flex`,gap:2,flexWrap:`wrap`,justifyContent:`center`},children:r.map(n=>{let r=e.tiers[n],i=(t[n]||[]).map((e,t)=>({id:t,value:e.count,label:e.mood}));return(0,Y.jsxs)(W,{sx:{textAlign:`center`,minWidth:200},children:[(0,Y.jsx)(G,{variant:`subtitle2`,children:hs[n]||n}),r&&(0,Y.jsxs)(G,{variant:`caption`,color:`text.secondary`,children:[r.tagged.toLocaleString(),` tagged (`,r.percentage.toFixed(1),`%)`]}),i.length>0?(0,Y.jsx)(we,{series:[{data:i,innerRadius:25,outerRadius:80,paddingAngle:1,cornerRadius:3}],height:200,width:250,hideLegend:!0}):(0,Y.jsx)(G,{variant:`body2`,color:`text.secondary`,sx:{mt:2},children:`No data`})]},n)})})})}var vs=[{value:`strict`,label:`Strict`},{value:`regular`,label:`Regular`},{value:`loose`,label:`Loose`}];function ys({libraryId:e}){let[t,n]=(0,J.useState)(null),[r,i]=(0,J.useState)(!0),[a,o]=(0,J.useState)(null),[s,c]=(0,J.useState)(`strict`);return(0,J.useEffect)(()=>{(async()=>{try{i(!0),o(null),n(await We(e,s))}catch(e){o(e instanceof Error?e.message:`Failed to load mood analysis`),console.error(`[MoodAnalysis] Load error:`,e)}finally{i(!1)}})()},[e,s]),r?(0,Y.jsx)(br,{sectionId:`mood-analysis`,title:`Mood Analysis`,children:(0,Y.jsx)(ut,{size:24})}):a||!t?(0,Y.jsx)(br,{sectionId:`mood-analysis`,title:`Mood Analysis`,children:(0,Y.jsx)(St,{severity:`error`,children:a||`Failed to load mood analysis`})}):(0,Y.jsxs)(br,{sectionId:`mood-analysis`,title:`Mood Analysis`,secondary:(0,Y.jsxs)(G,{variant:`body2`,color:`text.secondary`,children:[(t.coverage.tiers.strict?.percentage??0).toFixed(0),`% strict coverage`]}),children:[(0,Y.jsx)(_s,{coverage:t.coverage,balance:t.balance,parentId:`mood-analysis`}),(0,Y.jsx)(ps,{vibes:t.dominant_vibes,parentId:`mood-analysis`}),(0,Y.jsx)(ms,{pairs:t.top_pairs,parentId:`mood-analysis`,tierSelector:(0,Y.jsxs)(Pe,{size:`small`,sx:{minWidth:120},onClick:e=>e.stopPropagation(),children:[(0,Y.jsx)(Ie,{id:`mood-tier-label`,children:`Tier`}),(0,Y.jsx)(Fe,{labelId:`mood-tier-label`,id:`mood-tier-select`,value:s,label:`Tier`,onChange:e=>{c(e.target.value)},children:vs.map(e=>(0,Y.jsx)(ze,{value:e.value,children:e.label},e.value))})]})})]})}function bs(){let[t,n]=(0,J.useState)(void 0);return(0,Y.jsxs)(e,{spacing:0,sx:{mt:2},children:[(0,Y.jsx)(W,{sx:{mb:2},children:(0,Y.jsx)(fs,{value:t,onChange:n})}),(0,Y.jsx)(ds,{libraryId:t}),(0,Y.jsx)(ys,{libraryId:t}),(0,Y.jsx)(xr,{libraryId:t})]})}function xs({preview:t,configText:n,loading:r,error:i,onLoadPreview:a,onGenerateConfig:o}){let{showSuccess:s}=Et();return(0,Y.jsxs)(e,{spacing:2.5,children:[(0,Y.jsxs)(et,{children:[(0,Y.jsx)(at,{title:`Navidrome TOML Configuration`}),(0,Y.jsxs)(e,{spacing:1.25,children:[(0,Y.jsx)(pt,{onClick:a,disabled:r,variant:`contained`,fullWidth:!0,children:r?`Loading...`:`Load Tag Preview`}),(0,Y.jsx)(pt,{onClick:o,disabled:r,variant:`contained`,fullWidth:!0,children:r?`Generating...`:`Generate Config`})]}),i&&(0,Y.jsxs)(rt,{children:[`Error: `,i]})]}),t&&(0,Y.jsxs)(et,{children:[(0,Y.jsx)(at,{title:`Tag Preview`}),(0,Y.jsx)(W,{sx:{overflowX:`auto`},children:(0,Y.jsxs)(Be,{children:[(0,Y.jsx)(He,{children:(0,Y.jsxs)(Ue,{children:[(0,Y.jsx)(R,{sx:{bgcolor:`background.default`,borderBottom:2},children:`Tag`}),(0,Y.jsx)(R,{sx:{bgcolor:`background.default`,borderBottom:2},children:`Type`}),(0,Y.jsx)(R,{sx:{bgcolor:`background.default`,borderBottom:2},children:`Multivalue`}),(0,Y.jsx)(R,{sx:{bgcolor:`background.default`,borderBottom:2},children:`Count`}),(0,Y.jsx)(R,{sx:{bgcolor:`background.default`,borderBottom:2},children:`Summary`})]})}),(0,Y.jsx)(Ve,{children:t.map(e=>(0,Y.jsxs)(Ue,{children:[(0,Y.jsx)(R,{sx:{borderColor:`divider`},children:e.tag_key}),(0,Y.jsx)(R,{sx:{borderColor:`divider`},children:e.type}),(0,Y.jsx)(R,{sx:{borderColor:`divider`},children:e.is_multivalue?`Yes`:`No`}),(0,Y.jsx)(R,{sx:{borderColor:`divider`},children:e.total_count}),(0,Y.jsx)(R,{sx:{borderColor:`divider`},children:e.summary})]},e.tag_key))})]})})]}),n&&(0,Y.jsxs)(et,{children:[(0,Y.jsx)(at,{title:`Generated Config`}),(0,Y.jsx)(Le,{multiline:!0,rows:20,value:n,fullWidth:!0,InputProps:{readOnly:!0,sx:{fontFamily:`monospace`,fontSize:`0.875rem`}}}),(0,Y.jsx)(pt,{onClick:()=>{n&&(navigator.clipboard.writeText(n),s(`Copied to clipboard!`))},variant:`contained`,sx:{mt:1.25},children:`Copy to Clipboard`})]})]})}function Ss({query:t,name:n,comment:r,limit:i,sort:a,preview:o,content:s,loading:c,error:l,onQueryChange:u,onNameChange:d,onCommentChange:f,onLimitChange:p,onSortChange:m,onPreview:h,onGenerate:g}){return(0,Y.jsxs)(e,{spacing:2.5,children:[(0,Y.jsxs)(et,{children:[(0,Y.jsx)(at,{title:`Smart Playlist Generator`}),(0,Y.jsx)(W,{component:`form`,onSubmit:h,children:(0,Y.jsxs)(e,{spacing:2,children:[(0,Y.jsxs)(W,{children:[(0,Y.jsx)(G,{variant:`body2`,color:`text.secondary`,sx:{mb:.5,fontWeight:600},children:`Query *`}),(0,Y.jsx)(Le,{value:t,onChange:e=>u(e.target.value),placeholder:`e.g., tag:nom_happy > 0.8`,multiline:!0,rows:3,disabled:c,required:!0,fullWidth:!0,InputProps:{sx:{fontFamily:`monospace`,fontSize:`0.875rem`}}})]}),(0,Y.jsxs)(W,{children:[(0,Y.jsx)(G,{variant:`body2`,color:`text.secondary`,sx:{mb:.5,fontWeight:600},children:`Playlist Name *`}),(0,Y.jsx)(Le,{value:n,onChange:e=>d(e.target.value),disabled:c,required:!0,fullWidth:!0})]}),(0,Y.jsxs)(W,{children:[(0,Y.jsx)(G,{variant:`body2`,color:`text.secondary`,sx:{mb:.5,fontWeight:600},children:`Comment`}),(0,Y.jsx)(Le,{value:r,onChange:e=>f(e.target.value),disabled:c,fullWidth:!0})]}),(0,Y.jsxs)(W,{sx:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:1.25},children:[(0,Y.jsxs)(W,{children:[(0,Y.jsx)(G,{variant:`body2`,color:`text.secondary`,sx:{mb:.5,fontWeight:600},children:`Limit`}),(0,Y.jsx)(Le,{type:`number`,value:i??``,onChange:e=>p(e.target.value?parseInt(e.target.value):void 0),disabled:c,placeholder:`Optional`,fullWidth:!0})]}),(0,Y.jsxs)(W,{children:[(0,Y.jsx)(G,{variant:`body2`,color:`text.secondary`,sx:{mb:.5,fontWeight:600},children:`Sort`}),(0,Y.jsx)(Le,{value:a,onChange:e=>m(e.target.value),disabled:c,placeholder:`Optional`,fullWidth:!0})]})]}),(0,Y.jsxs)(e,{direction:`row`,spacing:1.25,children:[(0,Y.jsx)(pt,{type:`submit`,variant:`contained`,disabled:c,fullWidth:!0,children:c?`Loading...`:`Preview Query`}),(0,Y.jsx)(pt,{type:`button`,onClick:g,variant:`contained`,disabled:c,fullWidth:!0,children:c?`Generating...`:`Generate .nsp`})]})]})}),l&&(0,Y.jsxs)(rt,{children:[`Error: `,l]})]}),o&&(0,Y.jsxs)(et,{children:[(0,Y.jsx)(at,{title:`Query Preview`}),(0,Y.jsx)(W,{component:`pre`,sx:{p:2,bgcolor:`background.default`,border:1,borderColor:`divider`,borderRadius:1,overflow:`auto`,fontSize:`0.875rem`,fontFamily:`monospace`},children:JSON.stringify(o,null,2)})]}),s&&(0,Y.jsxs)(et,{children:[(0,Y.jsx)(at,{title:`Generated Playlist (.nsp)`}),(0,Y.jsx)(Le,{multiline:!0,rows:15,value:s,fullWidth:!0,InputProps:{readOnly:!0,sx:{fontFamily:`monospace`,fontSize:`0.875rem`}}}),(0,Y.jsx)(pt,{onClick:()=>{if(s){let e=new Blob([s],{type:`text/plain`}),t=URL.createObjectURL(e),r=document.createElement(`a`);r.href=t,r.download=`${n}.nsp`,r.click(),URL.revokeObjectURL(t)}},variant:`contained`,sx:{mt:1.25},children:`Download .nsp File`})]})]})}function Cs(){let{showError:e}=Et(),[t,n]=(0,J.useState)(null),[r,i]=(0,J.useState)(null),[a,o]=(0,J.useState)(!1),[s,c]=(0,J.useState)(null),[l,u]=(0,J.useState)(``),[d,f]=(0,J.useState)(`My Playlist`),[p,m]=(0,J.useState)(``),[h,g]=(0,J.useState)(void 0),[_,v]=(0,J.useState)(``),[y,b]=(0,J.useState)(null),[x,S]=(0,J.useState)(null),[C,w]=(0,J.useState)(!1),[T,E]=(0,J.useState)(null);return{configPreview:t,configText:r,configLoading:a,configError:s,playlistQuery:l,playlistName:d,playlistComment:p,playlistLimit:h,playlistSort:_,playlistPreview:y,playlistContent:x,playlistLoading:C,playlistError:T,loadConfigPreview:async()=>{try{o(!0),c(null),n((await yt()).tags)}catch(e){c(e instanceof Error?e.message:`Failed to load preview`)}finally{o(!1)}},generateConfig:async()=>{try{o(!0),c(null),i((await _t()).config)}catch(e){c(e instanceof Error?e.message:`Failed to generate config`)}finally{o(!1)}},previewPlaylist:async e=>{if(e.preventDefault(),l.trim())try{w(!0),E(null),b(await ft(l,10))}catch(e){E(e instanceof Error?e.message:`Failed to preview playlist`)}finally{w(!1)}},generatePlaylist:async()=>{if(!l.trim()){e(`Query is required`);return}if(!d.trim()){e(`Playlist name is required`);return}try{w(!0),E(null),S((await bt({query:l,playlist_name:d,comment:p,limit:h,sort:_||void 0})).content)}catch(e){E(e instanceof Error?e.message:`Failed to generate playlist`)}finally{w(!1)}},setPlaylistQuery:u,setPlaylistName:f,setPlaylistComment:m,setPlaylistLimit:g,setPlaylistSort:v}}function ws(){let[e,t]=(0,J.useState)(`config`),{configPreview:n,configText:r,configLoading:i,configError:a,playlistQuery:o,playlistName:s,playlistComment:c,playlistLimit:l,playlistSort:u,playlistPreview:d,playlistContent:f,playlistLoading:p,playlistError:m,loadConfigPreview:h,generateConfig:g,previewPlaylist:_,generatePlaylist:v,setPlaylistQuery:y,setPlaylistName:b,setPlaylistComment:x,setPlaylistLimit:S,setPlaylistSort:C}=Cs();return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(Qe,{tabs:[{id:`config`,label:`Config Generator`},{id:`playlist`,label:`Playlist Generator`}],activeTab:e,onTabChange:e=>t(e)}),e===`config`&&(0,Y.jsx)(xs,{preview:n,configText:r,loading:i,error:a,onLoadPreview:h,onGenerateConfig:g}),e===`playlist`&&(0,Y.jsx)(Ss,{query:o,name:s,comment:c,limit:l,sort:u,preview:d,content:f,loading:p,error:m,onQueryChange:y,onNameChange:b,onCommentChange:x,onLimitChange:S,onSortChange:C,onPreview:_,onGenerate:v})]})}function Ts(){let[e,t]=(0,J.useState)(`analytics`);return(0,Y.jsxs)(Je,{title:`Insights`,children:[(0,Y.jsx)(Qe,{tabs:[{id:`analytics`,label:`Analytics`},{id:`navidrome`,label:`Navidrome Integration`}],activeTab:e,onTabChange:e=>t(e)}),e===`analytics`&&(0,Y.jsx)(bs,{}),e===`navidrome`&&(0,Y.jsx)(ws,{})]})}export{Ts as InsightsPage};