import{t as e}from"./Stack-DwQqt1wJ.js";import{$ as t,A as n,B as r,C as i,Ct as a,D as o,E as s,F as c,G as l,H as u,I as d,J as f,K as p,L as m,M as h,N as g,O as _,P as v,Q as y,R as b,S as x,St as S,T as C,U as w,V as T,W as E,X as D,Y as O,Z as k,_ as A,_t as j,a as M,at as N,b as P,bt as ee,c as te,ct as ne,d as re,dt as ie,et as ae,f as oe,ft as F,g as se,gt as ce,h as le,ht as I,i as ue,it as de,j as fe,k as pe,l as me,lt as he,m as ge,mt as _e,n as ve,nt as ye,o as be,ot as xe,p as Se,pt as Ce,q as we,r as Te,rt as Ee,s as De,st as Oe,t as ke,tt as Ae,u as je,ut as Me,v as Ne,vt as Pe,w as Fe,wt as Ie,x as Le,xt as Re,y as ze,yt as Be,z as Ve}from"./PieChart-CwBrpAs9.js";import{r as L}from"./List-DhdsPCof.js";import{c as He,i as Ue,n as We,r as Ge,t as Ke}from"./TextField-BrGVnQuQ.js";import"./Popper-D4VkHgQT.js";import{n as qe,t as Je}from"./MenuItem-C4ZRQL8T.js";import"./listItemTextClasses-C5tmfPgJ.js";import{a as Ye,i as Xe,n as Ze,r as R,t as Qe}from"./TableRow-D5cqyXnW.js";import{B as $e,Dt as et,G as tt,It as nt,K as rt,Kt as it,Lt as at,Mt as ot,Ot as z,Q as st,Qt as ct,Sn as lt,St as ut,Ut as B,V as dt,Vt as ft,W as pt,Xt as V,Yt as mt,Z as ht,Zt as gt,_ as _t,_t as H,an as U,at as W,c as vt,ct as G,dn as yt,fn as K,ft as bt,gt as xt,i as St,it as Ct,kt as wt,l as Tt,mt as Et,n as Dt,on as q,r as Ot,sn as kt,t as At,tn as jt,ut as Mt,wn as Nt,wt as Pt,z as Ft}from"./index-DtjqrSiu.js";import{t as It}from"./useNotification-DpxCERJy.js";function Lt(e){return q(`MuiCollapse`,e)}U(`MuiCollapse`,[`root`,`horizontal`,`vertical`,`entered`,`hidden`,`wrapper`,`wrapperInner`]);var J=Nt(lt()),Y=Nt(yt()),Rt=e=>{let{orientation:t,classes:n}=e;return V({root:[`root`,`${t}`],entered:[`entered`],hidden:[`hidden`],wrapper:[`wrapper`,`${t}`],wrapperInner:[`wrapperInner`,`${t}`]},Lt,n)},zt=B(`div`,{name:`MuiCollapse`,slot:`Root`,overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,t[n.orientation],n.state===`entered`&&t.entered,n.state===`exited`&&!n.in&&n.collapsedSize===`0px`&&t.hidden]}})(at(({theme:e})=>({height:0,overflow:`hidden`,transition:e.transitions.create(`height`),variants:[{props:{orientation:`horizontal`},style:{height:`auto`,width:0,transition:e.transitions.create(`width`)}},{props:{state:`entered`},style:{height:`auto`,overflow:`visible`}},{props:{state:`entered`,orientation:`horizontal`},style:{width:`auto`}},{props:({ownerState:e})=>e.state===`exited`&&!e.in&&e.collapsedSize===`0px`,style:{visibility:`hidden`}}]}))),Bt=B(`div`,{name:`MuiCollapse`,slot:`Wrapper`})({display:`flex`,width:`100%`,variants:[{props:{orientation:`horizontal`},style:{width:`auto`,height:`100%`}}]}),Vt=B(`div`,{name:`MuiCollapse`,slot:`WrapperInner`})({width:`100%`,variants:[{props:{orientation:`horizontal`},style:{width:`auto`,height:`100%`}}]}),Ht=J.forwardRef(function(e,t){let n=ft({props:e,name:`MuiCollapse`}),{addEndListener:r,children:i,className:a,collapsedSize:o=`0px`,component:s,easing:c,in:l,onEnter:u,onEntered:d,onEntering:f,onExit:p,onExited:m,onExiting:h,orientation:g=`vertical`,slots:_={},slotProps:v={},style:y,timeout:b=mt.standard,TransitionComponent:x=et,...S}=n,C={...n,orientation:g,collapsedSize:o},w=Rt(C),T=it(),E=Pt(),D=J.useRef(null),O=J.useRef(),k=typeof o==`number`?`${o}px`:o,A=g===`horizontal`,j=A?`width`:`height`,M=J.useRef(null),N=wt(t,M),P=e=>t=>{if(e){let n=M.current;t===void 0?e(n):e(n,t)}},ee=()=>D.current?D.current[A?`clientWidth`:`clientHeight`]:0,te=P((e,t)=>{D.current&&A&&(D.current.style.position=`absolute`),e.style[j]=k,u&&u(e,t)}),ne=P((e,t)=>{let n=ee();D.current&&A&&(D.current.style.position=``);let{duration:r,easing:i}=ut({style:y,timeout:b,easing:c},{mode:`enter`});if(b===`auto`){let t=T.transitions.getAutoHeightDuration(n);e.style.transitionDuration=`${t}ms`,O.current=t}else e.style.transitionDuration=typeof r==`string`?r:`${r}ms`;e.style[j]=`${n}px`,e.style.transitionTimingFunction=i,f&&f(e,t)}),re=P((e,t)=>{e.style[j]=`auto`,d&&d(e,t)}),ie=P(e=>{e.style[j]=`${ee()}px`,p&&p(e)}),ae=P(m),oe=P(e=>{let t=ee(),{duration:n,easing:r}=ut({style:y,timeout:b,easing:c},{mode:`exit`});if(b===`auto`){let n=T.transitions.getAutoHeightDuration(t);e.style.transitionDuration=`${n}ms`,O.current=n}else e.style.transitionDuration=typeof n==`string`?n:`${n}ms`;e.style[j]=k,e.style.transitionTimingFunction=r,h&&h(e)}),F=e=>{b===`auto`&&E.start(O.current||0,e),r&&r(M.current,e)},se={slots:_,slotProps:v,component:s},[ce,le]=H(`root`,{ref:N,className:kt(w.root,a),elementType:zt,externalForwardedProps:se,ownerState:C,additionalProps:{style:{[A?`minWidth`:`minHeight`]:k,...y}}}),[I,ue]=H(`wrapper`,{ref:D,className:w.wrapper,elementType:Bt,externalForwardedProps:se,ownerState:C}),[de,fe]=H(`wrapperInner`,{className:w.wrapperInner,elementType:Vt,externalForwardedProps:se,ownerState:C});return(0,Y.jsx)(x,{in:l,onEnter:te,onEntered:re,onEntering:ne,onExit:ie,onExited:ae,onExiting:oe,addEndListener:F,nodeRef:M,timeout:b===`auto`?null:b,...S,children:(e,{ownerState:t,...n})=>{let r={...C,state:e};return(0,Y.jsx)(ce,{...le,className:kt(le.className,{entered:w.entered,exited:!l&&k===`0px`&&w.hidden}[e]),ownerState:r,...n,children:(0,Y.jsx)(I,{...ue,ownerState:r,children:(0,Y.jsx)(de,{...fe,ownerState:r,children:i})})})}})});Ht&&(Ht.muiSupportAuto=!0);var Ut=Ht,Wt=J.createContext({});function Gt(e){return q(`MuiAccordion`,e)}var Kt=U(`MuiAccordion`,[`root`,`heading`,`rounded`,`expanded`,`disabled`,`gutters`,`region`]),qt=e=>{let{classes:t,square:n,expanded:r,disabled:i,disableGutters:a}=e;return V({root:[`root`,!n&&`rounded`,r&&`expanded`,i&&`disabled`,!a&&`gutters`],heading:[`heading`],region:[`region`]},Gt,t)},Jt=B(xt,{name:`MuiAccordion`,slot:`Root`,overridesResolver:(e,t)=>{let{ownerState:n}=e;return[{[`& .${Kt.region}`]:t.region},t.root,!n.square&&t.rounded,!n.disableGutters&&t.gutters]}})(at(({theme:e})=>{let t={duration:e.transitions.duration.shortest};return{position:`relative`,transition:e.transitions.create([`margin`],t),overflowAnchor:`none`,"&::before":{position:`absolute`,left:0,top:-1,right:0,height:1,content:`""`,opacity:1,backgroundColor:(e.vars||e).palette.divider,transition:e.transitions.create([`opacity`,`background-color`],t)},"&:first-of-type":{"&::before":{display:`none`}},[`&.${Kt.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:`none`}}},[`&.${Kt.disabled}`]:{backgroundColor:(e.vars||e).palette.action.disabledBackground}}}),at(({theme:e})=>({variants:[{props:e=>!e.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(e.vars||e).shape.borderRadius,borderBottomRightRadius:(e.vars||e).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:e=>!e.disableGutters,style:{[`&.${Kt.expanded}`]:{margin:`16px 0`}}}]}))),Yt=B(`h3`,{name:`MuiAccordion`,slot:`Heading`})({all:`unset`}),Xt=B(`div`,{name:`MuiAccordion`,slot:`Region`})({}),Zt=J.forwardRef(function(e,t){let n=ft({props:e,name:`MuiAccordion`}),{children:r,className:i,defaultExpanded:a=!1,disabled:o=!1,disableGutters:s=!1,expanded:c,onChange:l,slots:u={},slotProps:d={},TransitionComponent:f,TransitionProps:p,...m}=n,[h,g]=He({controlled:c,default:a,name:`Accordion`,state:`expanded`}),_=J.useCallback(e=>{g(!h),l&&l(e,!h)},[h,l,g]),[v,...y]=J.Children.toArray(r),b=J.useMemo(()=>({expanded:h,disabled:o,disableGutters:s,toggle:_}),[h,o,s,_]),x={...n,disabled:o,disableGutters:s,expanded:h},S=qt(x),C={slots:{transition:f,...u},slotProps:{transition:p,...d}},[w,T]=H(`root`,{elementType:Jt,externalForwardedProps:{...C,...m},className:kt(S.root,i),shouldForwardComponentProp:!0,ownerState:x,ref:t}),[E,D]=H(`heading`,{elementType:Yt,externalForwardedProps:C,className:S.heading,ownerState:x}),[O,k]=H(`transition`,{elementType:Ut,externalForwardedProps:C,ownerState:x}),[A,j]=H(`region`,{elementType:Xt,externalForwardedProps:C,ownerState:x,className:S.region,additionalProps:{"aria-labelledby":v.props.id,id:v.props[`aria-controls`],role:`region`}});return(0,Y.jsxs)(w,{...T,children:[(0,Y.jsx)(E,{...D,children:(0,Y.jsx)(Wt.Provider,{value:b,children:v})}),(0,Y.jsx)(O,{in:h,timeout:`auto`,...k,children:(0,Y.jsx)(A,{...j,children:y})})]})});function Qt(e){return q(`MuiAccordionDetails`,e)}U(`MuiAccordionDetails`,[`root`]);var $t=e=>{let{classes:t}=e;return V({root:[`root`]},Qt,t)},en=B(`div`,{name:`MuiAccordionDetails`,slot:`Root`})(at(({theme:e})=>({padding:e.spacing(1,2,2)}))),tn=J.forwardRef(function(e,t){let n=ft({props:e,name:`MuiAccordionDetails`}),{className:r,...i}=n,a=n;return(0,Y.jsx)(en,{className:kt($t(a).root,r),ref:t,ownerState:a,...i})});function nn(e){return q(`MuiAccordionSummary`,e)}var rn=U(`MuiAccordionSummary`,[`root`,`expanded`,`focusVisible`,`disabled`,`gutters`,`contentGutters`,`content`,`expandIconWrapper`]),an=e=>{let{classes:t,expanded:n,disabled:r,disableGutters:i}=e;return V({root:[`root`,n&&`expanded`,r&&`disabled`,!i&&`gutters`],focusVisible:[`focusVisible`],content:[`content`,n&&`expanded`,!i&&`contentGutters`],expandIconWrapper:[`expandIconWrapper`,n&&`expanded`]},nn,t)},on=B(Et,{name:`MuiAccordionSummary`,slot:`Root`})(at(({theme:e})=>{let t={duration:e.transitions.duration.shortest};return{display:`flex`,width:`100%`,minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create([`min-height`,`background-color`],t),[`&.${rn.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${rn.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`&:hover:not(.${rn.disabled})`]:{cursor:`pointer`},variants:[{props:e=>!e.disableGutters,style:{[`&.${rn.expanded}`]:{minHeight:64}}}]}})),sn=B(`span`,{name:`MuiAccordionSummary`,slot:`Content`})(at(({theme:e})=>({display:`flex`,textAlign:`start`,flexGrow:1,margin:`12px 0`,variants:[{props:e=>!e.disableGutters,style:{transition:e.transitions.create([`margin`],{duration:e.transitions.duration.shortest}),[`&.${rn.expanded}`]:{margin:`20px 0`}}}]}))),cn=B(`span`,{name:`MuiAccordionSummary`,slot:`ExpandIconWrapper`})(at(({theme:e})=>({display:`flex`,color:(e.vars||e).palette.action.active,transform:`rotate(0deg)`,transition:e.transitions.create(`transform`,{duration:e.transitions.duration.shortest}),[`&.${rn.expanded}`]:{transform:`rotate(180deg)`}}))),ln=J.forwardRef(function(e,t){let n=ft({props:e,name:`MuiAccordionSummary`}),{children:r,className:i,expandIcon:a,focusVisibleClassName:o,onClick:s,slots:c,slotProps:l,...u}=n,{disabled:d=!1,disableGutters:f,expanded:p,toggle:m}=J.useContext(Wt),h=e=>{m&&m(e),s&&s(e)},g={...n,expanded:p,disabled:d,disableGutters:f},_=an(g),v={slots:c,slotProps:l},[y,b]=H(`root`,{ref:t,shouldForwardComponentProp:!0,className:kt(_.root,i),elementType:on,externalForwardedProps:{...v,...u},ownerState:g,additionalProps:{focusRipple:!1,disableRipple:!0,disabled:d,"aria-expanded":p,focusVisibleClassName:kt(_.focusVisible,o)},getSlotProps:e=>({...e,onClick:t=>{e.onClick?.(t),h(t)}})}),[x,S]=H(`content`,{className:_.content,elementType:sn,externalForwardedProps:v,ownerState:g}),[C,w]=H(`expandIconWrapper`,{className:_.expandIconWrapper,elementType:cn,externalForwardedProps:v,ownerState:g});return(0,Y.jsxs)(y,{...b,children:[(0,Y.jsx)(x,{...S,children:r}),a&&(0,Y.jsx)(C,{...w,children:a})]})}),un=nt((0,Y.jsx)(`path`,{d:`M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z`}),`Close`),dn=nt((0,Y.jsx)(`path`,{d:`M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z`}),`ExpandMore`);function fn(e,t=`warning`){}function pn(e,t,n){if(e===`pointer`){if(t)return[t];if(n)return[n]}if(e===`keyboard`){if(n)return[n];if(t)return[t]}return[]}var mn=e=>e.controlledCartesianAxisHighlight,hn=(e,t,n,r,i,a)=>a?[]:n===void 0?pn(i,e!==null&&{axisId:t.axisIds[0],dataIndex:e},r!=null&&r):n.filter(e=>t.axis[e.axisId]!==void 0).map(e=>e);const gn=a(Ae,ne,mn,y,N,D,hn);a(Ee,he,mn,t,N,D,hn);var _n=(e,t,n,r,i,a,o)=>{if(o)return[];if(r!==void 0)return r.map(e=>K({},e,{value:n.axis[e.axisId]?.data?.[e.dataIndex]})).filter(({value:e})=>e!==void 0);let s=t!=null&&{axisId:n.axisIds[0],value:t};s&&e!=null&&(s.dataIndex=e);let c=i!=null&&n.axis[i.axisId]?.data?.[i.dataIndex];return pn(a,s,i!=null&&c!=null&&K({},i,{value:c}))};const vn=a(Ae,ye,ne,mn,y,N,D,_n),yn=a(Ee,de,he,mn,t,N,D,_n);var bn=(e,t)=>e===void 0?[t.axis[t.axisIds[0]]]:e.map(e=>t.axis[e.axisId]??null).filter(e=>e!==null);S(mn,ne,bn),S(mn,he,bn);function xn(e){this._context=e}xn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Sn(e){return new xn(e)}function Cn(e){return e[0]}function wn(e){return e[1]}function Tn(e,t){var n=w(!0),r=null,i=Sn,a=null,o=d(s);e=typeof e==`function`?e:e===void 0?Cn:w(e),t=typeof t==`function`?t:t===void 0?wn:w(t);function s(s){var l,u=(s=c(s)).length,d,f=!1,p;for(r??(a=i(p=o())),l=0;l<=u;++l)!(l<u&&n(d=s[l],l,s))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+e(d,l,s),+t(d,l,s));if(p)return a=null,p+``||null}return s.x=function(t){return arguments.length?(e=typeof t==`function`?t:w(+t),s):e},s.y=function(e){return arguments.length?(t=typeof e==`function`?e:w(+e),s):t},s.defined=function(e){return arguments.length?(n=typeof e==`function`?e:w(!!e),s):n},s.curve=function(e){return arguments.length?(i=e,r!=null&&(a=i(r)),s):i},s.context=function(e){return arguments.length?(e==null?r=a=null:a=i(r=e),s):r},s}function En(e,t,n){var r=null,i=w(!0),a=null,o=Sn,s=null,l=d(u);e=typeof e==`function`?e:e===void 0?Cn:w(+e),t=typeof t==`function`?t:w(t===void 0?0:+t),n=typeof n==`function`?n:n===void 0?wn:w(+n);function u(u){var d,f,p,m=(u=c(u)).length,h,g=!1,_,v=Array(m),y=Array(m);for(a??(s=o(_=l())),d=0;d<=m;++d){if(!(d<m&&i(h=u[d],d,u))===g)if(g=!g)f=d,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),p=d-1;p>=f;--p)s.point(v[p],y[p]);s.lineEnd(),s.areaEnd()}g&&(v[d]=+e(h,d,u),y[d]=+t(h,d,u),s.point(r?+r(h,d,u):v[d],n?+n(h,d,u):y[d]))}if(_)return s=null,_+``||null}function f(){return Tn().defined(i).curve(o).context(a)}return u.x=function(t){return arguments.length?(e=typeof t==`function`?t:w(+t),r=null,u):e},u.x0=function(t){return arguments.length?(e=typeof t==`function`?t:w(+t),u):e},u.x1=function(e){return arguments.length?(r=e==null?null:typeof e==`function`?e:w(+e),u):r},u.y=function(e){return arguments.length?(t=typeof e==`function`?e:w(+e),n=null,u):t},u.y0=function(e){return arguments.length?(t=typeof e==`function`?e:w(+e),u):t},u.y1=function(e){return arguments.length?(n=e==null?null:typeof e==`function`?e:w(+e),u):n},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(n)},u.lineX1=function(){return f().x(r).y(t)},u.defined=function(e){return arguments.length?(i=typeof e==`function`?e:w(!!e),u):i},u.curve=function(e){return arguments.length?(o=e,a!=null&&(s=o(a)),u):o},u.context=function(e){return arguments.length?(e==null?a=s=null:s=o(a=e),u):a},u}var Dn=class{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t);break}this._x0=e,this._y0=t}};function On(e){return new Dn(e,!0)}function kn(e){return new Dn(e,!1)}var An={draw(e,t){let n=T(t/Ve);e.moveTo(n,0),e.arc(0,0,n,0,u)}},jn={draw(e,t){let n=T(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},Mn=T(1/3),Nn=Mn*2,Pn={draw(e,t){let n=T(t/Nn),r=n*Mn;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},Fn={draw(e,t){let n=T(t),r=-n/2;e.rect(r,r,n,n)}},In=.8908130915292852,Ln=r(Ve/10)/r(7*Ve/10),Rn=r(u/10)*Ln,zn=-m(u/10)*Ln,Bn={draw(e,t){let n=T(t*In),i=Rn*n,a=zn*n;e.moveTo(0,-n),e.lineTo(i,a);for(let t=1;t<5;++t){let o=u*t/5,s=m(o),c=r(o);e.lineTo(c*n,-s*n),e.lineTo(s*i-c*a,c*i+s*a)}e.closePath()}},Vn=T(3),Hn={draw(e,t){let n=-T(t/(Vn*3));e.moveTo(0,n*2),e.lineTo(-Vn*n,-n),e.lineTo(Vn*n,-n),e.closePath()}},X=-.5,Z=T(3)/2,Un=1/T(12),Wn=(Un/2+1)*3;const Gn=[An,jn,Pn,Fn,Bn,Hn,{draw(e,t){let n=T(t/Wn),r=n/2,i=n*Un,a=r,o=n*Un+n,s=-a,c=o;e.moveTo(r,i),e.lineTo(a,o),e.lineTo(s,c),e.lineTo(X*r-Z*i,Z*r+X*i),e.lineTo(X*a-Z*o,Z*a+X*o),e.lineTo(X*s-Z*c,Z*s+X*c),e.lineTo(X*r+Z*i,X*i-Z*r),e.lineTo(X*a+Z*o,X*o-Z*a),e.lineTo(X*s+Z*c,X*c-Z*s),e.closePath()}}];function Kn(e,t){let n=null,r=d(i);e=typeof e==`function`?e:w(e||An),t=typeof t==`function`?t:w(t===void 0?64:+t);function i(){let i;if(n||=i=r(),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+``||null}return i.type=function(t){return arguments.length?(e=typeof t==`function`?t:w(t),i):e},i.size=function(e){return arguments.length?(t=typeof e==`function`?e:w(+e),i):t},i.context=function(e){return arguments.length?(n=e??null,i):n},i}function qn(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Jn(e,t){this._context=e,this._k=(1-t)/6}Jn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:qn(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:qn(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},(function e(t){function n(e){return new Jn(e,t)}return n.tension=function(t){return e(+t)},n})(0);function Yn(e,t,n){var r=e._x1,i=e._y1,a=e._x2,o=e._y2;if(e._l01_a>1e-12){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>1e-12){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*l+e._x1*e._l23_2a-t*e._l12_2a)/u,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(r,i,a,o,e._x2,e._y2)}function Xn(e,t){this._context=e,this._alpha=t}Xn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=(n*n+r*r)**+this._alpha)}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Yn(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Zn=(function e(t){function n(e){return t?new Xn(e,t):new Jn(e,0)}return n.alpha=function(t){return e(+t)},n})(.5);function Qn(e){return e<0?-1:1}function $n(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(Qn(a)+Qn(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function er(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function tr(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,s=(a-r)/3;e._context.bezierCurveTo(r+s,i+s*t,a-s,o-s*n,a,o)}function nr(e){this._context=e}nr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:tr(this,this._t0,er(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,tr(this,er(this,n=$n(this,e,t)),n);break;default:tr(this,this._t0,n=$n(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function rr(e){this._context=new ir(e)}(rr.prototype=Object.create(nr.prototype)).point=function(e,t){nr.prototype.point.call(this,t,e)};function ir(e){this._context=e}ir.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}};function ar(e){return new nr(e)}function or(e){return new rr(e)}function sr(e){this._context=e}sr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=cr(e),i=cr(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function cr(e){var t,n=e.length-1,r,i=Array(n),a=Array(n),o=Array(n);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/a[t-1],a[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function lr(e){return new sr(e)}function ur(e,t){this._context=e,this._t=t}ur.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}this._x=e,this._y=t}};function dr(e){return new ur(e,.5)}function fr(e){return new ur(e,0)}function pr(e){return new ur(e,1)}function mr(e){if(F(e))return t=>(e(t)??0)+e.bandwidth()/2;let t=e.domain();return t[0]===t[1]?n=>n===t[0]?e(n):NaN:t=>e(t)}function hr(){return x(`bar`)}function gr(){return x(`line`)}function _r(e){return oe({d:e.d},{createInterpolator:(e,t)=>{let n=_e(e.d,t.d);return e=>({d:n(e)})},applyProps:(e,{d:t})=>e.setAttribute(`d`,t),transformProps:e=>e,skip:e.skipAnimation,ref:e.ref})}function vr(e,t){let n=I(e.x,t.x),r=I(e.y,t.y),i=I(e.width,t.width),a=I(e.height,t.height);return e=>({x:n(e),y:r(e),width:i(e),height:a(e)})}function yr(e){let t={x:e.layout===`vertical`?e.x:e.xOrigin,y:e.layout===`vertical`?e.yOrigin:e.y,width:e.layout===`vertical`?e.width:0,height:e.layout===`vertical`?0:e.height};return oe({x:e.x,y:e.y,width:e.width,height:e.height},{createInterpolator:vr,applyProps(e,t){e.setAttribute(`x`,t.x.toString()),e.setAttribute(`y`,t.y.toString()),e.setAttribute(`width`,t.width.toString()),e.setAttribute(`height`,t.height.toString())},transformProps:e=>e,initialProps:t,skip:e.skipAnimation,ref:e.ref})}function br(e,t){let n=I(e.x,t.x),r=I(e.y,t.y),i=I(e.width,t.width),a=I(e.height,t.height);return e=>({x:n(e),y:r(e),width:i(e),height:a(e)})}function xr(e){let{initialX:t,currentX:n,initialY:r,currentY:i}=e.placement===`outside`?wr(e):Cr(e),a={x:t,y:r,width:e.width,height:e.height};return oe({x:n,y:i,width:e.width,height:e.height},{createInterpolator:br,transformProps:e=>e,applyProps(e,t){e.setAttribute(`x`,t.x.toString()),e.setAttribute(`y`,t.y.toString()),e.setAttribute(`width`,t.width.toString()),e.setAttribute(`height`,t.height.toString())},initialProps:a,skip:e.skipAnimation,ref:e.ref})}var Sr=4;function Cr(e){return{initialX:e.layout===`vertical`?e.x+e.width/2:e.xOrigin,initialY:e.layout===`vertical`?e.yOrigin:e.y+e.height/2,currentX:e.x+e.width/2,currentY:e.y+e.height/2}}function wr(e){let t=0,n=0,r=0,i=0;return e.layout===`vertical`?(e.y<e.yOrigin?(t=e.yOrigin-Sr,n=e.y-Sr):(t=e.yOrigin+Sr,n=e.y+e.height+Sr),{initialX:e.x+e.width/2,currentX:e.x+e.width/2,initialY:t,currentY:n}):(e.x<e.xOrigin?(r=e.xOrigin,i=e.x-Sr):(r=e.xOrigin,i=e.x+e.width+Sr),{initialX:r,currentX:i,initialY:e.y+e.height/2,currentY:e.y+e.height/2})}function Tr(e){return oe({d:e.d},{createInterpolator:(e,t)=>{let n=_e(e.d,t.d);return e=>({d:n(e)})},applyProps:(e,{d:t})=>e.setAttribute(`d`,t),skip:e.skipAnimation,transformProps:e=>e,ref:e.ref})}function Er({value:e,onChange:t,options:n,placeholder:r=`Type or select...`,disabled:i=!1,...a}){let[o,s]=(0,J.useState)(!1),[c,l]=(0,J.useState)(n),u=(0,J.useRef)(null);(0,J.useEffect)(()=>{l(e?n.filter(t=>t.toLowerCase().includes(e.toLowerCase())):n)},[e,n]),(0,J.useEffect)(()=>{let e=e=>{u.current&&!u.current.contains(e.target)&&s(!1)};return document.addEventListener(`mousedown`,e),()=>document.removeEventListener(`mousedown`,e)},[]);let d=e=>{t(e.target.value),s(!0)},f=e=>{t(e),s(!1)};return(0,Y.jsxs)(W,{...a,ref:u,sx:{position:`relative`,...a.sx},children:[(0,Y.jsx)(Ke,{type:`text`,value:e,onChange:d,onFocus:()=>s(!0),placeholder:r,disabled:i,fullWidth:!0,size:`small`,sx:{"& .MuiOutlinedInput-root":{bgcolor:i?`background.paper`:`background.default`}}}),o&&!i&&c.length>0&&(0,Y.jsx)(W,{sx:{position:`absolute`,top:`100%`,left:0,right:0,maxHeight:`200px`,overflowY:`auto`,bgcolor:`background.default`,border:1,borderColor:`divider`,borderTop:`none`,borderRadius:`0 0 4px 4px`,boxShadow:2,zIndex:1e3},children:c.map((e,t)=>(0,Y.jsx)(W,{onClick:()=>f(e),sx:{p:1.5,cursor:`pointer`,fontSize:`0.875rem`,borderBottom:t<c.length-1?1:`none`,borderColor:`divider`,"&:hover":{bgcolor:`action.hover`}},children:e},t))})]})}function Dr({libraryId:t}){let[n,r]=(0,J.useState)([]),[i,a]=(0,J.useState)([]),[o,s]=(0,J.useState)(``),[c,l]=(0,J.useState)(``),[u,d]=(0,J.useState)([]),[f,p]=(0,J.useState)([]),[m,h]=(0,J.useState)(null),[g,_]=(0,J.useState)(!1),[v,y]=(0,J.useState)(null);(0,J.useEffect)(()=>{b()},[]),(0,J.useEffect)(()=>{o?x(o):(a([]),l(``))},[o]);let b=async()=>{try{r((await vt(!0)).tag_keys)}catch(e){console.error(`[TagCoOccurrence] Failed to load tag keys:`,e)}},x=async e=>{try{let t=await Tt(e,!0),n=new Set;for(let e of t.tag_keys)if(e.startsWith(`[`)&&e.endsWith(`]`))try{let t=JSON.parse(e);Array.isArray(t)?t.forEach(e=>n.add(String(e))):n.add(e)}catch{n.add(e)}else n.add(e);a(Array.from(n).sort())}catch(e){console.error(`[TagCoOccurrence] Failed to load tag values:`,e),a([])}},S=(e,t)=>u.some(n=>n.key===e&&n.value===t)||f.some(n=>n.key===e&&n.value===t),C=()=>{o&&c&&!u.some(e=>e.key===o&&e.value===c)&&u.length<16&&d([...u,{key:o,value:c}])},w=()=>{o&&c&&!f.some(e=>e.key===o&&e.value===c)&&f.length<16&&p([...f,{key:o,value:c}])},T=e=>{d(u.filter((t,n)=>n!==e))},E=e=>{p(f.filter((t,n)=>n!==e))},D=async()=>{if(u.length===0||f.length===0){y(`Both X and Y axes must have at least one tag`);return}try{_(!0),y(null),h(await dt({x:u,y:f},t))}catch(e){y(e instanceof Error?e.message:`Failed to build matrix`),console.error(`[TagCoOccurrence] Matrix build error:`,e)}finally{_(!1)}},O=(e,t)=>{if(e===0)return`#1a1a1a`;let n=Math.min(e/t,1);return`rgb(${Math.floor(30+n*44)}, ${Math.floor(30+n*128)}, ${Math.floor(30+n*225)})`},k=m?.matrix?Math.max(...m.matrix.flat(),1):1;return(0,Y.jsxs)(st,{children:[(0,Y.jsx)(ht,{title:`Tag Co-Occurrence Matrix`}),(0,Y.jsxs)(e,{spacing:2,sx:{mb:2.5},children:[(0,Y.jsxs)(W,{sx:{display:`flex`,gap:1.5,alignItems:`flex-end`},children:[(0,Y.jsxs)(W,{sx:{flex:1},children:[(0,Y.jsx)(G,{variant:`body2`,sx:{mb:.5,fontWeight:500},children:`Tag Key`}),(0,Y.jsx)(Er,{value:o,onChange:s,options:n,placeholder:`Select tag key...`})]}),(0,Y.jsxs)(W,{sx:{flex:1},children:[(0,Y.jsx)(G,{variant:`body2`,sx:{mb:.5,fontWeight:500},children:`Tag Value`}),(0,Y.jsx)(Er,{value:c,onChange:l,options:i,placeholder:`Select tag value...`,disabled:!o})]}),(0,Y.jsx)(Ct,{onClick:C,disabled:!o||!c||u.length>=16||S(o,c),variant:`contained`,size:`small`,children:`Add to X`}),(0,Y.jsx)(Ct,{onClick:w,disabled:!o||!c||f.length>=16||S(o,c),variant:`contained`,color:`secondary`,size:`small`,children:`Add to Y`})]}),(0,Y.jsxs)(W,{children:[(0,Y.jsxs)(G,{variant:`body2`,sx:{mb:.5,fontWeight:500},children:[`X Axis (`,u.length,`/16)`]}),(0,Y.jsxs)(W,{sx:{display:`flex`,flexWrap:`wrap`,gap:1,p:1.5,bgcolor:`background.default`,border:1,borderColor:`divider`,borderRadius:1,minHeight:80},children:[u.length===0&&(0,Y.jsx)(G,{variant:`body2`,color:`text.secondary`,children:`No tags added to X axis yet`}),u.map((e,t)=>(0,Y.jsx)(qe,{label:`${e.key}: ${e.value}`,onDelete:()=>T(t),deleteIcon:(0,Y.jsx)(un,{}),size:`small`},t))]})]}),(0,Y.jsxs)(W,{children:[(0,Y.jsxs)(G,{variant:`body2`,sx:{mb:.5,fontWeight:500},children:[`Y Axis (`,f.length,`/16)`]}),(0,Y.jsxs)(W,{sx:{display:`flex`,flexWrap:`wrap`,gap:1,p:1.5,bgcolor:`background.default`,border:1,borderColor:`divider`,borderRadius:1,minHeight:80},children:[f.length===0&&(0,Y.jsx)(G,{variant:`body2`,color:`text.secondary`,children:`No tags added to Y axis yet`}),f.map((e,t)=>(0,Y.jsx)(qe,{label:`${e.key}: ${e.value}`,onDelete:()=>E(t),deleteIcon:(0,Y.jsx)(un,{}),size:`small`},t))]})]}),(0,Y.jsx)(Ct,{onClick:D,disabled:g||u.length===0||f.length===0,variant:`contained`,fullWidth:!0,children:g?`Building Matrix...`:`Build Matrix`})]}),v&&(0,Y.jsx)(G,{color:`error`,sx:{mb:2},children:v}),m&&(0,Y.jsx)(W,{sx:{overflowX:`auto`,mt:2.5},children:(0,Y.jsxs)(Ye,{size:`small`,sx:{minWidth:300},children:[(0,Y.jsx)(Ze,{children:(0,Y.jsxs)(Qe,{children:[(0,Y.jsx)(R,{sx:{bgcolor:`background.default`,borderBottom:2,borderColor:`divider`,fontWeight:600},children:`Y \\ X`}),m.x.map((e,t)=>(0,Y.jsxs)(R,{sx:{bgcolor:`background.default`,borderBottom:2,borderColor:`divider`,fontWeight:600},children:[e.key,`:`,(0,Y.jsx)(`br`,{}),e.value]},t))]})}),(0,Y.jsx)(Xe,{children:m.y.map((e,t)=>(0,Y.jsxs)(Qe,{children:[(0,Y.jsxs)(R,{sx:{borderColor:`divider`,fontWeight:600},children:[e.key,`: `,e.value]}),m.x.map((e,n)=>(0,Y.jsx)(R,{align:`center`,sx:{borderColor:`divider`,bgcolor:O(m.matrix[t][n],k),fontWeight:m.matrix[t][n]>0?600:`normal`},children:m.matrix[t][n]},n))]},t))})]})})]})}var Or=`nomarr:insights:accordion:`;function kr({storageKey:e,title:t,defaultExpanded:n=!0,children:r,secondary:i}){let a=`${Or}${e}`,[o,s]=(0,J.useState)(()=>{try{let e=localStorage.getItem(a);if(e!==null)return e===`true`}catch{}return n}),c=(0,J.useCallback)((e,t)=>{s(t);try{localStorage.setItem(a,String(t))}catch{}},[a]);return(0,J.useEffect)(()=>{let e=e=>{e.key===a&&e.newValue!==null&&s(e.newValue===`true`)};return window.addEventListener(`storage`,e),()=>window.removeEventListener(`storage`,e)},[a]),(0,Y.jsxs)(Zt,{expanded:o,onChange:c,children:[(0,Y.jsxs)(ln,{expandIcon:(0,Y.jsx)(dn,{}),children:[(0,Y.jsx)(G,{variant:`h6`,sx:{flexGrow:1},children:t}),i]}),(0,Y.jsx)(tn,{children:r})]})}function Ar({sectionId:e,title:t,defaultExpanded:n=!0,children:r,secondary:i}){return(0,Y.jsx)(xt,{elevation:1,sx:{mb:2},children:(0,Y.jsx)(kr,{storageKey:e,title:t,defaultExpanded:n,secondary:i,children:(0,Y.jsx)(W,{sx:{px:1},children:r})})})}function jr({libraryId:e}){return(0,Y.jsx)(Ar,{sectionId:`advanced`,title:`Advanced Analytics`,defaultExpanded:!1,children:(0,Y.jsx)(Dr,{libraryId:e})})}function Mr(e){return q(`MuiBarElement`,e)}const Nr=U(`MuiBarElement`,[`root`,`highlighted`,`faded`,`series`]),Pr=e=>{let{classes:t,id:n,isHighlighted:r,isFaded:i}=e;return V({root:[`root`,`series-${n}`,r&&`highlighted`,i&&`faded`]},Mr,t)};function Fr(e){return q(`MuiBarLabel`,e)}const Ir=U(`MuiBarLabel`,[`root`,`highlighted`,`faded`,`animate`]),Lr=e=>{let{classes:t,seriesId:n,isFaded:r,isHighlighted:i,skipAnimation:a}=e;return V({root:[`root`,`series-${n}`,i&&`highlighted`,r&&`faded`,!a&&`animate`]},Fr,t)};function Rr(e){let{barLabel:t,value:n,dataIndex:r,seriesId:i,height:a,width:o}=e;return t===`value`?n?n?.toString():null:t({seriesId:i,dataIndex:r,value:n},{bar:{height:a,width:o}})}var zr=[`seriesId`,`dataIndex`,`color`,`isFaded`,`isHighlighted`,`classes`,`skipAnimation`,`layout`,`xOrigin`,`yOrigin`,`placement`,`hidden`];const Br=B(`text`,{name:`MuiBarLabel`,slot:`Root`,overridesResolver:(e,t)=>[{[`&.${Ir.faded}`]:t.faded},{[`&.${Ir.highlighted}`]:t.highlighted},t.root]})(({theme:e})=>K({},e?.typography?.body2,{stroke:`none`,fill:(e.vars||e)?.palette?.text?.primary,transitionProperty:`opacity, fill`,transitionDuration:`300ms`,transitionTimingFunction:ge,pointerEvents:`none`}));function Vr(e){let t=Ie({props:e,name:`MuiBarLabel`}),{isFaded:n,hidden:r}=t,i=z(t,zr),a=xr(t);return(0,Y.jsx)(Br,K({textAnchor:Hr(t),dominantBaseline:Ur(t),opacity:r?0:n?.3:1},i,a))}function Hr({placement:e,layout:t,xOrigin:n,x:r}){return e===`outside`&&t===`horizontal`?r<n?`end`:`start`:`middle`}function Ur({placement:e,layout:t,yOrigin:n,y:r}){return e===`outside`?t===`horizontal`?`central`:r<n?`auto`:`hanging`:`central`}var Wr=[`seriesId`,`classes`,`color`,`dataIndex`,`barLabel`,`slots`,`slotProps`,`xOrigin`,`yOrigin`,`x`,`y`,`width`,`height`,`value`,`skipAnimation`,`layout`,`barLabelPlacement`,`hidden`],Gr=[`ownerState`];function Kr(e){let{seriesId:t,classes:n,color:r,dataIndex:i,barLabel:a,slots:o,slotProps:s,xOrigin:c,yOrigin:l,x:u,y:d,width:f,height:p,value:m,skipAnimation:h,layout:g,barLabelPlacement:_,hidden:v}=e,y=z(e,Wr),{isFaded:b,isHighlighted:x}=A({seriesId:t,dataIndex:i}),S={seriesId:t,classes:n,color:r,isFaded:b,isHighlighted:x,dataIndex:i,skipAnimation:h,layout:g},C=Lr(S),w=o?.barLabel??Vr,T=L({elementType:w,externalSlotProps:s?.barLabel,additionalProps:K({},y,{xOrigin:c,yOrigin:l,x:u,y:d,width:f,height:p,placement:_,className:C.root}),ownerState:S}),{ownerState:E}=T,D=z(T,Gr);if(!a)return null;let O=Rr({barLabel:a,value:m,dataIndex:i,seriesId:t,height:p,width:f});return O?(0,Y.jsx)(w,K({},D,E,{hidden:v,children:O})):null}var qr=[`processedSeries`,`className`,`skipAnimation`];function Jr(e){let{processedSeries:t,className:n,skipAnimation:r}=e,i=z(e,qr),{seriesId:a,data:o,layout:s,xOrigin:c,yOrigin:l}=t,u=t.barLabel??e.barLabel;return u?(0,Y.jsx)(`g`,{className:n,"data-series":a,children:o.map(({x:e,y:n,dataIndex:o,color:d,value:f,width:p,height:m,hidden:h})=>(0,Y.jsx)(Kr,K({seriesId:a,dataIndex:o,value:f,color:d,xOrigin:c,yOrigin:l,x:e,y:n,width:p,height:m,skipAnimation:r??!1,layout:s??`vertical`,hidden:h},i,{barLabel:u,barLabelPlacement:t.barLabelPlacement||`center`}),o))},a):null}function Yr(){return pe().use(Me)}var Xr=(e,t)=>{let n=`${e}-axis`,r=`${e}Axis`;return t===(e===`x`?`DEFAULT_X_AXIS_KEY`:`DEFAULT_Y_AXIS_KEY`)?`The first \`${r}\``:`The ${n} with id "${t}"`};function Zr(e,t,n,r,i,a,o){let s=i[r],c=o[a],l=e?s:c,u=e?c:s,d=e?r:a,f=e?a:r,p=e?`x`:`y`,m=e?`y`:`x`;if(l.scaleType!==`band`)throw Error(`MUI X Charts: ${Xr(p,d)} should be of type "band" to display the bar series of id "${t}".`);if(l.data===void 0)throw Error(`MUI X Charts: ${Xr(p,d)} should have data property.`);if(u.scaleType===`band`||u.scaleType===`point`)throw Error(`MUI X Charts: ${Xr(m,f)} should be a continuous type to display the bar series of id "${t}".`)}function Qr(e,t,n){let r=hr()??{series:{},stackingGroups:[],seriesOrder:[]},i=s().xAxisIds[0],a=o().yAxisIds[0];return $r(e,Fe(),r.stackingGroups,r.series,t,n,i,a)}function $r(e,t,n,r,i,a,o,s){let c={};return{completedData:n.flatMap(({ids:l},u)=>{let d=e.left,f=e.left+e.width,p=e.top,m=e.top+e.height,g=new Map,_=new Map;return l.map(e=>{let l=r[e].xAxisId??o,y=r[e].yAxisId??s,b=r[e].layout,x=i[l],S=a[y],C=r[e].layout===`vertical`,w=(C?S.reverse:x.reverse)??!1;Zr(C,e,r[e].stackedData.length,l,i,y,a);let T=C?x:S,E=x.scale,D=S.scale,O=Math.round(E(0)??0),k=Math.round(D(0)??0),A=v(r[e],i[l],a[y]),j=[];for(let i=0;i<T.data.length;i+=1){let a=h({verticalLayout:C,xAxisConfig:x,yAxisConfig:S,series:r[e],dataIndex:i,numberOfGroups:n.length,groupIndex:u});if(a==null)continue;let o=r[e].stack,s=K({seriesId:e,dataIndex:i,hidden:r[e].hidden},a,{color:A(i),value:r[e].data[i],maskId:`${t}_${o||e}_${u}_${i}`});if(s.x>f||s.x+s.width<d||s.y>m||s.y+s.height<p)continue;let l=g.get(i),v=_.get(i),y=(w?-1:1)*Math.sign(s.value??0);y>0?(v&&delete v.borderRadiusSide,s.borderRadiusSide=C?`top`:`right`,_.set(i,s)):y<0&&(l&&delete l.borderRadiusSide,s.borderRadiusSide=C?`bottom`:`left`,g.set(i,s)),c[s.maskId]||(c[s.maskId]={id:s.maskId,width:0,height:0,hasNegative:!1,hasPositive:!1,layout:b,xOrigin:O,yOrigin:k,x:0,y:0});let T=c[s.maskId];T.width=b===`vertical`?s.width:T.width+s.width,T.height=b===`vertical`?T.height+s.height:s.height,T.x=Math.min(T.x===0?1/0:T.x,s.x),T.y=Math.min(T.y===0?1/0:T.y,s.y);let E=s.value??0;T.hasNegative=T.hasNegative||(w?E>0:E<0),T.hasPositive=T.hasPositive||(w?E<0:E>0),j.push(s)}return{seriesId:e,barLabel:r[e].barLabel,barLabelPlacement:r[e].barLabelPlacement,data:j,layout:b,xOrigin:O,yOrigin:k}})}),masksData:Object.values(c)}}function ei(e){return q(`MuiBar`,e)}U(`MuiBar`,[`root`,`series`,`seriesLabels`]);const ti=e=>V({root:[`root`],series:[`series`],seriesLabels:[`seriesLabels`]},ei,e);var ni=[`ownerState`,`skipAnimation`,`id`,`dataIndex`,`xOrigin`,`yOrigin`];function ri(e){let{ownerState:t}=e,n=z(e,ni),r=yr(e);return(0,Y.jsx)(`rect`,K({},n,{filter:t.isHighlighted?`brightness(120%)`:void 0,opacity:t.isFaded?.3:1,"data-highlighted":t.isHighlighted||void 0,"data-faded":t.isFaded||void 0},r))}function ii(e){return pe().use(k,e)}var ai=[`id`,`dataIndex`,`classes`,`color`,`slots`,`slotProps`,`style`,`onClick`,`skipAnimation`,`layout`,`x`,`xOrigin`,`y`,`yOrigin`,`width`,`height`,`hidden`];function oi(e){let{id:t,dataIndex:n,classes:r,color:i,slots:a,slotProps:o,style:s,onClick:c,skipAnimation:l,layout:u,x:d,xOrigin:f,y:p,yOrigin:m,width:h,height:g,hidden:_}=e,v=z(e,ai),y=J.useMemo(()=>({type:`bar`,seriesId:t,dataIndex:n}),[t,n]),b=te(y),{isFaded:x,isHighlighted:S}=A(y),C={id:t,dataIndex:n,classes:r,color:i,isFaded:x,isHighlighted:S,isFocused:ii(J.useMemo(()=>({type:`bar`,seriesId:t,dataIndex:n}),[t,n]))},w=Pr(C),T=a?.bar??ri;return(0,Y.jsx)(T,K({},L({elementType:T,externalSlotProps:o?.bar,externalForwardedProps:v,additionalProps:K({},b,{id:t,dataIndex:n,color:i,x:d,xOrigin:f,y:p,yOrigin:m,width:h,height:g,style:s,onClick:c,cursor:c?`pointer`:`unset`,stroke:`none`,fill:i,skipAnimation:l,layout:u,hidden:_}),className:w.root,ownerState:C})))}function si(e,t){let n=I(e.x,t.x),r=I(e.y,t.y),i=I(e.width,t.width),a=I(e.height,t.height),o=I(e.borderRadius,t.borderRadius);return e=>({x:n(e),y:r(e),width:i(e),height:a(e),borderRadius:o(e)})}function ci(e){let t={x:e.layout===`vertical`?e.x:e.xOrigin,y:e.layout===`vertical`?e.yOrigin:e.y,width:e.layout===`vertical`?e.width:0,height:e.layout===`vertical`?0:e.height,borderRadius:e.borderRadius};return oe({x:e.x,y:e.y,width:e.width,height:e.height,borderRadius:e.borderRadius},{createInterpolator:si,transformProps:t=>({d:ui(e.hasNegative,e.hasPositive,e.layout,t.x,t.y,t.width,t.height,e.xOrigin,e.yOrigin,t.borderRadius)}),applyProps(e,{d:t}){t&&e.setAttribute(`d`,t)},initialProps:t,skip:e.skipAnimation,ref:e.ref})}function li(e){let{maskId:t,x:n,y:r,width:i,height:a,skipAnimation:o}=e,{ref:s,d:c}=ci({layout:e.layout??`vertical`,hasNegative:e.hasNegative,hasPositive:e.hasPositive,xOrigin:e.xOrigin,yOrigin:e.yOrigin,x:n,y:r,width:i,height:a,borderRadius:e.borderRadius??0,skipAnimation:o});return!e.borderRadius||e.borderRadius<=0?null:(0,Y.jsx)(`clipPath`,{id:t,children:(0,Y.jsx)(`path`,{ref:s,d:c})})}function ui(e,t,n,r,i,a,o,s,c,l){if(n===`vertical`){if(t&&e){let e=Math.min(l,a/2,o/2);return`M${r},${i+o/2} v${-(o/2-e)} a${e},${e} 0 0 1 ${e},${-e} h${a-e*2} a${e},${e} 0 0 1 ${e},${e} v${o-2*e} a${e},${e} 0 0 1 ${-e},${e} h${-(a-e*2)} a${e},${e} 0 0 1 ${-e},${-e} v${-(o/2-e)}`}let n=Math.min(l,a/2);if(t)return`M${r},${Math.max(c,i+n)} v${Math.min(0,-(c-i-n))} a${n},${n} 0 0 1 ${n},${-n} h${a-n*2} a${n},${n} 0 0 1 ${n},${n} v${Math.max(0,c-i-n)} Z`;if(e)return`M${r},${Math.min(c,i+o-n)} v${Math.max(0,o-n)} a${n},${n} 0 0 0 ${n},${n} h${a-n*2} a${n},${n} 0 0 0 ${n},${-n} v${-Math.max(0,o-n)} Z`}if(n===`horizontal`){if(t&&e){let e=Math.min(l,a/2,o/2);return`M${r+a/2},${i} h${a/2-e} a${e},${e} 0 0 1 ${e},${e} v${o-e*2} a${e},${e} 0 0 1 ${-e},${e} h${-(a-2*e)} a${e},${e} 0 0 1 ${-e},${-e} v${-(o-e*2)} a${e},${e} 0 0 1 ${e},${-e} h${a/2-e}`}let n=Math.min(l,o/2);if(t)return`M${Math.min(s,r-n)},${i} h${a} a${n},${n} 0 0 1 ${n},${n} v${o-n*2} a${n},${n} 0 0 1 ${-n},${n} h${-a} Z`;if(e)return`M${Math.max(s,r+a+n)},${i} h${-a} a${n},${n} 0 0 0 ${-n},${n} v${o-n*2} a${n},${n} 0 0 0 ${n},${n} h${a} Z`}}var di=[`completedData`,`masksData`,`borderRadius`,`onItemClick`,`skipAnimation`];function fi(e){let{completedData:t,masksData:n,borderRadius:r,onItemClick:i,skipAnimation:a}=e,o=z(e,di),s=ti(),c=!r||r<=0;return(0,Y.jsxs)(J.Fragment,{children:[!c&&n.map(({id:e,x:t,y:n,xOrigin:i,yOrigin:o,width:s,height:c,hasPositive:l,hasNegative:u,layout:d})=>(0,Y.jsx)(li,{maskId:e,borderRadius:r,hasNegative:u,hasPositive:l,layout:d,x:t,y:n,xOrigin:i,yOrigin:o,width:s,height:c,skipAnimation:a??!1},e)),t.map(({seriesId:e,layout:t,xOrigin:n,yOrigin:r,data:l})=>(0,Y.jsx)(`g`,{"data-series":e,className:s.series,children:l.map(({dataIndex:s,color:l,maskId:u,x:d,y:f,width:p,height:m})=>{let h=(0,Y.jsx)(oi,K({id:e,dataIndex:s,color:l,skipAnimation:a??!1,layout:t??`vertical`,x:d,xOrigin:n,y:f,yOrigin:r,width:p,height:m},o,{onClick:i&&(t=>{i(t,{type:`bar`,seriesId:e,dataIndex:s})})}),s);return c?h:(0,Y.jsx)(`g`,{clipPath:`url(#${u})`,children:h},s)})},e))]})}function pi(e,t){return e.bandwidth()===0?Math.floor((t-Math.min(...e.range())+e.step()/2)/e.step()):Math.floor((t-Math.min(...e.range()))/e.step())}const mi=S(ne,he,ce,function({axis:e,axisIds:t},{axis:n,axisIds:r},i,a){let{series:o,stackingGroups:s=[]}=i?.bar??{},c=t[0],l=r[0],u;for(let t=0;t<s.length;t+=1){let r=s[t].ids;for(let i of r){let r=(o??{})[i],d=r.xAxisId??c,f=r.yAxisId??l,p=e[d],m=n[f],h=r.layout===`horizontal`?m:p,_=r.layout===`horizontal`?p:m,v=h.scale,y=r.layout===`horizontal`?a.y:a.x;if(!ie(v))continue;let b=pi(v,y),{barWidth:x,offset:S}=g(v.bandwidth(),s.length,h.barGapRatio),C=t*(x+S),w=h.data?.[b];if(w==null)continue;let T=v(w);if(T==null)continue;let E=T+C,D=E+x;if(y>=Math.min(E,D)&&y<=Math.max(E,D)){let e=r.layout===`horizontal`?a.x:a.y,t=r.visibleStackedData[b],n=_.scale(t[0]),o=_.scale(t[1]);if(n==null||o==null)continue;e>=Math.min(n,o)&&e<=Math.max(n,o)&&(u={seriesId:i,dataIndex:b})}}}if(u)return{type:`bar`,seriesId:u.seriesId,dataIndex:u.dataIndex}});function hi(e){let{instance:t}=n(),r=i(),a=pe();J.useEffect(()=>{let n=r.current;if(!n||!e)return;let i=null,o=function(r){let o=r;i&&Math.abs(r.clientX-i.clientX)<=1&&Math.abs(r.clientY-i.clientY)<=1&&(o={clientX:i.clientX,clientY:i.clientY}),i=null;let s=Oe(n,o);if(!t.isPointInside(s.x,s.y))return;let c=mi(a.state,s);c&&e(r,{type:`bar`,seriesId:c.seriesId,dataIndex:c.dataIndex})},s=function(e){i=e};return n.addEventListener(`click`,o),n.addEventListener(`pointerup`,s),()=>{n.removeEventListener(`click`,o),n.removeEventListener(`pointerup`,s)}},[t,e,a,r])}function gi(e,t,n){let r=e.get(t);return r?r.push(n):(r=[n],e.set(t,r)),r}var _i=1e3;function vi(e,t,n,r,i,a,o,s){let c=Math.min(i,n/2,r/2),l=Math.min(a,n/2,r/2),u=Math.min(o,n/2,r/2),d=Math.min(s,n/2,r/2);return`M${e+c},${t}
   h${n-c-l}
   a${l},${l} 0 0 1 ${l},${l}
   v${r-l-u}
   a${u},${u} 0 0 1 -${u},${u}
   h-${n-u-d}
   a${d},${d} 0 0 1 -${d},-${d}
   v-${r-d-c}
   a${c},${c} 0 0 1 ${c},-${c}
   Z`}function yi(e,t){return vi(e.x,e.y,e.width,e.height,e.borderRadiusSide===`left`||e.borderRadiusSide===`top`?t:0,e.borderRadiusSide===`right`||e.borderRadiusSide===`top`?t:0,e.borderRadiusSide===`right`||e.borderRadiusSide===`bottom`?t:0,e.borderRadiusSide===`left`||e.borderRadiusSide===`bottom`?t:0)}function bi(e,t){let n=new Map,r=new Map;for(let i=0;i<e.data.length;i+=1){let a=e.data[i],o=yi(a,t),s=gi(r,a.color,o);s.length>=_i&&(gi(n,a.color,s.join(``)),r.delete(a.color))}for(let[e,t]of r.entries())t.length>0&&gi(n,e,t.join(``));return n}var xi=[`skipAnimation`,`layout`,`xOrigin`,`yOrigin`],Si=[`children`,`layout`,`xOrigin`,`yOrigin`],Ci=B(`g`)({'&[data-faded="true"]':{opacity:.3},"& path":{pointerEvents:`none`}});function wi(e){let{skipAnimation:t,layout:n,xOrigin:r,yOrigin:i}=e,a=z(e,xi);return t?(0,Y.jsx)(Ci,K({},a)):(0,Y.jsx)(Ei,K({},a,{layout:n,xOrigin:r,yOrigin:i}))}var Ti=B(`rect`)({"@keyframes scaleInX":{from:{transform:`scaleX(0)`},to:{transform:`scaleX(1)`}},"@keyframes scaleInY":{from:{transform:`scaleY(0)`},to:{transform:`scaleY(1)`}},animationDuration:`300ms`,animationFillMode:`forwards`,'&[data-orientation="horizontal"]':{animationName:`scaleInX`},'&[data-orientation="vertical"]':{animationName:`scaleInY`}});function Ei(e){let{children:t,layout:n,xOrigin:r,yOrigin:i}=e,a=z(e,Si),o=pe().use(Pe),s=gt(),c=[];return n===`horizontal`?(c.push((0,Y.jsx)(Ti,{"data-orientation":`horizontal`,x:o.left,width:r-o.left,y:o.top,height:o.height,style:{transformOrigin:`${r}px ${o.top+o.height/2}px`}},`left`)),c.push((0,Y.jsx)(Ti,{"data-orientation":`horizontal`,x:r,width:o.left+o.width-r,y:o.top,height:o.height,style:{transformOrigin:`${r}px ${o.top+o.height/2}px`}},`right`))):(c.push((0,Y.jsx)(Ti,{"data-orientation":`vertical`,x:o.left,width:o.width,y:o.top,height:i-o.top,style:{transformOrigin:`${o.left+o.width/2}px ${i}px`}},`top`)),c.push((0,Y.jsx)(Ti,{"data-orientation":`vertical`,x:o.left,width:o.width,y:i,height:o.top+o.height-i,style:{transformOrigin:`${o.left+o.width/2}px ${i}px`}},`bottom`))),(0,Y.jsxs)(J.Fragment,{children:[(0,Y.jsx)(`clipPath`,{id:s,children:c}),(0,Y.jsx)(Ci,K({clipPath:`url(#${s})`},a,{children:t}))]})}function Di(e,t,r){let{instance:a}=n(),o=i(),s=pe(),c=J.useRef(!1),l=J.useRef(void 0),u=ot(()=>t?.()),d=ot(()=>r?.());J.useEffect(()=>{let t=o.current;if(!t)return;function n(){c.current=!0}function r(){let e=l.current;e&&(l.current=void 0,a.removeTooltipItem(e),a.clearHighlight(),d())}function i(){c.current=!1,r()}let f=function(n){let i=Oe(t,n);if(!a.isPointInside(i.x,i.y)){r();return}let o=e(s.state,i);o?(a.setLastUpdateSource(`pointer`),a.setTooltipItem(o),a.setHighlight(o),u(),l.current=o):r()};return t.addEventListener(`pointerleave`,i),t.addEventListener(`pointermove`,f),t.addEventListener(`pointerenter`,n),()=>{t.removeEventListener(`pointerenter`,n),t.removeEventListener(`pointermove`,f),t.removeEventListener(`pointerleave`,i),c.current&&i()}},[e,a,u,d,s,o])}function Oi({completedData:e,borderRadius:t=0,onItemClick:n,skipAnimation:r=!1}){let a=J.useRef(null),o=i();return Di(mi,n?()=>{let e=o.current;e&&(a.current??(a.current=e.style.cursor,e.style.cursor=`pointer`))}:void 0,n?()=>{let e=o.current;e&&a.current!=null&&(e.style.cursor=a.current,a.current=null)}:void 0),hi(n),(0,Y.jsx)(J.Fragment,{children:e.map(e=>(0,Y.jsx)(Ai,{series:e,borderRadius:t,skipAnimation:r},e.seriesId))})}var ki=J.memo(Mi);function Ai({series:e,borderRadius:t,skipAnimation:r}){let i=ti(),{store:a}=n(),o=a.use(ze,e.seriesId),s=a.use(Ne,e.seriesId);return(0,Y.jsxs)(J.Fragment,{children:[(0,Y.jsx)(wi,{className:i.series,"data-series":e.seriesId,layout:e.layout,xOrigin:e.xOrigin,yOrigin:e.yOrigin,skipAnimation:r,"data-faded":s||void 0,"data-highlighted":o||void 0,children:(0,Y.jsx)(ji,{processedSeries:e,borderRadius:t})}),(0,Y.jsx)(ki,{processedSeries:e,borderRadius:t})]})}function ji({processedSeries:e,borderRadius:t}){let n=bi(e,t),r=[],i=0;for(let[e,t]of n.entries())for(let n of t)r.push((0,Y.jsx)(`path`,{fill:e,d:n},i)),i+=1;return(0,Y.jsx)(J.Fragment,{children:r})}function Mi({processedSeries:e,borderRadius:t}){let{store:r}=n(),i=r.use(P,e.seriesId),a=r.use(Le,e.seriesId),o=i==null?null:e.data.find(e=>e.dataIndex===i)||null,s=a==null?null:e.data.find(e=>e.dataIndex===a)||null,c=[];return o!=null&&c.push((0,Y.jsx)(`path`,{fill:o.color,filter:`brightness(120%)`,"data-highlighted":!0,d:yi(o,t)},`highlighted-${e.seriesId}`)),s!=null&&c.push((0,Y.jsx)(`path`,{fill:s.color,d:yi(s,t)},`unfaded-${s.seriesId}`)),(0,Y.jsx)(J.Fragment,{children:c})}var Ni=[`skipAnimation`,`onItemClick`,`borderRadius`,`barLabel`,`renderer`],Pi=B(`g`,{name:`MuiBarPlot`,slot:`Root`})({[`& .${Nr.root}`]:{transitionProperty:`opacity, fill`,transitionDuration:`300ms`,transitionTimingFunction:ge}});function Fi(e){let{skipAnimation:t,onItemClick:n,borderRadius:r,barLabel:i,renderer:a}=e,c=z(e,Ni),l=De(Yr()||t),u=De(t),{xAxis:d}=s(),{yAxis:f}=o(),{completedData:p,masksData:m}=Qr(C(),d,f),h=ti(),g=a===`svg-batch`?Oi:fi;return(0,Y.jsxs)(Pi,{className:h.root,children:[(0,Y.jsx)(g,K({completedData:p,masksData:m,skipAnimation:a===`svg-batch`?u:l,onItemClick:n,borderRadius:r},c)),p.map(e=>(0,Y.jsx)(Jr,K({className:h.seriesLabels,processedSeries:e,skipAnimation:l,barLabel:i},c),e.seriesId))]})}function Ii(){let[e,t]=J.useState(!1);return J.useEffect(()=>{t(!0)},[]),e}function Li(e){return typeof e==`number`&&!Number.isFinite(e)}function Ri(e,t){return Math.abs(t.getFullYear()-e.getFullYear())}function zi(e,t){return Math.abs(t.getFullYear()*12+t.getMonth()-12*e.getFullYear()-e.getMonth())}function Bi(e,t){return Math.abs(t.getTime()-e.getTime())/(1e3*60*60*24)}function Vi(e,t){return Math.abs(t.getTime()-e.getTime())/(1e3*60*60)}const Hi={years:{getTickNumber:Ri,isTick:(e,t)=>t.getFullYear()!==e.getFullYear(),format:e=>e.getFullYear().toString()},quarterly:{getTickNumber:(e,t)=>Math.floor(zi(e,t)/3),isTick:(e,t)=>t.getMonth()!==e.getMonth()&&t.getMonth()%3==0,format:new Intl.DateTimeFormat(`default`,{month:`short`}).format},months:{getTickNumber:zi,isTick:(e,t)=>t.getMonth()!==e.getMonth(),format:new Intl.DateTimeFormat(`default`,{month:`short`}).format},biweekly:{getTickNumber:(e,t)=>Bi(e,t)/14,isTick:(e,t)=>(t.getDay()<e.getDay()||Bi(t,e)>7)&&Math.floor(t.getDate()/7)%2==1,format:new Intl.DateTimeFormat(`default`,{day:`numeric`}).format},weeks:{getTickNumber:(e,t)=>Bi(e,t)/7,isTick:(e,t)=>t.getDay()<e.getDay()||Bi(t,e)>=7,format:new Intl.DateTimeFormat(`default`,{day:`numeric`}).format},days:{getTickNumber:Bi,isTick:(e,t)=>t.getDate()!==e.getDate(),format:new Intl.DateTimeFormat(`default`,{day:`numeric`}).format},hours:{getTickNumber:Vi,isTick:(e,t)=>t.getHours()!==e.getHours(),format:new Intl.DateTimeFormat(`default`,{hour:`2-digit`,minute:`2-digit`}).format}};var Ui={start:0,extremities:0,end:1,middle:.5};function Wi(e,t,n){return e(t)-(e.step()-e.bandwidth())/2+Ui[n]*e.step()}function Gi(e,t,n){let r=Math.abs(t[1]-t[0]),i=Math.ceil(e.length/(r/n));return Number.isNaN(i)||i<=1?e:e.filter((e,t)=>t%i===0)}function Ki(e,t,n,r,i){if(n.length===0)return[];let a=r.range()[0]>r.range()[1],o=e.findIndex(e=>i(Wi(r,e,a?`start`:`end`))),s=e.findLastIndex(e=>i(Wi(r,e,a?`end`:`start`))),c=e[0],l=e[e.length-1];if(!(c instanceof Date)||!(l instanceof Date))return[];let u=0;for(let e=0;e<n.length;e+=1)if(n[e].getTickNumber(c,l)!==0){u=e;break}let d=u;for(let e=u;e<n.length;e+=1){if(e===n.length-1){d=e;break}let r=n[e].getTickNumber(c,l),i=n[e+1].getTickNumber(c,l);if(i>t||t/r<i/t){d=e;break}}let f=[];for(let t=Math.max(1,o);t<=s;t+=1)for(let r=u;r<=d;r+=1){let i=e[t-1],a=e[t];if(i instanceof Date&&a instanceof Date&&n[r].isTick(i,a)){f.push({index:t,formatter:n[r].format});break}}return f}function qi(e){let{scale:t,tickNumber:n,valueFormatter:r,tickInterval:i,tickPlacement:a,tickLabelPlacement:o,tickSpacing:s,isInside:c,ordinalTimeTicks:l}=e;if(l!==void 0&&Ce(t.domain())&&F(t)){let e=t.domain();return e.length===0||e.length===1?[]:Ki(e,n,l.map(e=>typeof e==`string`?Hi[e]:e),t,c).map(({index:n,formatter:r})=>{let i=e[n];return{value:i,formattedValue:r(i),offset:Wi(t,i,`middle`),labelOffset:0}})}let u=a??`extremities`;if(F(t)){let e=t.domain(),a=o??`middle`,l=e;if(typeof i==`object`&&i?l=i:(typeof i==`function`&&(l=l.filter(i)),s!==void 0&&s>0&&(l=Gi(l,t.range(),s))),l.length===0)return[];if(t.bandwidth()>0){let i=t.range()[0]>t.range()[1],o=l.findIndex(e=>c(Wi(t,e,i?`start`:`end`))),s=l.findLastIndex(e=>c(Wi(t,e,i?`end`:`start`)));return[...l.slice(o,s+1).map(e=>{let i=`${e}`;return{value:e,formattedValue:r?.(e,{location:`tick`,scale:t,tickNumber:n,defaultTickLabel:i})??i,offset:Wi(t,e,u),labelOffset:a===`tick`?0:t.step()*(Ui[a]-Ui[u])}}),...u===`extremities`&&s===e.length-1&&c(t.range()[1])?[{formattedValue:void 0,offset:t.range()[1],labelOffset:0}]:[]]}return l.map(e=>{let i=`${e}`;return{value:e,formattedValue:r?.(e,{location:`tick`,scale:t,tickNumber:n,defaultTickLabel:i})??i,offset:t(e),labelOffset:0}})}if(t.domain().some(Li))return[];let d=o,f=typeof i==`object`?i:Ji(t,n),p=[];for(let e=0;e<f.length;e+=1){let i=f[e],a=t(i);if(c(a)){let o=t.tickFormat(n)(i);p.push({value:i,formattedValue:r?.(i,{location:`tick`,scale:t,tickNumber:n,defaultTickLabel:o})??o,offset:a,labelOffset:d===`middle`?t(f[e-1]??0)-(a+t(f[e-1]??0))/2:0})}}return p}function Ji(e,t){let n=e.domain();return n[0]===n[1]?[n[0]]:e.ticks(t)}function Yi(e){let{scale:t,tickNumber:r,valueFormatter:i,tickInterval:a,tickPlacement:o=`extremities`,tickLabelPlacement:s,tickSpacing:c,direction:l,ordinalTimeTicks:u}=e,{instance:d}=n(),f=l===`x`?d.isXInside:d.isYInside;return J.useMemo(()=>qi({scale:t,tickNumber:r,tickPlacement:o,tickInterval:a,tickLabelPlacement:s,tickSpacing:c,valueFormatter:i,isInside:f,ordinalTimeTicks:u}),[t,r,o,a,s,c,i,f,u])}function Xi(e=!1){let[t,n]=J.useState(!1);return jt(()=>{e||n(!0)},[e]),J.useEffect(()=>{e&&n(!0)},[e]),t}var Zi=typeof window<`u`&&`Intl`in window&&`Segmenter`in Intl?new Intl.Segmenter(void 0,{granularity:`grapheme`}):null;function Qi(e){return e.length}function $i(e){let t=Zi.segment(e),n=0;for(let e of t)n+=1;return n}const ea=Zi?$i:Qi;function ta(e){return e*(Math.PI/180)}var na=typeof window<`u`&&`Intl`in window&&`Segmenter`in Intl?new Intl.Segmenter(void 0,{granularity:`grapheme`}):null;function ra(e,t){return e.slice(0,t)}function ia(e,t){let n=na.segment(e),r=``,i=0;for(let e of n)if(r+=e.segment,i+=1,i>=t)break;return r}const aa=na?ia:ra;var oa=``;function sa(e,t){let{width:n,height:r,measureText:i}=t,a=ta(t.angle),o=i(e),s=Math.abs(o.width*Math.cos(a))+Math.abs(o.height*Math.sin(a)),c=Math.abs(o.width*Math.sin(a))+Math.abs(o.height*Math.cos(a));return s<=n&&c<=r}function ca(e,t){if(t(e))return e;let n=e,r=1,i=1/2,a=ea(e),o=a,s=a,c=null;do{if(s=o,o=Math.floor(a*i),o===0)break;n=aa(e,o).trim();let l=t(n+oa);r+=1,l?(c=n,i+=1/2**r):i-=1/2**r}while(Math.abs(o-s)!==1);return c?c+oa:``}function la(){return typeof window>`u`}var ua=new Map,da=2e3,fa=new Set([`minWidth`,`maxWidth`,`width`,`minHeight`,`maxHeight`,`height`,`top`,`left`,`fontSize`,`padding`,`margin`,`paddingLeft`,`paddingRight`,`paddingTop`,`paddingBottom`,`marginLeft`,`marginRight`,`marginTop`,`marginBottom`]);function pa(e,t){return fa.has(e)&&t===+t?`${t}px`:t}var ma=/([A-Z])/g;function ha(e){return String(e).replace(ma,e=>`-${e.toLowerCase()}`)}function ga(e){let t=``;for(let n in e)if(Object.hasOwn(e,n)){let r=n,i=e[r];if(i===void 0)continue;t+=`${ha(r)}:${pa(r,i)};`}return t}const _a=(e,t={})=>{if(e==null||la())return{width:0,height:0};let n=String(e),r=`${n}-${ga(t)}`,i=ua.get(r);if(i)return i;try{let e=ba(),i=document.createElementNS(`http://www.w3.org/2000/svg`,`text`);Object.keys(t).map(e=>(i.style[ha(e)]=pa(e,t[e]),e)),i.textContent=n,e.replaceChildren(i);let a=ya(i);return ua.set(r,a),ua.size+1>da&&ua.clear(),a}catch{return{width:0,height:0}}};function va(e,t={}){if(la())return new Map(Array.from(e).map(e=>[e,{width:0,height:0}]));let n=new Map,r=[],i=ga(t);for(let t of e){let e=`${t}-${i}`,a=ua.get(e);a?n.set(t,a):r.push(t)}let a=ba(),o=K({},t);Object.keys(o).map(e=>(a.style[ha(e)]=pa(e,o[e]),e));let s=[];for(let e of r){let t=document.createElementNS(`http://www.w3.org/2000/svg`,`text`);t.textContent=`${e}`,s.push(t)}a.replaceChildren(...s);for(let e=0;e<r.length;e+=1){let t=r[e],o=a.children[e],s=ya(o),c=`${t}-${i}`;ua.set(c,s),n.set(t,s)}return ua.size+1>da&&ua.clear(),n}function ya(e){try{let t=e.getBBox();return{width:t.width,height:t.height}}catch{let t=e.getBoundingClientRect();return{width:t.width,height:t.height}}}var Q=null;function ba(){return Q===null&&(Q=document.createElementNS(`http://www.w3.org/2000/svg`,`svg`),Q.setAttribute(`aria-hidden`,`true`),Q.style.position=`absolute`,Q.style.top=`-20000px`,Q.style.left=`0`,Q.style.padding=`0`,Q.style.margin=`0`,Q.style.border=`none`,Q.style.pointerEvents=`none`,Q.style.visibility=`hidden`,Q.style.contain=`strict`,document.body.appendChild(Q)),Q}function xa(e,t,n,r,i){let a=new Map,o=_(i?.angle??0),s=1,c=1;i?.textAnchor===`start`?(s=1/0,c=1):i?.textAnchor===`end`?(s=1,c=1/0):(s=2,c=2),o>90&&o<270&&([s,c]=[c,s]),r&&([s,c]=[c,s]);for(let r of e)if(r.formattedValue){let e=Math.min((r.offset+r.labelOffset)*s,(t.left+t.width+t.right-r.offset-r.labelOffset)*c);a.set(r,ca(r.formattedValue.toString(),t=>sa(t,{width:e,height:n,angle:o,measureText:e=>_a(e,i)})))}return a}var Sa=5;function Ca(e,t,n=0){let r=Math.min(Math.abs(n)%180,Math.abs(Math.abs(n)%180-180)%180);if(r<Sa)return e;if(r>90-Sa)return t;let i=p(r);return i<Math.atan2(t,e)?e/Math.cos(i):t/Math.sin(i)}function wa(e,{tickLabelStyle:t,tickLabelInterval:n,tickLabelMinGap:r,reverse:i,isMounted:a,isXInside:o}){if(typeof n==`function`)return new Set(e.filter((e,t)=>n(e.value,t)));let s=0,c=i?-1:1,l=e.filter(e=>{let{offset:t,labelOffset:n,formattedValue:r}=e;return r===``?!1:o(t+n)}),u=Ea(l,t);return new Set(l.filter((e,n)=>{let{offset:i,labelOffset:o}=e,l=i+o;if(n>0&&c*l<c*(s+r))return!1;let{width:d,height:f}=a?Ta(u,e):{width:0,height:0},p=Ca(d,f,t?.angle),m=l-c*p/2;return n>0&&c*m<c*(s+r)?!1:(s=l+c*p/2,!0)}))}function Ta(e,t){if(t.formattedValue===void 0)return{width:0,height:0};let n=0,r=0;for(let i of t.formattedValue.split(`
`)){let t=e.get(i);t&&(n=Math.max(n,t.width),r+=t.height)}return{width:n,height:r}}function Ea(e,t){let n=new Set;for(let t of e)t.formattedValue&&t.formattedValue.split(`
`).forEach(e=>n.add(e));return va(n,t)}function Da(e){return q(`MuiChartsAxis`,e)}const Oa=U(`MuiChartsAxis`,[`root`,`line`,`tickContainer`,`tick`,`tickLabel`,`label`,`directionX`,`directionY`,`top`,`bottom`,`left`,`right`,`id`]),ka=e=>{let{classes:t,position:n,id:r}=e;return V({root:[`root`,`directionX`,n,`id-${r}`],line:[`line`],tickContainer:[`tickContainer`],tick:[`tick`],tickLabel:[`tickLabel`],label:[`label`]},Da,t)},Aa={disableLine:!1,disableTicks:!1,tickSize:6,tickLabelMinGap:4};function ja({style:e,needsComputation:t,text:n}){return n.split(`
`).map(n=>K({text:n},t?_a(n,e):{width:0,height:0}))}var Ma=[`x`,`y`,`style`,`text`,`ownerState`],Na=[`angle`,`textAnchor`,`dominantBaseline`];function Pa(e){let{x:t,y:n,style:r,text:i}=e,a=z(e,Ma),o=r??{},{angle:s,textAnchor:c,dominantBaseline:l}=o,u=z(o,Na),d=Ii(),f=J.useMemo(()=>ja({style:u,needsComputation:d&&i.includes(`
`),text:i}),[u,i,d]),p;switch(l){case`hanging`:case`text-before-edge`:p=0;break;case`central`:p=(f.length-1)/2*-f[0].height;break;default:p=(f.length-1)*-f[0].height;break}return(0,Y.jsx)(`text`,K({},a,{transform:s?`rotate(${s}, ${t}, ${n})`:void 0,x:t,y:n,textAnchor:c,dominantBaseline:l,style:u,children:f.map((e,n)=>(0,Y.jsx)(`tspan`,{x:t,dy:`${n===0?p:f[0].height}px`,dominantBaseline:l,children:e.text},n))}))}function Fa(e){let t=_(e);return t<=30||t>=330||t<=210&&t>=150?`middle`:t<=180?`end`:`start`}function Ia(e){let t=_(e);return t<=30||t>=330?`hanging`:t<=210&&t>=150?`auto`:`central`}function La(e){switch(e){case`start`:return`end`;case`end`:return`start`;default:return e}}var Ra=[`scale`,`tickNumber`,`reverse`];function za(e){let{xAxis:t,xAxisIds:n}=s(),r=t[e.axisId??n[0]],{scale:i,tickNumber:a,reverse:o}=r,c=K({},Aa,Ie({props:K({},z(r,Ra),e),name:`MuiChartsXAxis`})),{position:l,tickLabelStyle:u,slots:d,slotProps:f}=c,p=it(),m=ct(),h=ka(c),g=l===`bottom`?1:-1,_=d?.axisTick??`line`,v=d?.axisTickLabel??Pa,y=Fa((l===`bottom`?0:180)-(u?.angle??0)),b=Ia((l===`bottom`?0:180)-(u?.angle??0));return{xScale:i,defaultizedProps:c,tickNumber:a,positionSign:g,classes:h,Tick:_,TickLabel:v,axisTickLabelProps:L({elementType:v,externalSlotProps:f?.axisTickLabel,additionalProps:{style:K({},p.typography.caption,{fontSize:12,lineHeight:1.25,textAnchor:m?La(y):y,dominantBaseline:b},u)},className:h.tickLabel,ownerState:{}}),reverse:o}}function Ba(e){let{axisLabelHeight:t,ordinalTimeTicks:r}=e,{xScale:i,defaultizedProps:a,tickNumber:o,positionSign:s,classes:c,Tick:l,TickLabel:u,axisTickLabelProps:d,reverse:f}=za(e),p=ct(),m=Xi(),{disableTicks:h,tickSize:g,valueFormatter:_,slotProps:v,tickInterval:y,tickLabelInterval:b,tickPlacement:x,tickLabelPlacement:S,tickLabelMinGap:w,tickSpacing:T,height:E}=a,D=C(),{instance:O}=n(),k=Ii(),A=h?4:g,j=Yi({scale:i,tickNumber:o,valueFormatter:_,tickInterval:y,tickPlacement:x,tickLabelPlacement:S,tickSpacing:T,direction:`x`,ordinalTimeTicks:r}),M=wa(j,{tickLabelStyle:d.style,tickLabelInterval:b,tickLabelMinGap:w,reverse:f,isMounted:m,isXInside:O.isXInside}),N=Math.max(0,E-(t>0?t+4:0)-A-3),P=k?xa(M,D,N,p,d.style):new Map(Array.from(M).map(e=>[e,e.formattedValue]));return(0,Y.jsx)(J.Fragment,{children:j.map((e,t)=>{let{offset:n,labelOffset:r}=e,i=r??0,a=s*(A+3),o=O.isXInside(n),f=P.get(e),p=M.has(e);return(0,Y.jsxs)(`g`,{transform:`translate(${n}, 0)`,className:c.tickContainer,children:[!h&&o&&(0,Y.jsx)(l,K({y2:s*A,className:c.tick},v?.axisTick)),f!==void 0&&p&&(0,Y.jsx)(u,K({x:i,y:a},d,{text:f}))]},t)})})}var Va={start:0,extremities:0,end:1,middle:.5,tick:0};function Ha(e){let{scale:t,tickInterval:n,tickLabelPlacement:r=`middle`,tickPlacement:i=`extremities`,groups:a}=e;return J.useMemo(()=>{let e=t.domain(),o=typeof n==`function`&&e.filter(n)||typeof n==`object`&&n||e;if(t.bandwidth()>0){let e=Ua(o,a,i,r,t);return e[0]&&(e[0].ignoreTick=!0),[{formattedValue:void 0,offset:t.range()[0],labelOffset:0,groupIndex:a.length-1},...e,{formattedValue:void 0,offset:t.range()[1],labelOffset:0,groupIndex:a.length-1}]}return Ua(o,a,i,r,t)},[t,n,a,i,r])}function Ua(e,t,n,r,i){let a=[],o=new Map,s=0;for(let c=0;c<t.length;c+=1)for(let l=0;l<e.length;l+=1){let u=e[l],d=t[c].getValue(u,l),f=a[a.length-1];if(f?.value!==d||f?.groupIndex!==c){s=1;let e=F(i)?i(u)-(i.step()-i.bandwidth())/2+Va[n]*i.step():i(u),t=i.step()*s*(Va[r]-Va[n]);a.push({value:d,formattedValue:`${d}`,offset:e,groupIndex:c,dataIndex:l,ignoreTick:!1,labelOffset:t}),o.has(l)||o.set(l,new Set);let f=o.get(l);for(let e of f.values())a[e].ignoreTick=!0;f.add(a.length-1)}else s+=1,f.labelOffset=i.step()*s*(Va[r]-Va[n])}return a}var Wa={tickSize:6},Ga=(e,t,n)=>{let r=e[t]??{},i=n??Wa.tickSize,a=i*t*2+i;return K({},Wa,r,{tickSize:r.tickSize??a})};function Ka(e){let{xScale:t,defaultizedProps:r,tickNumber:i,positionSign:a,classes:o,Tick:s,TickLabel:c,axisTickLabelProps:l}=za(e);if(!F(t))throw Error("MUI X Charts: ChartsGroupedXAxis only supports the `band` and `point` scale types.");let{disableTicks:u,tickSize:d,valueFormatter:f,slotProps:p,tickInterval:m,tickPlacement:h,tickLabelPlacement:g}=r,_=r.groups,{instance:v}=n(),y=Ha({scale:t,tickNumber:i,valueFormatter:f,tickInterval:m,tickPlacement:h,tickLabelPlacement:g,direction:`x`,groups:_});return(0,Y.jsx)(J.Fragment,{children:y.map((e,t)=>{let{offset:n,labelOffset:r}=e,i=r??0,f=v.isXInside(n),m=e.formattedValue,h=e.ignoreTick??!1,g=e.groupIndex??0,y=Ga(_,g,d),b=a*y.tickSize,x=a*(y.tickSize+3);return(0,Y.jsxs)(`g`,{transform:`translate(${n}, 0)`,className:o.tickContainer,"data-group-index":g,children:[!u&&!h&&f&&(0,Y.jsx)(s,K({y2:b,className:o.tick},p?.axisTick)),m!==void 0&&(0,Y.jsx)(c,K({x:i,y:x},l,{style:K({},l.style,y.tickLabelStyle),text:m}))]},t)})})}const qa=B(`g`,{name:`MuiChartsAxis`,slot:`Root`})(({theme:e})=>({[`& .${Oa.tickLabel}`]:K({},e.typography.caption,{fill:(e.vars||e).palette.text.primary}),[`& .${Oa.label}`]:{fill:(e.vars||e).palette.text.primary},[`& .${Oa.line}`]:{stroke:(e.vars||e).palette.text.primary,shapeRendering:`crispEdges`,strokeWidth:1},[`& .${Oa.tick}`]:{stroke:(e.vars||e).palette.text.primary,shapeRendering:`crispEdges`}}));var Ja=[`axis`],Ya=[`scale`,`tickNumber`,`reverse`,`ordinalTimeTicks`],Xa=B(qa,{name:`MuiChartsXAxis`,slot:`Root`})({});function Za(e){let{axis:t}=e,n=z(e,Ja),{scale:r,ordinalTimeTicks:i}=t,a=K({},Aa,Ie({props:K({},z(t,Ya),n),name:`MuiChartsXAxis`})),{position:o,labelStyle:s,offset:c,slots:l,slotProps:u,sx:d,disableLine:f,label:p,height:m}=a,h=it(),g=ka(a),{left:_,top:v,width:y,height:b}=C(),x=o===`bottom`?1:-1,S=l?.axisLine??`line`,w=l?.axisLabel??Pa,T=L({elementType:w,externalSlotProps:u?.axisLabel,additionalProps:{style:K({},h.typography.body1,{lineHeight:1,fontSize:14,textAnchor:`middle`,dominantBaseline:o===`bottom`?`text-after-edge`:`text-before-edge`},s)},ownerState:{}});if(o===`none`)return null;let E=p?_a(p,T.style).height:0,D=r.domain(),O=F(r)?D.length===0:D.some(Li),k=null;O||(k=`groups`in t&&Array.isArray(t.groups)?(0,Y.jsx)(Ka,K({},n)):(0,Y.jsx)(Ba,K({},n,{axisLabelHeight:E,ordinalTimeTicks:i})));let A={x:_+y/2,y:x*m};return(0,Y.jsxs)(Xa,{transform:`translate(0, ${o===`bottom`?v+b+c:v-c})`,className:g.root,"data-axis-id":a.id,sx:d,children:[!f&&(0,Y.jsx)(S,K({x1:_,x2:_+y,className:g.line},u?.axisLine)),k,p&&(0,Y.jsx)(`g`,{className:g.label,children:(0,Y.jsx)(w,K({},A,T,{text:p}))})]})}function Qa(e){let{xAxis:t,xAxisIds:n}=s(),r=t[e.axisId??n[0]];return r?(0,Y.jsx)(Za,K({},e,{axis:r})):(fn(`MUI X Charts: No axis found. The axisId "${e.axisId}" is probably invalid.`),null)}function $a(e,t,n,r,i){let a=new Map,o=_(i?.angle??0),s=1,c=1;i?.textAnchor===`start`?(s=1/0,c=1):i?.textAnchor===`end`?(s=1,c=1/0):(s=2,c=2),o>180&&([s,c]=[c,s]),r&&([s,c]=[c,s]);for(let r of e)if(r.formattedValue){let e=Math.min((r.offset+r.labelOffset)*s,(t.top+t.height+t.bottom-r.offset-r.labelOffset)*c);a.set(r,ca(r.formattedValue.toString(),t=>sa(t,{width:n,height:e,angle:o,measureText:e=>_a(e,i)})))}return a}const eo=e=>{let{classes:t,position:n,id:r}=e;return V({root:[`root`,`directionY`,n,`id-${r}`],line:[`line`],tickContainer:[`tickContainer`],tick:[`tick`],tickLabel:[`tickLabel`],label:[`label`]},Da,t)},to={disableLine:!1,disableTicks:!1,tickSize:6};var no=[`scale`,`tickNumber`,`reverse`];function ro(e){let{yAxis:t,yAxisIds:n}=o(),r=t[e.axisId??n[0]],{scale:i,tickNumber:a}=r,s=K({},to,Ie({props:K({},z(r,no),e),name:`MuiChartsYAxis`})),{position:c,tickLabelStyle:l,slots:u,slotProps:d}=s,f=it(),p=ct(),m=eo(s),h=c===`right`?1:-1,g=typeof l?.fontSize==`number`?l.fontSize:12,_=u?.axisTick??`line`,v=u?.axisTickLabel??Pa,y=Fa((c===`right`?-90:90)-(l?.angle??0)),b=Ia((c===`right`?-90:90)-(l?.angle??0));return{yScale:i,defaultizedProps:s,tickNumber:a,positionSign:h,classes:m,Tick:_,TickLabel:v,axisTickLabelProps:L({elementType:v,externalSlotProps:d?.axisTickLabel,additionalProps:{style:K({},f.typography.caption,{fontSize:g,textAnchor:p?La(y):y,dominantBaseline:b},l)},className:m.tickLabel,ownerState:{}})}}function io(e){let{axisLabelHeight:t,ordinalTimeTicks:r}=e,{yScale:i,defaultizedProps:a,tickNumber:o,positionSign:s,classes:c,Tick:l,TickLabel:u,axisTickLabelProps:d}=ro(e),f=ct(),{disableTicks:p,tickSize:m,valueFormatter:h,slotProps:g,tickPlacement:_,tickLabelPlacement:v,tickInterval:y,tickLabelInterval:b,tickSpacing:x,width:S}=a,w=C(),{instance:T}=n(),E=Ii(),D=p?4:m,O=Yi({scale:i,tickNumber:o,valueFormatter:h,tickPlacement:_,tickLabelPlacement:v,tickInterval:y,tickSpacing:x,direction:`y`,ordinalTimeTicks:r}),k=Math.max(0,S-(t>0?t+2:0)-D-2),A=E?$a(O,w,k,f,d.style):new Map(Array.from(O).map(e=>[e,e.formattedValue]));return(0,Y.jsx)(J.Fragment,{children:O.map((e,t)=>{let{offset:n,labelOffset:r,value:i}=e,a=s*(D+2),o=r,f=typeof b==`function`&&!b?.(i,t),m=T.isYInside(n),h=A.get(e);return m?(0,Y.jsxs)(`g`,{transform:`translate(0, ${n})`,className:c.tickContainer,children:[!p&&(0,Y.jsx)(l,K({x2:s*D,className:c.tick},g?.axisTick)),h!==void 0&&!f&&(0,Y.jsx)(u,K({x:a,y:o,text:h},d))]},t):null})})}var ao={tickSize:6},oo=(e,t,n)=>{let r=e[t]??{},i=n??ao.tickSize,a=i*t*2+i;return K({},ao,r,{tickSize:r.tickSize??a})};function so(e){let{yScale:t,defaultizedProps:r,tickNumber:i,positionSign:a,classes:o,Tick:s,TickLabel:c,axisTickLabelProps:l}=ro(e);if(!F(t))throw Error("MUI X Charts: ChartsGroupedYAxis only supports the `band` and `point` scale types.");let{disableTicks:u,tickSize:d,valueFormatter:f,slotProps:p,tickInterval:m,tickPlacement:h,tickLabelPlacement:g}=r,_=r.groups,{instance:v}=n(),y=Ha({scale:t,tickNumber:i,valueFormatter:f,tickInterval:m,tickPlacement:h,tickLabelPlacement:g,direction:`y`,groups:_});return(0,Y.jsx)(J.Fragment,{children:y.map((e,t)=>{let{offset:n,labelOffset:r}=e,i=r??0,f=v.isYInside(n),m=e.formattedValue,h=e.ignoreTick??!1,g=e.groupIndex??0,y=oo(_,g,d),b=a*y.tickSize,x=a*(y.tickSize+2);return(0,Y.jsxs)(`g`,{transform:`translate(0, ${n})`,className:o.tickContainer,"data-group-index":g,children:[!u&&!h&&f&&(0,Y.jsx)(s,K({x2:b,className:o.tick},p?.axisTick)),m!==void 0&&(0,Y.jsx)(c,K({x,y:i},l,{style:K({},l.style,y.tickLabelStyle),text:m}))]},t)})})}var co=[`axis`],lo=[`scale`,`tickNumber`,`reverse`,`ordinalTimeTicks`],uo=B(qa,{name:`MuiChartsYAxis`,slot:`Root`})({});function fo(e){let{axis:t}=e,n=z(e,co),{scale:r,ordinalTimeTicks:i}=t,a=z(t,lo),o=Ii(),s=K({},to,Ie({props:K({},a,n),name:`MuiChartsYAxis`})),{position:c,disableLine:l,label:u,labelStyle:d,offset:f,width:p,sx:m,slots:h,slotProps:g}=s,_=it(),v=eo(s),{left:y,top:b,width:x,height:S}=C(),w=c===`right`?1:-1,T=h?.axisLine??`line`,E=h?.axisLabel??Pa,D=L({elementType:T,externalSlotProps:g?.axisLine,additionalProps:{strokeLinecap:`square`},ownerState:{}}),O=L({elementType:E,externalSlotProps:g?.axisLabel,additionalProps:{style:K({},_.typography.body1,{lineHeight:1,fontSize:14,angle:w*90,textAnchor:`middle`,dominantBaseline:`text-before-edge`},d)},ownerState:{}});if(c===`none`)return null;let k={x:w*p,y:b+S/2},A=u==null?0:_a(u,O.style).height,j=r.domain(),M=F(r)?j.length===0:j.some(Li),N=null;return M||(N=`groups`in t&&Array.isArray(t.groups)?(0,Y.jsx)(so,K({},n)):(0,Y.jsx)(io,K({},n,{axisLabelHeight:A,ordinalTimeTicks:i}))),(0,Y.jsxs)(uo,{transform:`translate(${c===`right`?y+x+f:y-f}, 0)`,className:v.root,"data-axis-id":s.id,sx:m,children:[!l&&(0,Y.jsx)(T,K({y1:b,y2:b+S,className:v.line},D)),N,u&&o&&(0,Y.jsx)(`g`,{className:v.label,children:(0,Y.jsx)(E,K({},k,O,{text:u}))})]})}function po(e){let{yAxis:t,yAxisIds:n}=o(),r=t[e.axisId??n[0]];return r?(0,Y.jsx)(fo,K({},e,{axis:r})):(fn(`MUI X Charts: No axis found. The axisId "${e.axisId}" is probably invalid.`),null)}function mo(e){let{slots:t,slotProps:n}=e,{xAxisIds:r,xAxis:i}=s(),{yAxisIds:a,yAxis:c}=o();return(0,Y.jsxs)(J.Fragment,{children:[r.map(e=>!i[e].position||i[e].position===`none`?null:(0,Y.jsx)(Qa,{slots:t,slotProps:n,axisId:e},e)),a.map(e=>!c[e].position||c[e].position===`none`?null:(0,Y.jsx)(po,{slots:t,slotProps:n,axisId:e},e))]})}function ho(e){return q(`MuiChartsAxisHighlight`,e)}U(`MuiChartsAxisHighlight`,[`root`]);const go=B(`path`,{name:`MuiChartsAxisHighlight`,slot:`Root`})(({theme:e})=>({pointerEvents:`none`,variants:[{props:{axisHighlight:`band`},style:K({fill:`white`,fillOpacity:.1},e.applyStyles(`light`,{fill:`gray`}))},{props:{axisHighlight:`line`},style:K({strokeDasharray:`5 2`,stroke:`#ffffff`},e.applyStyles(`light`,{stroke:`#000000`}))}]}));function _o(e){let{type:t,classes:n}=e,{left:r,width:i}=C(),a=pe(),o=a.use(yn),s=a.use(he);return o.length===0?null:o.map(({axisId:e,value:a})=>{let o=s.axis[e].scale,c=mr(o),l=t===`band`&&a!==null&&F(o);return(0,Y.jsxs)(J.Fragment,{children:[l&&o(a)!==void 0&&(0,Y.jsx)(go,{d:`M ${r} ${o(a)-(o.step()-o.bandwidth())/2} l 0 ${o.step()} l ${i} 0 l 0 ${-o.step()} Z`,className:n.root,ownerState:{axisHighlight:`band`}}),t===`line`&&a!==null&&(0,Y.jsx)(go,{d:`M ${r} ${c(a)} L ${r+i} ${c(a)}`,className:n.root,ownerState:{axisHighlight:`line`}})]},`${e}-${a}`)})}function vo(e){let{type:t,classes:n}=e,{top:r,height:i}=C(),a=pe(),o=a.use(vn),s=a.use(ne);return o.length===0?null:o.map(({axisId:e,value:a})=>{let o=s.axis[e].scale,c=mr(o),l=t===`band`&&a!==null&&F(o);return(0,Y.jsxs)(J.Fragment,{children:[l&&o(a)!==void 0&&(0,Y.jsx)(go,{d:`M ${o(a)-(o.step()-o.bandwidth())/2} ${r} l ${o.step()} 0 l 0 ${i} l ${-o.step()} 0 Z`,className:n.root,ownerState:{axisHighlight:`band`}}),t===`line`&&a!==null&&(0,Y.jsx)(go,{d:`M ${c(a)} ${r} L ${c(a)} ${r+i}`,className:n.root,ownerState:{axisHighlight:`line`}})]},`${e}-${a}`)})}var yo=()=>V({root:[`root`]},ho);function bo(e){let{x:t,y:n}=e,r=yo();return(0,Y.jsxs)(J.Fragment,{children:[t&&t!==`none`&&(0,Y.jsx)(vo,{type:t,classes:r}),n&&n!==`none`&&(0,Y.jsx)(_o,{type:n,classes:r})]})}function xo(e){let{id:t,offset:n}=e,{left:r,top:i,width:a,height:o}=C(),s=K({top:0,right:0,bottom:0,left:0},n);return(0,Y.jsx)(`clipPath`,{id:t,children:(0,Y.jsx)(`rect`,{x:r-s.left,y:i-s.top,width:a+s.left+s.right,height:o+s.top+s.bottom})})}function So(e){return q(`MuiChartsGrid`,e)}const Co=U(`MuiChartsGrid`,[`root`,`line`,`horizontalLine`,`verticalLine`]),wo=B(`g`,{name:`MuiChartsGrid`,slot:`Root`,overridesResolver:(e,t)=>[{[`&.${Co.verticalLine}`]:t.verticalLine},{[`&.${Co.horizontalLine}`]:t.horizontalLine},t.root]})({}),To=B(`line`,{name:`MuiChartsGrid`,slot:`Line`})(({theme:e})=>({stroke:(e.vars||e).palette.divider,shapeRendering:`crispEdges`,strokeWidth:1}));function Eo(e){let{instance:t}=n(),{axis:r,start:i,end:a,classes:o}=e,{scale:s,tickNumber:c,tickInterval:l,tickSpacing:u}=r,d=Yi({scale:s,tickNumber:c,tickInterval:l,tickSpacing:u,direction:`x`,ordinalTimeTicks:`ordinalTimeTicks`in r?r.ordinalTimeTicks:void 0});return(0,Y.jsx)(J.Fragment,{children:d.map(({value:e,offset:n})=>t.isXInside(n)?(0,Y.jsx)(To,{y1:i,y2:a,x1:n,x2:n,className:o.verticalLine},`vertical-${e?.getTime?.()??e}`):null)})}function Do(e){let{instance:t}=n(),{axis:r,start:i,end:a,classes:o}=e,{scale:s,tickNumber:c,tickInterval:l,tickSpacing:u}=r,d=Yi({scale:s,tickNumber:c,tickInterval:l,tickSpacing:u,direction:`y`,ordinalTimeTicks:`ordinalTimeTicks`in r?r.ordinalTimeTicks:void 0});return(0,Y.jsx)(J.Fragment,{children:d.map(({value:e,offset:n})=>t.isYInside(n)?(0,Y.jsx)(To,{y1:n,y2:n,x1:i,x2:a,className:o.horizontalLine},`horizontal-${e?.getTime?.()??e}`):null)})}var Oo=[`vertical`,`horizontal`],ko=({classes:e})=>V({root:[`root`],verticalLine:[`line`,`verticalLine`],horizontalLine:[`line`,`horizontalLine`]},So,e);function Ao(e){let t=Ie({props:e,name:`MuiChartsGrid`}),n=C(),{vertical:r,horizontal:i}=t,a=z(t,Oo),{xAxis:c,xAxisIds:l}=s(),{yAxis:u,yAxisIds:d}=o(),f=ko(t),p=u[d[0]],m=c[l[0]];return(0,Y.jsxs)(wo,K({},a,{className:f.root,children:[r&&(0,Y.jsx)(Eo,{axis:m,start:n.top,end:n.height+n.top,classes:f}),i&&(0,Y.jsx)(Do,{axis:p,start:n.left,end:n.width+n.left,classes:f})]}))}const jo=[l,O,f,xe,ae,E,j,we];var Mo=`xAxis.yAxis.series.width.height.margin.colors.dataset.sx.axisHighlight.grid.children.slots.slotProps.skipAnimation.loading.layout.onItemClick.highlightedItem.onHighlightChange.borderRadius.barLabel.className.hideLegend.showToolbar.brushConfig.renderer`.split(`.`);const No=e=>{let{xAxis:t,yAxis:n,series:r,width:i,height:a,margin:o,colors:s,dataset:c,sx:l,axisHighlight:u,grid:d,children:f,slots:p,slotProps:m,skipAnimation:h,loading:g,layout:_,onItemClick:v,highlightedItem:y,onHighlightChange:b,borderRadius:x,barLabel:S,className:C,brushConfig:w,renderer:T}=e,E=z(e,Mo),D=`${gt()}-clip-path`,O=_===`horizontal`||_===void 0&&r.some(e=>e.layout===`horizontal`),k=J.useMemo(()=>[{id:Be,scaleType:`band`,data:Array.from({length:Math.max(...r.map(e=>(e.data??c??[]).length))},(e,t)=>t)}],[c,r]),A=J.useMemo(()=>[{id:ee,scaleType:`band`,data:Array.from({length:Math.max(...r.map(e=>(e.data??c??[]).length))},(e,t)=>t)}],[c,r]),j=J.useMemo(()=>r.map(e=>K({type:`bar`},e,{layout:O?`horizontal`:`vertical`})),[O,r]),M=O?void 0:k,N=J.useMemo(()=>t?O?t:t.map(e=>K({scaleType:`band`},e)):M,[M,O,t]),P=O?A:void 0,te=K({},E,{series:j,width:i,height:a,margin:o,colors:s,dataset:c,xAxis:N,yAxis:J.useMemo(()=>n?O?n.map(e=>K({scaleType:`band`},e)):n:P,[P,O,n]),highlightedItem:y,onHighlightChange:b,disableAxisListener:m?.tooltip?.trigger!==`axis`&&u?.x===`none`&&u?.y===`none`,className:C,skipAnimation:h,brushConfig:w,plugins:jo}),ne={onItemClick:v,slots:p,slotProps:m,borderRadius:x,renderer:T,barLabel:S},re={vertical:d?.vertical,horizontal:d?.horizontal},ie={clipPath:`url(#${D})`},ae={id:D},oe={slots:p,slotProps:m,loading:g},F={slots:p,slotProps:m},se=K({},O?{y:`band`}:{x:`band`},u),ce={slots:p,slotProps:m};return{chartsWrapperProps:{sx:l,legendPosition:e.slotProps?.legend?.position,legendDirection:e.slotProps?.legend?.direction,hideLegend:e.hideLegend??!1},chartContainerProps:te,barPlotProps:ne,gridProps:re,clipPathProps:ae,clipPathGroupProps:ie,overlayProps:oe,chartsAxisProps:F,axisHighlightProps:se,legendProps:ce,children:f}};function Po(e){let t=it(),n=re(),r=hr(),{xAxis:i,xAxisIds:a}=s(),{yAxis:c,yAxisIds:l}=o();if(n===null||n.type!==`bar`||!r)return null;let u=r.series[n.seriesId];if(u.data[n.dataIndex]==null)return null;let d=u.xAxisId??a[0],f=u.yAxisId??l[0],p=i[d],m=c[f],g=r.series[n.seriesId].layout===`vertical`,_=r.stackingGroups.findIndex(e=>e.ids.includes(n.seriesId)),v=h({verticalLayout:g,xAxisConfig:p,yAxisConfig:m,series:u,dataIndex:n.dataIndex,numberOfGroups:r.stackingGroups.length,groupIndex:_});if(v===null)return null;let{x:y,y:b,height:x,width:S}=v;return(0,Y.jsx)(`rect`,K({fill:`none`,stroke:(t.vars??t).palette.text.primary,strokeWidth:2,x:y-3,y:b-3,width:S+6,height:x+6,rx:3,ry:3},e))}var Fo=J.forwardRef(function(e,t){let n=Ie({props:e,name:`MuiBarChart`}),{chartsWrapperProps:r,chartContainerProps:i,barPlotProps:a,gridProps:o,clipPathProps:s,clipPathGroupProps:c,overlayProps:l,chartsAxisProps:u,axisHighlightProps:d,legendProps:f,children:p}=No(n),{chartDataProviderProps:m,chartsSurfaceProps:h}=Te(i,t),g=n.slots?.tooltip??je,_=n.slots?.toolbar;return(0,Y.jsx)(ue,K({},m,{children:(0,Y.jsxs)(ve,K({},r,{children:[n.showToolbar&&_?(0,Y.jsx)(_,K({},n.slotProps?.toolbar)):null,!n.hideLegend&&(0,Y.jsx)(me,K({},f)),(0,Y.jsxs)(M,K({},h,{children:[(0,Y.jsx)(Ao,K({},o)),(0,Y.jsxs)(`g`,K({},c,{children:[(0,Y.jsx)(Fi,K({},a)),(0,Y.jsx)(be,K({},l)),(0,Y.jsx)(bo,K({},d)),(0,Y.jsx)(Po,{})]})),(0,Y.jsx)(mo,K({},u)),(0,Y.jsx)(xo,K({},s)),p]})),!n.loading&&(0,Y.jsx)(g,K({},n.slotProps?.tooltip))]}))}))});function $({subsectionId:e,parentId:t,title:n,defaultExpanded:r=!0,children:i,secondary:a}){return(0,Y.jsx)(W,{sx:{mb:1},children:(0,Y.jsx)(kr,{storageKey:`${t}:${e}`,title:n,defaultExpanded:r,secondary:a,children:i})})}function Io({distribution:e,parentId:t}){let{top_artists:n,others_count:r,total_artists:i}=e;if(n.length===0)return(0,Y.jsx)($,{subsectionId:`artists`,parentId:t,title:`Artists`,children:(0,Y.jsx)(G,{color:`text.secondary`,children:`No artist data available`})});let a=n.map(e=>e.artist),o=n.map(e=>e.count);return(0,Y.jsxs)($,{subsectionId:`artists`,parentId:t,title:`Artists`,secondary:(0,Y.jsxs)(G,{variant:`body2`,color:`text.secondary`,children:[i,` artists`]}),children:[(0,Y.jsx)(Fo,{height:300,xAxis:[{scaleType:`band`,data:a,tickLabelStyle:{angle:-45,textAnchor:`end`,fontSize:11}}],series:[{data:o}],margin:{left:50,right:20,top:20,bottom:80}}),r>0&&(0,Y.jsxs)(G,{variant:`body2`,color:`text.secondary`,sx:{fontStyle:`italic`,mt:1},children:[`+ `,r,` tracks from `,i-n.length,` `,`other artists`]})]})}var Lo=[`#2196f3`,`#4caf50`,`#ff9800`,`#e91e63`,`#9c27b0`,`#00bcd4`,`#ff5722`,`#795548`,`#607d8b`,`#3f51b5`,`#8bc34a`,`#ffc107`,`#673ab7`,`#009688`,`#f44336`,`#03a9f4`,`#cddc39`,`#ffeb3b`,`#9e9e9e`,`#ff4081`];function Ro({distribution:t,parentId:n}){let[r,i]=(0,J.useState)(new Set),{pieData:a,visibleCount:o,totalCount:s}=(0,J.useMemo)(()=>{let e=t.filter(e=>!r.has(e.genre));return{pieData:e.map((e,t)=>({id:e.genre,value:e.count,label:e.genre,color:Lo[t%Lo.length]})),visibleCount:e.length,totalCount:t.length}},[t,r]),c=e=>{i(t=>{let n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})};return t.length===0?(0,Y.jsx)($,{subsectionId:`genres`,parentId:n,title:`Genres`,children:(0,Y.jsx)(G,{color:`text.secondary`,children:`No genre data available`})}):(0,Y.jsxs)($,{subsectionId:`genres`,parentId:n,title:`Genres`,secondary:(0,Y.jsxs)(G,{variant:`body2`,color:`text.secondary`,children:[o,` of `,s,` genres shown`]}),children:[a.length>0?(0,Y.jsx)(W,{sx:{height:350,mb:2},children:(0,Y.jsx)(ke,{series:[{data:a,innerRadius:40,outerRadius:120,paddingAngle:1,cornerRadius:4,highlightScope:{highlight:`item`,fade:`global`}}],height:350,hideLegend:!0})}):(0,Y.jsx)(G,{color:`text.secondary`,sx:{mb:2},children:`All genres hidden. Click chips below to show.`}),(0,Y.jsx)(W,{sx:{mb:1},children:(0,Y.jsxs)(e,{direction:`row`,spacing:1,sx:{mb:1},children:[(0,Y.jsx)(qe,{label:`Show All`,size:`small`,variant:`outlined`,onClick:()=>i(new Set),disabled:r.size===0}),(0,Y.jsx)(qe,{label:`Hide All`,size:`small`,variant:`outlined`,onClick:()=>i(new Set(t.map(e=>e.genre))),disabled:r.size===t.length})]})}),(0,Y.jsx)(e,{direction:`row`,flexWrap:`wrap`,gap:.5,children:t.map((e,t)=>{let n=r.has(e.genre),i=Lo[t%Lo.length];return(0,Y.jsx)(qe,{label:`${e.genre} (${e.count})`,size:`small`,onClick:()=>c(e.genre),sx:{bgcolor:n?`transparent`:i,color:n?`text.secondary`:`#fff`,border:n?1:0,borderColor:`divider`,textDecoration:n?`line-through`:`none`,opacity:n?.6:1,"&:hover":{bgcolor:n?`action.hover`:i,opacity:1}}},e.genre)})})]})}function zo(e){let t=Math.floor(e/36e5),n=Math.floor(e%36e5/6e4);return t>0?`${t}h ${n}m`:`${n}m`}function Bo(e){return e>=0xe8d4a51000?`${(e/0xe8d4a51000).toFixed(1)} TB`:e>=1e9?`${(e/1e9).toFixed(1)} GB`:e>=1e6?`${(e/1e6).toFixed(1)} MB`:`${(e/1e3).toFixed(1)} KB`}function Vo({label:e,value:t}){return(0,Y.jsxs)(W,{sx:{textAlign:`center`,py:1,flex:`1 1 25%`,minWidth:100},children:[(0,Y.jsx)(G,{variant:`h5`,color:`primary`,children:t}),(0,Y.jsx)(G,{variant:`body2`,color:`text.secondary`,children:e})]})}function Ho({stats:e,parentId:t}){return(0,Y.jsx)($,{subsectionId:`stats`,parentId:t,title:`Library Statistics`,children:(0,Y.jsxs)(W,{sx:{display:`flex`,flexWrap:`wrap`,gap:2},children:[(0,Y.jsx)(Vo,{label:`Tracks`,value:e.file_count.toLocaleString()}),(0,Y.jsx)(Vo,{label:`Total Duration`,value:zo(e.total_duration_ms)}),(0,Y.jsx)(Vo,{label:`Total Size`,value:Bo(e.total_file_size_bytes)}),(0,Y.jsx)(Vo,{label:`Avg Track`,value:zo(e.avg_track_length_ms)})]})})}function Uo(e){return e.replace(` `,`_`)}const Wo=U(`MuiAppearingMask`,[`animate`]);var Go=B(`rect`,{slot:`internal`,shouldForwardProp:void 0})({animationName:`animate-width`,animationTimingFunction:ge,animationDuration:`0s`,[`&.${Wo.animate}`]:{animationDuration:`300ms`},"@keyframes animate-width":{from:{width:0}}});function Ko(e){let t=C(),n=Uo(`${Fe()}-${e.id}`);return(0,Y.jsxs)(J.Fragment,{children:[(0,Y.jsx)(`clipPath`,{id:n,children:(0,Y.jsx)(Go,{className:e.skipAnimation?``:Wo.animate,x:0,y:0,width:t.left+t.width+t.right,height:t.top+t.height+t.bottom})}),(0,Y.jsx)(`g`,{clipPath:`url(#${n})`,children:e.children})]})}var qo=[`skipAnimation`,`ownerState`];function Jo(e){let{skipAnimation:t,ownerState:n}=e,r=z(e,qo),i=_r(e);return(0,Y.jsx)(Ko,{skipAnimation:t,id:`${n.id}-area-clip`,children:(0,Y.jsx)(`path`,K({fill:n.gradientId?`url(#${n.gradientId})`:n.color,filter:n.isHighlighted?`brightness(140%)`:n.gradientId?void 0:`brightness(120%)`,opacity:n.isFaded?.3:1,stroke:`none`,"data-series":n.id,"data-highlighted":n.isHighlighted||void 0,"data-faded":n.isFaded||void 0},r,i))})}var Yo=[`id`,`classes`,`color`,`gradientId`,`slots`,`slotProps`,`onClick`];function Xo(e){return q(`MuiAreaElement`,e)}const Zo=U(`MuiAreaElement`,[`root`,`highlighted`,`faded`,`series`]);var Qo=e=>{let{classes:t,id:n,isFaded:r,isHighlighted:i}=e;return V({root:[`root`,`series-${n}`,i&&`highlighted`,r&&`faded`]},Xo,t)};function $o(e){let{id:t,classes:n,color:r,gradientId:i,slots:a,slotProps:o,onClick:s}=e,c=z(e,Yo),l=te({type:`line`,seriesId:t}),{isFaded:u,isHighlighted:d}=A({seriesId:t}),f={id:t,classes:n,color:r,gradientId:i,isFaded:u,isHighlighted:d},p=Qo(f),m=a?.area??Jo;return(0,Y.jsx)(m,K({},c,L({elementType:m,externalSlotProps:o?.area,additionalProps:K({},l,{onClick:s,cursor:s?`pointer`:`unset`}),className:p.root,ownerState:f})))}function es(e){switch(e){case`catmullRom`:return Zn.alpha(.5);case`linear`:return Sn;case`monotoneX`:return ar;case`monotoneY`:return or;case`natural`:return lr;case`step`:return dr;case`stepBefore`:return fr;case`stepAfter`:return pr;case`bumpY`:return kn;case`bumpX`:return On;default:return ar}}function ts(e,t){let n=gr(),r=s().xAxisIds[0],i=o().yAxisIds[0],a=le();return J.useMemo(()=>{if(n===void 0)return[];let{series:o,stackingGroups:s}=n,c=[];for(let n of s){let s=n.ids;for(let n=s.length-1;n>=0;--n){let l=s[n],{xAxisId:u=r,yAxisId:d=i,visibleStackedData:f,stackedData:p,data:m,connectNulls:h,baseline:g,curve:_,strictStepCurve:v,area:y}=o[l];if(!y||!(u in e)||!(d in t))continue;let b=e[u].scale,x=mr(b),S=t[d].scale,C=e[u].data,w=t[d].colorScale&&a(d)||e[u].colorScale&&a(u)||void 0,T=_?.includes(`step`)&&!v&&F(b),E=C?.flatMap((e,t)=>{let n=m[t]==null;if(T){let r=[{x:e,y:f[t],nullData:n,isExtension:!1}];return!n&&(t===0||m[t-1]==null)&&r.unshift({x:(b(e)??0)-(b.step()-b.bandwidth())/2,y:f[t],nullData:n,isExtension:!0}),!n&&(t===m.length-1||m[t+1]==null)&&r.push({x:(b(e)??0)+(b.step()+b.bandwidth())/2,y:f[t],nullData:n,isExtension:!0}),r}return{x:e,y:f[t],nullData:n}})??[],D=h?E.filter(e=>!e.nullData):E,O=En().x(e=>e.isExtension?e.x:x(e.x)).defined(e=>h||!e.nullData||!!e.isExtension).y0(e=>{if(typeof g==`number`)return S(g);if(g===`max`)return S.range()[1];if(g===`min`)return S.range()[0];let t=e.y&&S(e.y[0]);return Number.isNaN(t)?S.range()[0]:t}).y1(e=>e.y&&S(e.y[1])).curve(es(_))(D)||``;c.push({area:o[l].area,color:o[l].color,gradientId:w,d:O,seriesId:l})}}return c},[n,r,i,e,t,a])}var ns=[`slots`,`slotProps`,`onItemClick`,`skipAnimation`],rs=B(`g`,{name:`MuiAreaPlot`,slot:`Root`})({[`& .${Zo.root}`]:{transitionProperty:`opacity, fill`,transitionDuration:`300ms`,transitionTimingFunction:ge}}),is=()=>{let{xAxis:e}=s(),{yAxis:t}=o();return ts(e,t)};function as(e){let{slots:t,slotProps:n,onItemClick:r,skipAnimation:i}=e,a=z(e,ns),o=De(Yr()||i);return(0,Y.jsx)(rs,K({},a,{children:is().map(({d:e,seriesId:i,color:a,area:s,gradientId:c})=>!!s&&(0,Y.jsx)($o,{id:i,d:e,color:a,gradientId:c,slots:t,slotProps:n,onClick:r&&(e=>r(e,{type:`line`,seriesId:i})),skipAnimation:o},i))}))}var os=[`skipAnimation`,`ownerState`],ss=J.forwardRef(function(e,t){let{skipAnimation:n,ownerState:r}=e,i=z(e,os),a=Tr({d:e.d,skipAnimation:n,ref:t}),o=r.isFaded?.3:1;return(0,Y.jsx)(Ko,{skipAnimation:n,id:`${r.id}-line-clip`,children:(0,Y.jsx)(`path`,K({stroke:r.gradientId?`url(#${r.gradientId})`:r.color,strokeWidth:2,strokeLinejoin:`round`,fill:`none`,filter:r.isHighlighted?`brightness(120%)`:void 0,opacity:r.hidden?0:o,"data-series":r.id,"data-highlighted":r.isHighlighted||void 0,"data-faded":r.isFaded||void 0},i,a))})}),cs=[`id`,`classes`,`color`,`gradientId`,`slots`,`slotProps`,`onClick`,`hidden`];function ls(e){return q(`MuiLineElement`,e)}const us=U(`MuiLineElement`,[`root`,`highlighted`,`faded`,`series`]);var ds=e=>{let{classes:t,id:n,isFaded:r,isHighlighted:i}=e;return V({root:[`root`,`series-${n}`,i&&`highlighted`,r&&`faded`]},ls,t)};function fs(e){let{id:t,classes:n,color:r,gradientId:i,slots:a,slotProps:o,onClick:s,hidden:c}=e,l=z(e,cs),u=te({type:`line`,seriesId:t}),{isFaded:d,isHighlighted:f}=A({seriesId:t}),p={id:t,classes:n,color:r,gradientId:i,isFaded:d,isHighlighted:f,hidden:c},m=ds(p),h=a?.line??ss;return(0,Y.jsx)(h,K({},l,L({elementType:h,externalSlotProps:o?.line,additionalProps:K({},u,{onClick:s,cursor:s?`pointer`:`unset`}),className:m.root,ownerState:p})))}function ps(e,t){let n=gr(),r=s().xAxisIds[0],i=o().yAxisIds[0],a=le();return J.useMemo(()=>{if(n===void 0)return[];let{series:o,stackingGroups:s}=n,c=[];for(let n of s){let s=n.ids;for(let n of s){let{xAxisId:s=r,yAxisId:l=i,stackedData:u,visibleStackedData:d,data:f,connectNulls:p,curve:m,strictStepCurve:h}=o[n];if(!(s in e)||!(l in t))continue;let g=e[s].scale,_=mr(g),v=t[l].scale,y=e[s].data,b=t[l].colorScale&&a(l)||e[s].colorScale&&a(s)||void 0,x=m?.includes(`step`)&&!h&&F(g),S=y?.flatMap((e,t)=>{let n=f[t]==null;if(x){let r=[{x:e,y:d[t],nullData:n,isExtension:!1}];return!n&&(t===0||f[t-1]==null)&&r.unshift({x:(g(e)??0)-(g.step()-g.bandwidth())/2,y:d[t],nullData:n,isExtension:!0}),!n&&(t===f.length-1||f[t+1]==null)&&r.push({x:(g(e)??0)+(g.step()+g.bandwidth())/2,y:d[t],nullData:n,isExtension:!0}),r}return{x:e,y:d[t],nullData:n}})??[],C=p?S.filter(e=>!e.nullData):S,w=o[n].hidden,T=Tn().x(e=>e.isExtension?e.x:_(e.x)).defined(e=>p||!e.nullData||!!e.isExtension).y(e=>v(w?v.domain()[0]:e.y[1])).curve(es(m))(C)||``;c.push({color:o[n].color,gradientId:b,d:T,seriesId:n,hidden:o[n].hidden})}}return c},[n,r,i,e,t,a])}var ms=[`slots`,`slotProps`,`skipAnimation`,`onItemClick`],hs=B(`g`,{name:`MuiAreaPlot`,slot:`Root`})({[`& .${us.root}`]:{transitionProperty:`opacity, fill`,transitionDuration:`300ms`,transitionTimingFunction:ge}}),gs=()=>{let{xAxis:e}=s(),{yAxis:t}=o();return ps(e,t)};function _s(e){let{slots:t,slotProps:n,skipAnimation:r,onItemClick:i}=e,a=z(e,ms),o=De(Yr()||r);return(0,Y.jsx)(hs,K({},a,{children:gs().map(({d:e,seriesId:r,color:a,gradientId:s,hidden:c})=>(0,Y.jsx)(fs,{id:r,d:e,color:a,gradientId:s,hidden:c,skipAnimation:o,slots:t,slotProps:n,onClick:i&&(e=>i(e,{type:`line`,seriesId:r}))},r))}))}function vs(e){return q(`MuiMarkElement`,e)}const ys=U(`MuiMarkElement`,[`root`,`highlighted`,`faded`,`animate`,`series`]),bs=e=>{let{classes:t,id:n,isFaded:r,isHighlighted:i,skipAnimation:a}=e;return V({root:[`root`,`series-${n}`,i&&`highlighted`,r&&`faded`,a?void 0:`animate`]},vs,t)};var xs=[`x`,`y`,`id`,`classes`,`color`,`dataIndex`,`onClick`,`skipAnimation`,`isFaded`,`isHighlighted`,`shape`,`hidden`],Ss=B(`circle`,{slot:`internal`,shouldForwardProp:void 0})({[`&.${ys.animate}`]:{transitionDuration:`300ms`,transitionProperty:`cx, cy, opacity`,transitionTimingFunction:ge}});function Cs(e){let{x:t,y:n,id:r,classes:i,color:a,dataIndex:o,onClick:s,skipAnimation:c,isFaded:l=!1,isHighlighted:u=!1,hidden:d}=e,f=z(e,xs),p=it(),m=te({type:`line`,seriesId:r,dataIndex:o}),h=bs({id:r,classes:i,isHighlighted:u,isFaded:l,skipAnimation:c});return(0,Y.jsx)(Ss,K({},f,{cx:t,cy:n,r:5,fill:(p.vars||p).palette.background.paper,stroke:a,strokeWidth:2,className:h.root,onClick:s,cursor:s?`pointer`:`unset`,pointerEvents:d?`none`:void 0},m,{"data-highlighted":u||void 0,"data-faded":l||void 0,opacity:d?0:1}))}function ws(e){switch(e){case`circle`:return 0;case`cross`:return 1;case`diamond`:return 2;case`square`:return 3;case`star`:return 4;case`triangle`:return 5;case`wye`:return 6;default:return 0}}var Ts=[`x`,`y`,`id`,`classes`,`color`,`shape`,`dataIndex`,`onClick`,`skipAnimation`,`isFaded`,`isHighlighted`,`hidden`,`style`],Es=B(`path`,{name:`MuiMarkElement`,slot:`Root`})(({theme:e})=>({fill:(e.vars||e).palette.background.paper,[`&.${ys.animate}`]:{transitionDuration:`300ms`,transitionProperty:`transform, transform-origin, opacity`,transitionTimingFunction:ge}}));function Ds(e){let{x:t,y:n,id:r,classes:i,color:a,shape:o,dataIndex:s,onClick:c,skipAnimation:l,isFaded:u=!1,isHighlighted:d=!1,hidden:f,style:p}=e,m=z(e,Ts),h=te({type:`line`,seriesId:r,dataIndex:s}),g={id:r,classes:i,isHighlighted:d,isFaded:u,skipAnimation:l},_=bs(g);return(0,Y.jsx)(Es,K({},m,{style:K({},p,{transform:`translate(${t}px, ${n}px)`,transformOrigin:`${t}px ${n}px`}),ownerState:g,className:_.root,d:Kn(Gn[ws(o)])(),onClick:c,cursor:c?`pointer`:`unset`,pointerEvents:f?`none`:void 0},h,{"data-highlighted":d||void 0,"data-faded":u||void 0,opacity:f?0:1,strokeWidth:2,stroke:a}))}function Os(e,t){let r=gr(),i=s().xAxisIds[0],a=o().yAxisIds[0],c=Fe(),{instance:l}=n();return J.useMemo(()=>{if(r===void 0)return[];let{series:n,stackingGroups:o}=r,s=[];for(let r of o){let o=r.ids;for(let r of o){let{xAxisId:o=i,yAxisId:u=a,visibleStackedData:d,data:f,showMark:p=!0,shape:m=`circle`,hidden:h}=n[r];if(p===!1||!(o in e)||!(u in t))continue;let g=mr(e[o].scale),_=t[u].scale,v=e[o].data,y=Uo(`${c}-${r}-line-clip`),b=fe(n[r],e[o],t[u]),x=[];if(v)for(let e=0;e<v.length;e+=1){let t=v[e],n=f[e]==null?null:d[e][1];if(n===null)continue;let r=_(h?_.domain()[0]:n),i=g(t);l.isPointInside(i,r)&&(p!==!0&&!p({x:i,y:r,index:e,position:t,value:n})||x.push({x:i,y:r,index:e,color:b(e)}))}s.push({seriesId:r,clipId:y,shape:m,xAxisId:o,marks:x,hidden:h})}}return s},[r,i,a,c,e,t,l])}var ks=[`slots`,`slotProps`,`skipAnimation`,`onItemClick`];function As(e){let{slots:t,slotProps:r,skipAnimation:i,onItemClick:a}=e,c=z(e,ks),l=De(Yr()||i),{xAxis:u}=s(),{yAxis:d}=o(),{store:f}=n(),{isFaded:p,isHighlighted:m}=se(),h=f.use(gn),g=J.useMemo(()=>{let e={};for(let{dataIndex:t,axisId:n}of h)e[n]===void 0?e[n]=new Set([t]):e[n].add(t);return e},[h]);return(0,Y.jsx)(`g`,K({},c,{children:Os(u,d).map(({seriesId:e,clipId:n,shape:i,xAxisId:o,marks:s,hidden:c})=>{let u=t?.mark??(i===`circle`?Cs:Ds),d=m({seriesId:e}),f=!d&&p({seriesId:e});return(0,Y.jsx)(`g`,{clipPath:`url(#${n})`,"data-series":e,children:s.map(({x:t,y:n,index:s,color:p})=>(0,Y.jsx)(u,K({id:e,dataIndex:s,shape:i,color:p,x:t,y:n,skipAnimation:l,onClick:a&&(t=>a(t,{type:`line`,seriesId:e,dataIndex:s})),isHighlighted:g[o]?.has(s)||d,isFaded:f,hidden:c},r?.mark),`${e}-${s}`))},e)})}))}var js=[`x`,`y`,`id`,`classes`,`color`,`shape`];function Ms(e){return q(`MuiHighlightElement`,e)}U(`MuiHighlightElement`,[`root`]);var Ns=e=>{let{classes:t,id:n}=e;return V({root:[`root`,`series-${n}`]},Ms,t)};function Ps(e){let{x:t,y:n,color:r,shape:i}=e,a=z(e,js),o=Ns(e),s=i===`circle`?`circle`:`path`,c=i===`circle`?{cx:0,cy:0,r:a.r===void 0?5:a.r}:{d:Kn(Gn[ws(i)])()},l=Re>18?{transformOrigin:`${t} ${n}`}:{"transform-origin":`${t} ${n}`};return(0,Y.jsx)(s,K({pointerEvents:`none`,className:o.root,transform:`translate(${t} ${n})`,fill:r},l,c,a))}var Fs=[`slots`,`slotProps`];function Is(e){let{slots:t,slotProps:r}=e,i=z(e,Fs),a=gr(),{xAxis:c,xAxisIds:l}=s(),{yAxis:u,yAxisIds:d}=o(),{instance:f}=n(),p=pe().use(gn);if(p.length===0||a===void 0)return null;let{series:m,stackingGroups:h}=a,g=l[0],_=d[0],v=t?.lineHighlight??Ps;return(0,Y.jsx)(`g`,K({},i,{children:p.flatMap(({dataIndex:e,axisId:t})=>h.flatMap(({ids:n})=>n.flatMap(n=>{let{xAxisId:i=g,yAxisId:a=_,visibleStackedData:o,data:s,disableHighlight:l,shape:d=`circle`}=m[n];if(l||s[e]==null||t!==i)return null;let p=mr(c[i].scale),h=u[a].scale,y=c[i].data;if(y===void 0)throw Error(`MUI X Charts: ${i===`DEFAULT_X_AXIS_KEY`?"The first `xAxis`":`The x-axis with id "${i}"`} should have data property to be able to display a line plot.`);let b=p(y[e]),x=h(o[e][1]);return f.isPointInside(b,x)?(0,Y.jsx)(v,K({id:n,color:fe(m[n],c[i],u[a])(e),x:b,y:x,shape:d},r?.lineHighlight),`${n}`):null})))}))}const Ls=[l,O,f,xe,ae,E,j,we];var Rs=`xAxis.yAxis.series.width.height.margin.colors.dataset.sx.onAreaClick.onLineClick.onMarkClick.axisHighlight.disableLineItemHighlight.hideLegend.grid.children.slots.slotProps.skipAnimation.loading.highlightedItem.onHighlightChange.className.showToolbar.brushConfig`.split(`.`);const zs=e=>{let{xAxis:t,yAxis:n,series:r,width:i,height:a,margin:o,colors:s,dataset:c,sx:l,onAreaClick:u,onLineClick:d,onMarkClick:f,axisHighlight:p,disableLineItemHighlight:m,grid:h,children:g,slots:_,slotProps:v,skipAnimation:y,loading:b,highlightedItem:x,onHighlightChange:S,className:C,brushConfig:w}=e,T=z(e,Rs),E=`${gt()}-clip-path`,D=K({},T,{series:J.useMemo(()=>r.map(e=>K({disableHighlight:!!m,type:`line`},e)),[m,r]),width:i,height:a,margin:o,colors:s,dataset:c,xAxis:t??[{id:`DEFAULT_X_AXIS_KEY`,scaleType:`point`,data:Array.from({length:Math.max(...r.map(e=>(e.data??c??[]).length))},(e,t)=>t)}],yAxis:n,highlightedItem:x,onHighlightChange:S,disableAxisListener:v?.tooltip?.trigger!==`axis`&&p?.x===`none`&&p?.y===`none`,className:C,skipAnimation:y,brushConfig:w,plugins:Ls}),O={vertical:h?.vertical,horizontal:h?.horizontal},k={clipPath:`url(#${E})`},A={id:E},j={slots:_,slotProps:v,onItemClick:u},M={slots:_,slotProps:v,onItemClick:d},N={slots:_,slotProps:v,onItemClick:f,skipAnimation:y},P={slots:_,slotProps:v,loading:b},ee={slots:_,slotProps:v},te=K({x:`line`},p),ne={slots:_,slotProps:v},re={slots:_,slotProps:v};return{chartsWrapperProps:{sx:l,legendPosition:e.slotProps?.legend?.position,legendDirection:e.slotProps?.legend?.direction,hideLegend:e.hideLegend??!1},chartContainerProps:D,gridProps:O,clipPathProps:A,clipPathGroupProps:k,areaPlotProps:j,linePlotProps:M,markPlotProps:N,overlayProps:P,chartsAxisProps:ee,axisHighlightProps:te,lineHighlightPlotProps:ne,legendProps:re,children:g}};var Bs=6;function Vs(){let e=it(),t=re(),n=gr(),{xAxis:r,xAxisIds:i}=s(),{yAxis:a,yAxisIds:c}=o();if(t===null||t.type!==`line`||!n)return null;let l=n.series[t.seriesId];if(l.data[t.dataIndex]==null)return null;let u=l.xAxisId??i[0],d=l.yAxisId??c[0];return(0,Y.jsx)(`rect`,{fill:`none`,stroke:(e.vars??e).palette.text.primary,strokeWidth:2,x:r[u].scale(r[u].data[t.dataIndex])-Bs,y:a[d].scale(l.visibleStackedData[t.dataIndex][1])-Bs,width:2*Bs,height:2*Bs,rx:3,ry:3})}var Hs=J.forwardRef(function(e,t){let n=Ie({props:e,name:`MuiLineChart`}),{chartsWrapperProps:r,chartContainerProps:i,gridProps:a,clipPathProps:o,clipPathGroupProps:s,areaPlotProps:c,linePlotProps:l,markPlotProps:u,overlayProps:d,chartsAxisProps:f,axisHighlightProps:p,lineHighlightPlotProps:m,legendProps:h,children:g}=zs(n),{chartDataProviderProps:_,chartsSurfaceProps:v}=Te(i,t),y=n.slots?.tooltip??je,b=n.slots?.toolbar;return(0,Y.jsx)(ue,K({},_,{children:(0,Y.jsxs)(ve,K({},r,{children:[n.showToolbar&&b?(0,Y.jsx)(b,K({},n.slotProps?.toolbar)):null,!n.hideLegend&&(0,Y.jsx)(me,K({},h)),(0,Y.jsxs)(M,K({},v,{children:[(0,Y.jsx)(Ao,K({},a)),(0,Y.jsxs)(`g`,K({},s,{children:[(0,Y.jsx)(as,K({},c)),(0,Y.jsx)(_s,K({},l)),(0,Y.jsx)(be,K({},d)),(0,Y.jsx)(bo,K({},p))]})),(0,Y.jsx)(Vs,{}),(0,Y.jsx)(mo,K({},f)),(0,Y.jsx)(`g`,{"data-drawing-container":!0,children:(0,Y.jsx)(As,K({},u))}),(0,Y.jsx)(Is,K({},m)),(0,Y.jsx)(xo,K({},o)),g]})),!n.loading&&(0,Y.jsx)(y,K({},n.slotProps?.tooltip))]}))}))});function Us({distribution:e,parentId:t}){let n=e.filter(e=>String(e.year)!==`1`).sort((e,t)=>Number(e.year)-Number(t.year));if(n.length===0)return(0,Y.jsx)($,{subsectionId:`years`,parentId:t,title:`Years`,children:(0,Y.jsx)(G,{color:`text.secondary`,children:`No year data available`})});let r=n.map(e=>String(e.year)),i=n.map(e=>e.count);return(0,Y.jsx)($,{subsectionId:`years`,parentId:t,title:`Years`,secondary:(0,Y.jsxs)(G,{variant:`body2`,color:`text.secondary`,children:[n.length,` years`]}),children:(0,Y.jsx)(Hs,{height:250,xAxis:[{scaleType:`point`,data:r}],series:[{data:i,curve:`catmullRom`,showMark:!1}],margin:{left:50,right:20,top:20,bottom:30}})})}function Ws({libraryId:e}){let[t,n]=(0,J.useState)(null),[r,i]=(0,J.useState)(!0),[a,o]=(0,J.useState)(null);return(0,J.useEffect)(()=>{(async()=>{try{i(!0),o(null),n(await Ft(e))}catch(e){o(e instanceof Error?e.message:`Failed to load collection overview`),console.error(`[CollectionOverview] Load error:`,e)}finally{i(!1)}})()},[e]),r?(0,Y.jsx)(Ar,{sectionId:`collection-overview`,title:`Collection Overview`,children:(0,Y.jsx)(bt,{size:24})}):a||!t?(0,Y.jsx)(Ar,{sectionId:`collection-overview`,title:`Collection Overview`,children:(0,Y.jsx)(Mt,{severity:`error`,children:a||`Failed to load collection overview`})}):(0,Y.jsxs)(Ar,{sectionId:`collection-overview`,title:`Collection Overview`,secondary:(0,Y.jsxs)(G,{variant:`body2`,color:`text.secondary`,children:[t.stats.file_count.toLocaleString(),` tracks`]}),children:[(0,Y.jsx)(Ho,{stats:t.stats,parentId:`collection-overview`}),(0,Y.jsx)(Us,{distribution:t.year_distribution,parentId:`collection-overview`}),(0,Y.jsx)(Ro,{distribution:t.genre_distribution,parentId:`collection-overview`}),(0,Y.jsx)(Io,{distribution:t.artist_distribution,parentId:`collection-overview`})]})}function Gs({value:e,onChange:t}){let[n,r]=(0,J.useState)([]),[i,a]=(0,J.useState)(!0);return(0,J.useEffect)(()=>{(async()=>{try{r(await _t(!0))}catch(e){console.error(`[LibraryFilter] Failed to load libraries:`,e)}finally{a(!1)}})()},[]),(0,Y.jsxs)(Ue,{size:`small`,sx:{minWidth:200},children:[(0,Y.jsx)(Ge,{id:`library-filter-label`,children:`Library`}),(0,Y.jsxs)(We,{labelId:`library-filter-label`,id:`library-filter`,value:e??``,label:`Library`,onChange:e=>{let n=e.target.value;t(n===``?void 0:n)},disabled:i,children:[(0,Y.jsx)(Je,{value:``,children:`All Libraries`}),n.map(e=>(0,Y.jsx)(Je,{value:e.library_id,children:e.name},e.library_id))]})]})}function Ks({vibes:e,parentId:t}){return e.length===0?(0,Y.jsx)($,{subsectionId:`vibes`,parentId:t,title:`Dominant Vibes`,children:(0,Y.jsx)(G,{color:`text.secondary`,children:`No mood data available`})}):(0,Y.jsx)($,{subsectionId:`vibes`,parentId:t,title:`Dominant Vibes`,children:(0,Y.jsx)(W,{sx:{display:`flex`,flexWrap:`wrap`,gap:2},children:e.map((e,t)=>(0,Y.jsxs)(W,{sx:{textAlign:`center`,flex:`1 1 100px`,p:1,borderRadius:1,bgcolor:t===0?`primary.main`:`action.hover`,color:t===0?`primary.contrastText`:`text.primary`},children:[(0,Y.jsxs)(G,{variant:`h6`,children:[e.percentage.toFixed(0),`%`]}),(0,Y.jsx)(G,{variant:`body2`,sx:{textTransform:`capitalize`},children:e.mood})]},e.mood))})})}function qs({pairs:e,parentId:t,tierSelector:n}){return e.length===0?(0,Y.jsx)($,{subsectionId:`combos`,parentId:t,title:`Mood Combos`,secondary:(0,Y.jsx)(W,{sx:{display:`flex`,alignItems:`center`,gap:1},children:n}),children:(0,Y.jsx)(G,{color:`text.secondary`,children:`No mood combinations found`})}):(0,Y.jsx)($,{subsectionId:`combos`,parentId:t,title:`Mood Combos`,defaultExpanded:!1,secondary:(0,Y.jsxs)(W,{sx:{display:`flex`,alignItems:`center`,gap:1},children:[(0,Y.jsx)(G,{variant:`body2`,color:`text.secondary`,children:`Top pairs`}),n]}),children:(0,Y.jsx)(W,{sx:{display:`flex`,flexWrap:`wrap`,gap:1},children:e.map((e,t)=>(0,Y.jsx)(qe,{label:(0,Y.jsxs)(W,{sx:{display:`flex`,alignItems:`center`,gap:.5},children:[(0,Y.jsx)(G,{variant:`body2`,component:`span`,sx:{textTransform:`capitalize`},children:e.mood1}),(0,Y.jsx)(G,{variant:`body2`,component:`span`,color:`text.secondary`,children:`+`}),(0,Y.jsx)(G,{variant:`body2`,component:`span`,sx:{textTransform:`capitalize`},children:e.mood2}),(0,Y.jsxs)(G,{variant:`body2`,component:`span`,color:`text.secondary`,sx:{ml:.5},children:[`(`,e.count,`)`]})]}),variant:t<3?`filled`:`outlined`,color:t<3?`primary`:`default`,size:`small`},`${e.mood1}-${e.mood2}`))})})}var Js={strict:`Strict`,regular:`Regular`,loose:`Loose`},Ys=[`strict`,`regular`,`loose`];function Xs({coverage:e,balance:t,parentId:n}){let r=Ys.filter(n=>n in e.tiers||n in t);return(0,Y.jsx)($,{subsectionId:`coverage`,parentId:n,title:`Mood Coverage`,secondary:(0,Y.jsxs)(G,{variant:`body2`,color:`text.secondary`,children:[e.total_files.toLocaleString(),` tracks`]}),children:(0,Y.jsx)(W,{sx:{display:`flex`,gap:2,flexWrap:`wrap`,justifyContent:`center`},children:r.map(n=>{let r=e.tiers[n],i=(t[n]||[]).map((e,t)=>({id:t,value:e.count,label:e.mood}));return(0,Y.jsxs)(W,{sx:{textAlign:`center`,minWidth:200},children:[(0,Y.jsx)(G,{variant:`subtitle2`,children:Js[n]||n}),r&&(0,Y.jsxs)(G,{variant:`caption`,color:`text.secondary`,children:[r.tagged.toLocaleString(),` tagged (`,r.percentage.toFixed(1),`%)`]}),i.length>0?(0,Y.jsx)(ke,{series:[{data:i,innerRadius:25,outerRadius:80,paddingAngle:1,cornerRadius:3}],height:200,width:250,hideLegend:!0}):(0,Y.jsx)(G,{variant:`body2`,color:`text.secondary`,sx:{mt:2},children:`No data`})]},n)})})})}var Zs=[{value:`strict`,label:`Strict`},{value:`regular`,label:`Regular`},{value:`loose`,label:`Loose`}];function Qs({libraryId:e}){let[t,n]=(0,J.useState)(null),[r,i]=(0,J.useState)(!0),[a,o]=(0,J.useState)(null),[s,c]=(0,J.useState)(`strict`);return(0,J.useEffect)(()=>{(async()=>{try{i(!0),o(null),n(await $e(e,s))}catch(e){o(e instanceof Error?e.message:`Failed to load mood analysis`),console.error(`[MoodAnalysis] Load error:`,e)}finally{i(!1)}})()},[e,s]),r?(0,Y.jsx)(Ar,{sectionId:`mood-analysis`,title:`Mood Analysis`,children:(0,Y.jsx)(bt,{size:24})}):a||!t?(0,Y.jsx)(Ar,{sectionId:`mood-analysis`,title:`Mood Analysis`,children:(0,Y.jsx)(Mt,{severity:`error`,children:a||`Failed to load mood analysis`})}):(0,Y.jsxs)(Ar,{sectionId:`mood-analysis`,title:`Mood Analysis`,secondary:(0,Y.jsxs)(G,{variant:`body2`,color:`text.secondary`,children:[(t.coverage.tiers.strict?.percentage??0).toFixed(0),`% strict coverage`]}),children:[(0,Y.jsx)(Xs,{coverage:t.coverage,balance:t.balance,parentId:`mood-analysis`}),(0,Y.jsx)(Ks,{vibes:t.dominant_vibes,parentId:`mood-analysis`}),(0,Y.jsx)(qs,{pairs:t.top_pairs,parentId:`mood-analysis`,tierSelector:(0,Y.jsxs)(Ue,{size:`small`,sx:{minWidth:120},onClick:e=>e.stopPropagation(),children:[(0,Y.jsx)(Ge,{id:`mood-tier-label`,children:`Tier`}),(0,Y.jsx)(We,{labelId:`mood-tier-label`,id:`mood-tier-select`,value:s,label:`Tier`,onChange:e=>{c(e.target.value)},children:Zs.map(e=>(0,Y.jsx)(Je,{value:e.value,children:e.label},e.value))})]})})]})}function $s(){let[t,n]=(0,J.useState)(void 0);return(0,Y.jsxs)(e,{spacing:0,sx:{mt:2},children:[(0,Y.jsx)(W,{sx:{mb:2},children:(0,Y.jsx)(Gs,{value:t,onChange:n})}),(0,Y.jsx)(Ws,{libraryId:t}),(0,Y.jsx)(Qs,{libraryId:t}),(0,Y.jsx)(jr,{libraryId:t})]})}function ec({preview:t,configText:n,loading:r,error:i,onLoadPreview:a,onGenerateConfig:o}){let{showSuccess:s}=It();return(0,Y.jsxs)(e,{spacing:2.5,children:[(0,Y.jsxs)(st,{children:[(0,Y.jsx)(ht,{title:`Navidrome TOML Configuration`}),(0,Y.jsxs)(e,{spacing:1.25,children:[(0,Y.jsx)(Ct,{onClick:a,disabled:r,variant:`contained`,fullWidth:!0,children:r?`Loading...`:`Load Tag Preview`}),(0,Y.jsx)(Ct,{onClick:o,disabled:r,variant:`contained`,fullWidth:!0,children:r?`Generating...`:`Generate Config`})]}),i&&(0,Y.jsxs)(pt,{children:[`Error: `,i]})]}),t&&(0,Y.jsxs)(st,{children:[(0,Y.jsx)(ht,{title:`Tag Preview`}),(0,Y.jsx)(W,{sx:{overflowX:`auto`},children:(0,Y.jsxs)(Ye,{children:[(0,Y.jsx)(Ze,{children:(0,Y.jsxs)(Qe,{children:[(0,Y.jsx)(R,{sx:{bgcolor:`background.default`,borderBottom:2},children:`Tag`}),(0,Y.jsx)(R,{sx:{bgcolor:`background.default`,borderBottom:2},children:`Type`}),(0,Y.jsx)(R,{sx:{bgcolor:`background.default`,borderBottom:2},children:`Multivalue`}),(0,Y.jsx)(R,{sx:{bgcolor:`background.default`,borderBottom:2},children:`Count`}),(0,Y.jsx)(R,{sx:{bgcolor:`background.default`,borderBottom:2},children:`Summary`})]})}),(0,Y.jsx)(Xe,{children:t.map(e=>(0,Y.jsxs)(Qe,{children:[(0,Y.jsx)(R,{sx:{borderColor:`divider`},children:e.tag_key}),(0,Y.jsx)(R,{sx:{borderColor:`divider`},children:e.type}),(0,Y.jsx)(R,{sx:{borderColor:`divider`},children:e.is_multivalue?`Yes`:`No`}),(0,Y.jsx)(R,{sx:{borderColor:`divider`},children:e.total_count}),(0,Y.jsx)(R,{sx:{borderColor:`divider`},children:e.summary})]},e.tag_key))})]})})]}),n&&(0,Y.jsxs)(st,{children:[(0,Y.jsx)(ht,{title:`Generated Config`}),(0,Y.jsx)(Ke,{multiline:!0,rows:20,value:n,fullWidth:!0,InputProps:{readOnly:!0,sx:{fontFamily:`monospace`,fontSize:`0.875rem`}}}),(0,Y.jsx)(Ct,{onClick:()=>{n&&(navigator.clipboard.writeText(n),s(`Copied to clipboard!`))},variant:`contained`,sx:{mt:1.25},children:`Copy to Clipboard`})]})]})}function tc({query:t,name:n,comment:r,limit:i,sort:a,preview:o,content:s,loading:c,error:l,onQueryChange:u,onNameChange:d,onCommentChange:f,onLimitChange:p,onSortChange:m,onPreview:h,onGenerate:g}){return(0,Y.jsxs)(e,{spacing:2.5,children:[(0,Y.jsxs)(st,{children:[(0,Y.jsx)(ht,{title:`Smart Playlist Generator`}),(0,Y.jsx)(W,{component:`form`,onSubmit:h,children:(0,Y.jsxs)(e,{spacing:2,children:[(0,Y.jsxs)(W,{children:[(0,Y.jsx)(G,{variant:`body2`,color:`text.secondary`,sx:{mb:.5,fontWeight:600},children:`Query *`}),(0,Y.jsx)(Ke,{value:t,onChange:e=>u(e.target.value),placeholder:`e.g., tag:nom_happy > 0.8`,multiline:!0,rows:3,disabled:c,required:!0,fullWidth:!0,InputProps:{sx:{fontFamily:`monospace`,fontSize:`0.875rem`}}})]}),(0,Y.jsxs)(W,{children:[(0,Y.jsx)(G,{variant:`body2`,color:`text.secondary`,sx:{mb:.5,fontWeight:600},children:`Playlist Name *`}),(0,Y.jsx)(Ke,{value:n,onChange:e=>d(e.target.value),disabled:c,required:!0,fullWidth:!0})]}),(0,Y.jsxs)(W,{children:[(0,Y.jsx)(G,{variant:`body2`,color:`text.secondary`,sx:{mb:.5,fontWeight:600},children:`Comment`}),(0,Y.jsx)(Ke,{value:r,onChange:e=>f(e.target.value),disabled:c,fullWidth:!0})]}),(0,Y.jsxs)(W,{sx:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:1.25},children:[(0,Y.jsxs)(W,{children:[(0,Y.jsx)(G,{variant:`body2`,color:`text.secondary`,sx:{mb:.5,fontWeight:600},children:`Limit`}),(0,Y.jsx)(Ke,{type:`number`,value:i??``,onChange:e=>p(e.target.value?parseInt(e.target.value):void 0),disabled:c,placeholder:`Optional`,fullWidth:!0})]}),(0,Y.jsxs)(W,{children:[(0,Y.jsx)(G,{variant:`body2`,color:`text.secondary`,sx:{mb:.5,fontWeight:600},children:`Sort`}),(0,Y.jsx)(Ke,{value:a,onChange:e=>m(e.target.value),disabled:c,placeholder:`Optional`,fullWidth:!0})]})]}),(0,Y.jsxs)(e,{direction:`row`,spacing:1.25,children:[(0,Y.jsx)(Ct,{type:`submit`,variant:`contained`,disabled:c,fullWidth:!0,children:c?`Loading...`:`Preview Query`}),(0,Y.jsx)(Ct,{type:`button`,onClick:g,variant:`contained`,disabled:c,fullWidth:!0,children:c?`Generating...`:`Generate .nsp`})]})]})}),l&&(0,Y.jsxs)(pt,{children:[`Error: `,l]})]}),o&&(0,Y.jsxs)(st,{children:[(0,Y.jsx)(ht,{title:`Query Preview`}),(0,Y.jsx)(W,{component:`pre`,sx:{p:2,bgcolor:`background.default`,border:1,borderColor:`divider`,borderRadius:1,overflow:`auto`,fontSize:`0.875rem`,fontFamily:`monospace`},children:JSON.stringify(o,null,2)})]}),s&&(0,Y.jsxs)(st,{children:[(0,Y.jsx)(ht,{title:`Generated Playlist (.nsp)`}),(0,Y.jsx)(Ke,{multiline:!0,rows:15,value:s,fullWidth:!0,InputProps:{readOnly:!0,sx:{fontFamily:`monospace`,fontSize:`0.875rem`}}}),(0,Y.jsx)(Ct,{onClick:()=>{if(s){let e=new Blob([s],{type:`text/plain`}),t=URL.createObjectURL(e),r=document.createElement(`a`);r.href=t,r.download=`${n}.nsp`,r.click(),URL.revokeObjectURL(t)}},variant:`contained`,sx:{mt:1.25},children:`Download .nsp File`})]})]})}function nc(){let{showError:e}=It(),[t,n]=(0,J.useState)(null),[r,i]=(0,J.useState)(null),[a,o]=(0,J.useState)(!1),[s,c]=(0,J.useState)(null),[l,u]=(0,J.useState)(``),[d,f]=(0,J.useState)(`My Playlist`),[p,m]=(0,J.useState)(``),[h,g]=(0,J.useState)(void 0),[_,v]=(0,J.useState)(``),[y,b]=(0,J.useState)(null),[x,S]=(0,J.useState)(null),[C,w]=(0,J.useState)(!1),[T,E]=(0,J.useState)(null);return{configPreview:t,configText:r,configLoading:a,configError:s,playlistQuery:l,playlistName:d,playlistComment:p,playlistLimit:h,playlistSort:_,playlistPreview:y,playlistContent:x,playlistLoading:C,playlistError:T,loadConfigPreview:async()=>{try{o(!0),c(null),n((await Ot()).tags)}catch(e){c(e instanceof Error?e.message:`Failed to load preview`)}finally{o(!1)}},generateConfig:async()=>{try{o(!0),c(null),i((await Dt()).config)}catch(e){c(e instanceof Error?e.message:`Failed to generate config`)}finally{o(!1)}},previewPlaylist:async e=>{if(e.preventDefault(),l.trim())try{w(!0),E(null),b(await St(l,10))}catch(e){E(e instanceof Error?e.message:`Failed to preview playlist`)}finally{w(!1)}},generatePlaylist:async()=>{if(!l.trim()){e(`Query is required`);return}if(!d.trim()){e(`Playlist name is required`);return}try{w(!0),E(null),S((await At({query:l,playlist_name:d,comment:p,limit:h,sort:_||void 0})).content)}catch(e){E(e instanceof Error?e.message:`Failed to generate playlist`)}finally{w(!1)}},setPlaylistQuery:u,setPlaylistName:f,setPlaylistComment:m,setPlaylistLimit:g,setPlaylistSort:v}}function rc(){let[e,t]=(0,J.useState)(`config`),{configPreview:n,configText:r,configLoading:i,configError:a,playlistQuery:o,playlistName:s,playlistComment:c,playlistLimit:l,playlistSort:u,playlistPreview:d,playlistContent:f,playlistLoading:p,playlistError:m,loadConfigPreview:h,generateConfig:g,previewPlaylist:_,generatePlaylist:v,setPlaylistQuery:y,setPlaylistName:b,setPlaylistComment:x,setPlaylistLimit:S,setPlaylistSort:C}=nc();return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(rt,{tabs:[{id:`config`,label:`Config Generator`},{id:`playlist`,label:`Playlist Generator`}],activeTab:e,onTabChange:e=>t(e)}),e===`config`&&(0,Y.jsx)(ec,{preview:n,configText:r,loading:i,error:a,onLoadPreview:h,onGenerateConfig:g}),e===`playlist`&&(0,Y.jsx)(tc,{query:o,name:s,comment:c,limit:l,sort:u,preview:d,content:f,loading:p,error:m,onQueryChange:y,onNameChange:b,onCommentChange:x,onLimitChange:S,onSortChange:C,onPreview:_,onGenerate:v})]})}function ic(){let[e,t]=(0,J.useState)(`analytics`);return(0,Y.jsxs)(tt,{title:`Insights`,children:[(0,Y.jsx)(rt,{tabs:[{id:`analytics`,label:`Analytics`},{id:`navidrome`,label:`Navidrome Integration`}],activeTab:e,onTabChange:e=>t(e)}),e===`analytics`&&(0,Y.jsx)($s,{}),e===`navidrome`&&(0,Y.jsx)(rc,{})]})}export{ic as InsightsPage};